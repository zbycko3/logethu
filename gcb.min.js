(function(){var org={},requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m=b&&b.split("/"),n=p.map,o=n&&n["*"]||{};if(a&&"."===a.charAt(0))if(b){for(m=m.slice(0,m.length-1),a=m.concat(a.split("/")),j=0;j<a.length;j+=1)if(l=a[j],"."===l)a.splice(j,1),j-=1;else if(".."===l){if(1===j&&(".."===a[2]||".."===a[0]))break;j>0&&(a.splice(j-1,2),j-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((m||o)&&n){for(c=a.split("/"),j=c.length;j>0;j-=1){if(d=c.slice(0,j).join("/"),m)for(k=m.length;k>0;k-=1)if(e=n[m.slice(0,k).join("/")],e&&(e=e[d])){f=e,g=j;break}if(f)break;!h&&o&&o[d]&&(h=o[d],i=j)}!f&&h&&(f=h,g=i),f&&(c.splice(0,g,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[];if(i=i||c,"function"==typeof h){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h.apply(n[c],u),c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){return"string"==typeof b?m[b]?m[b](c):g(l(b,c).f):(b.splice||(p=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k)},k.config=function(a){return p=a,p.deps&&k(p.deps,p.callback),k},define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("vendor/almond",function(){}),function(a,b){function c(a){var b=oa[a]={};return $.each(a.split(ba),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qa,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:pa.test(d)?$.parseJSON(d):d}catch(f){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return $.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Ka.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a,d){return $.inArray(a,b)>=0===c})}function k(a){var b=Na.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if(b=rb[e]+c,b in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cb(c,"display"),e[f]||"none"===d||$._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=$.css(a,c+qb[e],!0)),d?("content"===c&&(f-=parseFloat(cb(a,"padding"+qb[e]))||0),"margin"!==c&&(f-=parseFloat(cb(a,"border"+qb[e]+"Width"))||0)):(f+=parseFloat(cb(a,"padding"+qb[e]))||0,"padding"!==c&&(f+=parseFloat(cb(a,"border"+qb[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(0>=d||null==d){if(d=cb(a,b),(0>d||null==d)&&(d=a.style[b]),lb.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nb[a])return nb[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(db=P.body.appendChild(db||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),eb&&db.createElement||(eb=(db.contentWindow||db.contentDocument).document,eb.write("<!doctype html><html><body>"),eb.close()),b=eb.body.appendChild(eb.createElement(a)),c=cb(b,"display"),P.body.removeChild(db)),nb[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||ub.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(ba),h=0,i=g.length;if($.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kb;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(b){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function F(){return setTimeout(function(){Vb=b},0),Vb=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=(_b[b]||[]).concat(_b["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=$b.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Vb||F(),c=Math.max(0,i.startTime+i.duration-b),d=1-(c/i.duration||0),e=0,f=i.tweens.length;f>e;e++)i.tweens[e].run(d);return g.notifyWith(a,[i,d,c]),1>d&&f?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Vb||F(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(e),e},stop:function(b){for(var c=0,d=b?i.tweens.length:0;d>c;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);f>e;e++)if(d=$b[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=$.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],p=a.nodeType&&r(a);c.queue||(j=$._queueHooks(a,"fx"),null==j.unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,$.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",$.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Xb.exec(f)){if(delete b[d],f===(p?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),p?$(a).show():l.done(function(){$(a).hide()}),l.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in n)$.style(a,b,n[b])}),d=0;g>d;d++)e=o[d],i=l.createTween(e,p?h[e]:0),n[e]=h[e]||$.style(a,e),e in h||(h[e]=i.start,p&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=qb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,ba=/\s+/,ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fa=/^[\],:{}\s]*$/,ga=/(?:^|:|,)(?:\s*\[)+/g,ha=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ia=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ja=/^-ms-/,ka=/-([\da-z])/gi,la=function(a,b){return(b+"").toUpperCase()},ma=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",ma,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",ma),$.ready())},na={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:da.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),ea.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if(f=P.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||$.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(a===!0?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,a!==!0&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):na[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||Y.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=ea.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fa.test(b.replace(ha,"@").replace(ia,"]").replace(ga,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&aa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ja,"ms-").replace(ka,la)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:Z&&!Z.call("\ufeff ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(ca,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",ma,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",ma),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){na["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var oa={};$.Callbacks=function(a){a="string"==typeof a?oa[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){var e=$.type(d);"function"!==e||a.unique&&m.has(d)?d&&d.length&&"string"!==e&&c(d):j.push(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div");if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5",!c||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(n){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qa=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[$.camelCase(c)])):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;g>f;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;i>k;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){return c===b?(l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l):(e[1]=c,void this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=$._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ra,sa,ta,ua=/[\t\r\n]/g,va=/\r/g,wa=/^(?:button|input)$/i,xa=/^(?:button|input|object|select|textarea)$/i,ya=/^a(?:rea|)$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Aa=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(ba),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(ba),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ua," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return $.isFunction(a)?this.each(function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(ba);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else("undefined"===c||"boolean"===c)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||a===!1?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ua," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(va,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||($.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&$.nodeName(e.parentNode,"optgroup"))){if(b=$(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?$(h[f]).val():g;
},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):"undefined"==typeof a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(za.test(c)?sa:ra)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(ba);g<d.length;g++)e=d[g],e&&(c=$.propFix[e]||e,f=za.test(e),f||$.attr(a,e,""),a.removeAttribute(Aa?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ra&&$.nodeName(a,"button")?ra.get(a,b):b in a?a.value:null},set:function(a,b,c){return ra&&$.nodeName(a,"button")?ra.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xa.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:b}}}}),sa={get:function(a,c){var d,e=$.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Aa||(ta={name:!0,id:!0,coords:!0},ra=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ta[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),$.attrHooks.contenteditable={get:ra.get,set:function(a,b,c){""===b&&(b="false"),ra.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){return $.isArray(b)?a.checked=$.inArray($(a).val(),b)>=0:void 0}})});var Ba=/^(?:textarea|input|select)$/i,Ca=/^([^\.]*|)(?:\.(.+)|)$/,Da=/(?:^|\s)hover(\.\S+|)\b/,Ea=/^key/,Fa=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,Ha=function(a){return $.event.special.hover?a:a.replace(Da,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof $||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Ha(c)).split(" "),j=0;j<c.length;j++)k=Ca.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&q.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Ha(b||"")).split(" "),f=0;f<b.length;f++)if(g=Ca.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],!e&&i!==p.origType||c&&c.guid!==p.guid||j&&!j.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&(n.teardown&&n.teardown.call(a,j,q.handle)!==!1||$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!Ga.test(q+$.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!$.event.customEvent[q]||$.event.global[q]))if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},!m.trigger||m.trigger.apply(e,d)!==!1){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Ga.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),n=l&&j[l],n&&$.acceptData(j)&&n.apply&&n.apply(j,d)===!1&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&m._default.apply(e.ownerDocument,d)!==!1||"click"===q&&$.nodeName(e,"a")||!$.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||q.preDispatch.call(this,c)!==!1){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(h={},j=[],d=0;n>d;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o),g!==b&&(c.result=g,g===!1&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector;return(!e||e!==d&&!$.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return Ba.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ba.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),!Ba.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0===c++&&P.addEventListener(a,d,!0)},teardown:function(){0===--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?$.event.trigger(a,b,this[0],!0):void 0},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Ea.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fa.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(g=v(b),!g&&!d&&(e=ca.exec(a)))if(h=e[1]){if(9===i){if(f=b.getElementById(h),!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ma&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){(!d||(e=_.exec(h)))&&(e&&(h=h.slice(e[0].length)),i.push(f=[])),d=!1,(e=aa.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)!(e=ha[g].exec(h))||j[g]&&!(e=j[g](e,F,!0))||(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){if(!f||!e){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[],f),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(m=k(t,p),d(m,[],h,i),j=m.length;j--;)(l=m[j])&&(t[p[j]]=!(s[p[j]]=l));if(f)for(j=a&&t.length;j--;)(l=t[j])&&(f[n[j]]=!(g[n[j]]=l));else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)}})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];e>h;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;e>d&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,d>h&&m(a.slice(h,d)),e>d&&m(a=a.slice(d)),e>d&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)u[s]||p[s]||(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d,e){for(var f=0,g=b.length;g>f;f++)c(a,b[f],d,e);return d}function p(a,b,c,d,e){var f,g,i,j,k,l=h(a);l.length;if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(b=t.find.ID(i.matches[0].replace(ga,""),b,e)[0],!b)return c;a=a.slice(g.shift().length)}for(f=ha.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(ga,""),da.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),a=d.length&&g.join(""),!a)return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,da.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),aa=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ba=new RegExp(X),ca=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,da=/[\x20\t\r\n\f]*[+~]/,ea=/h\d/i,fa=/input|select|textarea|button/i,ga=/\\(?!\\)/g,ha={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ia=function(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}},ja=ia(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),ka=ia(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),la=ia(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),ma=ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),na=ia(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(oa){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||la?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:ha,attrHandle:ka?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ja?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:na&&function(a,b){return typeof b.getElementsByName!==C?b.getElementsByName(name):void 0},CLASS:ma&&function(a,b,c){return typeof b.getElementsByClassName===C||c?void 0:b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,""),a[3]=(a[4]||a[5]||"").replace(ga,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return ha.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ba.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(ga,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ga,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ga,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a];return b||(b=P(a,new RegExp("(^|"+S+")"+a+"("+S+"|$)"))),function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e,f){var g=c.attr(e,a);return null==g?"!="===b:b?(g+="","="===b?g===d:"!="===b?g!==d:"^="===b?d&&0===g.indexOf(d):"*="===b?d&&g.indexOf(d)>-1:"$="===b?d&&g.substr(g.length-d.length)===d:"~="===b?(" "+g+" ").indexOf(d)>-1:"|="===b?g===d||g.substr(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return e-=d,e===c||e%c===0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return ea.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return!(a!==b.activeElement||b.hasFocus&&!b.hasFocus()||!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,b,c){return[0]}),last:f(function(a,b,c){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b,c){for(var d=0;b>d;d+=2)a.push(d);return a}),odd:f(function(a,b,c){for(var d=1;b>d;d+=2)a.push(d);return a}),lt:f(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;c>k&&d>k;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=1;if(z=B,a.sort(y),z)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&!function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active",":focus"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ia(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ia(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!(g||i||f&&f.test(a))){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=da.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(p){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ia(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(c){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!(v(b)||g.test(d)||f&&f.test(d)))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(j){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ia=/Until$/,Ja=/^(?:parents|prev(?:Until|All))/,Ka=/^.[^:#\[\.,]*$/,La=$.expr.match.needsContext,Ma={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;c>b;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){
return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?La.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=La.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ia.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Ma[a]?$.unique(e):e,this.length>1&&Ja.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Na="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oa=/ jQuery\d+="(?:null|\d+)"/g,Pa=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ra=/<([\w:]+)/,Sa=/<tbody/i,Ta=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,Va=/<(?:script|object|embed|option|style)/i,Wa=new RegExp("<(?:"+Na+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,Ya=/checked\s*(?:[^=]|=\s*.checked.)/i,Za=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=k(P),bb=ab.appendChild(P.createElement("div"));_a.optgroup=_a.option,_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,$.support.htmlSerialize||(_a._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return $.isFunction(a)?this.each(function(b){$(this).wrapInner(a.call(this,b))}):this.each(function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||$.filter(a,[c]).length)&&(b||1!==c.nodeType||($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Oa,""):b;if(!("string"!=typeof a||Ua.test(a)||!$.support.htmlSerialize&&Wa.test(a)||!$.support.leadingWhitespace&&Pa.test(a)||_a[(Ra.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Qa,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Ya.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;m>i;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,!(1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0))||Va.test(h)||!$.support.checkClone&&Ya.test(h)||!$.support.html5Clone&&Wa.test(h)||(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bb.innerHTML=a.outerHTML,bb.removeChild(g=bb.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ab,s=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Ta.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qa,"<$1></$2>"),h=(Ra.exec(g)||["",""])[1].toLowerCase(),i=_a[h]||_a._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sa.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pa.test(g)&&l.insertBefore(b.createTextNode(Pa.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):"undefined"!=typeof g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){return!a.type||Za.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cb,db,eb,fb=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/^(top|right|bottom|left)$/,ib=/^(none|table(?!-c[ea]).+)/,jb=/^margin/,kb=new RegExp("^("+_+")(.*)$","i"),lb=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mb=new RegExp("^([-+])=("+_+")","i"),nb={},ob={position:"absolute",visibility:"hidden",display:"block"},pb={letterSpacing:0,fontWeight:400},qb=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"],sb=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sb.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=mb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||$.cssNumber[i]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cb(a,c)),"normal"===f&&c in pb&&(f=pb[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h[c],""!==d||$.contains(b.ownerDocument,b)||(d=$.style(b,c)),lb.test(d)&&jb.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),lb.test(e)&&!hb.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&ib.test(cb(a,"display"))?$.swap(a,ob,function(){return v(a,b,d)}):v(a,b,d):void 0},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){return b?cb(a,"marginRight"):void 0})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cb(a,b);return lb.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cb(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;4>d;d++)f[a+qb[d]+b]=e[d]||e[d-2]||e[0];return f}},jb.test(a)||($.cssHooks[a+b].set=t)});var tb=/%20/g,ub=/\[\]$/,vb=/\r?\n/g,wb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xb=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xb.test(this.nodeName)||wb.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a,c){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tb,"+")};var yb,zb,Ab=/#.*$/,Bb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/([?&])_=[^&]*/,Ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jb=$.fn.load,Kb={},Lb={},Mb=["*/"]+["*"];try{zb=Q.href}catch(Nb){zb=P.createElement("a"),zb.href="",zb=zb.href}yb=Ib.exec(zb.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jb)return Jb.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gb,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zb,isLocal:Cb.test(yb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kb),ajaxTransport:y(Lb),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),v=w.getResponseHeader("Etag"),v&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,(!x||a)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(2>u)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ab,"").replace(Eb,yb[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(ba),null==m.crossDomain&&(j=Ib.exec(m.url.toLowerCase())||!1,m.crossDomain=j&&j.join(":")+(j[3]?"":"http:"===j[1]?80:443)!==yb.join(":")+(yb[3]?"":"http:"===yb[1]?80:443)),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kb,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Db.test(m.type),k&&0===$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fb.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,m.cache===!1)){var x=$.now(),y=m.url.replace(Hb,"$1_="+x);m.url=y+(y===m.url?(Fb.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(A){if(!(2>u))throw A;d(-1,A)}}else d(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Ob=[],Pb=/\?/,Qb=/(=)\?(?=&|$)|\?\?/,Rb=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ob.pop()||$.expando+"_"+Rb++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&Qb.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qb.test(i);return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Qb,"$1"+f):m?c.data=i.replace(Qb,"$1"+f):k&&(c.url+=(Pb.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ob.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Sb,Tb=a.ActiveXObject?function(){for(var a in Sb)Sb[a](0,1)}:!1,Ub=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Tb&&delete Sb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Ub,Tb&&(Sb||(Sb={},$(a).unload(Tb)),Sb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Vb,Wb,Xb=/^(?:toggle|show|hide)$/,Yb=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Zb=/queueHooks$/,$b=[J],_b={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Yb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||($.cssNumber[a]?"":"px"),"px"!==d&&h){h=$.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,$.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],_b[c]=_b[c]||[],_b[c].unshift(b)},prefilter:function(a,b){b?$b.unshift(a):$b.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Zb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){for(var a,b=$.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||$.fx.stop()},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Wb&&(Wb=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Wb),Wb=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var ac=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(l)return(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?("undefined"!=typeof k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=ac.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!ac.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.4.4";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return;
}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?null:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(b||x.identity);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return y(a,function(a){x.isArray(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(i.apply(d,arguments))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=x.pluck(a,""+d);return c},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f},x.bind=function(a,b){if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));var c=h.call(arguments,2);return function(){return a.apply(b,c.concat(h.call(arguments)))}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return 0===b.length&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},x.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var E=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if("[object Array]"==e){if(g=a.length,h=g==b.length)for(;g--&&(h=E(a[g],b[g],c,d)););}else{var i=a.constructor,k=b.constructor;if(i!==k&&!(x.isFunction(i)&&i instanceof i&&x.isFunction(k)&&k instanceof k))return!1;for(var l in a)if(x.has(a,l)&&(g++,!(h=x.has(b,l)&&E(a[l],b[l],c,d))))break;if(h){for(l in b)if(x.has(b,l)&&!g--)break;h=!g}}return c.pop(),d.pop(),h};x.isEqual=function(a,b){return E(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(a),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var F={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};F.unescape=x.invert(F.escape);var G={escape:new RegExp("["+x.keys(F.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(F.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(G[a],function(b){return F[a][b]})}}),x.result=function(a,b){if(null==a)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),L.call(this,c.apply(x,a))}})};var H=0;x.uniqueId=function(a){var b=++H+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||I).source,(c.interpolate||I).source,(c.evaluate||I).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(K,function(a){return"\\"+J[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var L=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],L.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return L.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),define("json",[],function(){"use strict";var hasJSON=window.JSON,hasJSONparse=hasJSON&&JSON.parse,hasJSONstringify=hasJSON&&JSON.stringify&&'{"a":1}'==JSON.stringify({a:0},function(a,b){return b||1});if(hasJSONparse&&hasJSONstringify)return{parse:JSON.parse,stringify:function(){return window.Prototype&&Array.prototype.toJSON?function(a){var b=Array.prototype.toJSON;delete Array.prototype.toJSON;var c=JSON.stringify(a);return Array.prototype.toJSON=b,c}:JSON.stringify}()};var escapeString=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:hasJSONparse?JSON.parse:function(str,strict){if(strict=!0,strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");return eval("("+str+")")},stringify:function(a,b,c){function d(a,f,g){b&&(a=b(g,a));var h,i=typeof a;if("number"==i)return isFinite(a)?a+"":"null";if("boolean"==i)return a+"";if(null===a)return"null";if("string"==typeof a)return escapeString(a);if("function"==i||"undefined"==i)return e;if(a instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,d){var e=a["getUTC"+c]()+(d?1:0);return 10>e?"0"+e:e});if(a.valueOf()!==a)return d(a.valueOf(),f,g);var j=c?f+c:"",k=c?" ":"",l=c?"\n":"";if(a instanceof Array){var m=a.length,n=[];for(g=0;m>g;g++){var o=a[g];h=d(o,j,g),"string"!=typeof h&&(h="null"),n.push(l+j+h)}return"["+n.join(",")+l+f+"]"}var p=[];for(g in a){var q;if(a.hasOwnProperty(g)){if("number"==typeof g)q='"'+g+'"';else{if("string"!=typeof g)continue;q=escapeString(g)}if(h=d(a[g],j,g),"string"!=typeof h)continue;p.push(l+j+q+":"+k+h)}}return"{"+p.join(",")+l+f+"}"}var e;return"string"==typeof b&&(c=b,b=null),d(a,"","")}}}),define("cb/lib/log",["underscore","json"],function(a,b){"use strict";function c(c){var d,f,g="";for(d=0;d<c.length;d++)if(f=c[d],a.isArray(f))try{g+=b.stringify(f)+" "}catch(h){""!==g&&(console.log(g),g=""),console.log("["+f.join(",")+"]")}else if(window&&window.Node&&f instanceof window.Node&&e)try{g+=e.serializeToString(f)+" "}catch(h){""!==g&&(console.log(g),g=""),console.dir(f)}else if(a.isObject(f))try{g+=b.stringify(f)+" "}catch(h){""!==g&&(console.log(g),g=""),console.dir(f)}else g+=f;""!==g&&console.log(g)}function d(){var b=a.toArray(arguments);a.find(b,a.isObject)?c(b):console.log(b.join(" "))}var e,f=!1;try{e=new window.XMLSerializer}catch(g){e=null}try{window.external.Log(""),f=!0}catch(g){}return f?(window.onerror=function(a,b,c){window.external.Log("JavaScript error: "+a+" on line "+c+" for "+b)},function(){var c=a.toArray(arguments),d="";a.each(c,function(a,e){try{d+=b.stringify(a)}catch(f){d+=f.message?"[ERROR: "+f.message+"]":"[UNKNOWN ERROR]"}e+1!==c.length&&(d+=", ")});try{window.external.Log(d)}catch(e){window.alert("Cannot log "+d+". Error: "+e.message)}}):!Function.prototype.bind||"object"!=typeof console&&"function"!=typeof console||"object"!=typeof console.log?"undefined"!=typeof console&&"function"==typeof console.log?d:function(){}:(a.each(["log","info","warn","error","assert","dir","clear","profile","profileEnd"],function(a){console[a]=this.call(console[a],console)},Function.prototype.bind),d)}),define("cb/lib/contexts",[],function(){"use strict";function a(){return window.top}function b(a,b){return a==b}function c(){return b(a(),window)}return{isSameWindow:b,isTopContext:c,getTopContext:a}}),define("integration/lib/config",["jquery","underscore"],function(a,b){"use strict";function c(){return{debug:!1,cobrowse:{disableBuiltInUI:!1,primaryMedia:null,maxOfflineDuration:h,disableWebSockets:!1,apikey:null,css:{server:!0,browser:!1,"default":!1},localization:null,setDocumentDomain:!0},tracker:null,chat:{localization:null,registration:!0,autoRestore:!0,maxOfflineDuration:h,disableWebSockets:!1,ui:{}},buttons:{position:"left",cobrowse:!0,chat:!0}}}function d(c,d){var e;return!c||a.isEmptyObject(c)?d:(e=c,e.browser=!!e.browser,e.server=!!e.server,b.isBoolean(e["default"])||(e["default"]=e.browser),e)}function e(e){var f,g,h,i,j,k,l,m=new c;return g=a.extend(!0,{},m,e),h=g.cobrowse,i=g.chat,j=e.cobrowse,j&&(h.css=d(j.css,m.cobrowse.css)),e.integration&&(a.extend(!0,g,e.integration),delete g.integration),f=e&&(e.buttons||e.integration&&e.integration.buttons)||{},h===!1&&b.isUndefined(f.cobrowse)&&(g.buttons.cobrowse=!1),i===!1&&b.isUndefined(f.chat)&&(g.buttons.chat=!1),k=["disableWebSockets","apikey","maxOfflineDuration"],l=["chat","cobrowse"],b.forEach(l,function(c){g[c]!==!1&&a.extend(g[c],b.pick(g,k),b.pick(e[c]||{},k))}),g}function f(b,c){var d,e;return c?(d=b.chat.ui.onBeforeWrapper,e=b.chat.ui.onBeforeMessage,a.extend(!0,b.chat,{ui:{onBeforeWrapper:function(a){c&&c.markServiceElement(a),d&&d(a)},onBeforeMessage:function(a,b){return/\{start:\d{9}\}/.test(b)?!1:e?e(a,b):void 0}}})):b.chat}function g(a){var c;return b.isObject(a.cobrowse)&&(c=a.cobrowse.debug,b.isBoolean(c))?c:a.debug}var h=600;return{extendConfig:e,getIntegratedChatConfig:f,getCobrowseDebugValue:g,getDefaultConfig:function(){return new c}}}),define("cb/constants",[],function(){"use strict";var a="/service/session",b="/service/context",c="/service/window";return{MASTER_GLOBAL_NAME:"__genesys_cobrowse_masterApp__",SLAVE_GLOBAL_NAME:"SlaveApp",IFRAME_INDEX_PROP:"__genesys_cobrowse_iframe_id__",SERVICE_NODE_ATTR:"data-gcb-service-node",CSS_INDEX_PROPERTY:"__cb_css_index__",PSEUDO_HOVER_CLASS:"_gcbPseudoHover_",TOPMOST_CONTEXT_ID:1,userRoles:{MASTER:1,SLAVE:2},mouseSyncSpeed:{HIGH:80,LOW:280},modes:{POINTER:1,WRITE:2},cometDLogLevel:{INFO:"info",DEBUG:"debug",WARN:"warn"},COMETD_MAX_NETWORK_DELAY:6e4,SERVER_AVAILABILITY_TIMEOUT:5e3,CSS_LOADING_TIMEOUT:7e3,sessionEndTriggers:{SELF:"self",EXTERNAL:"external",TIMEOUT:"timeout",INACTIVITY_TIMEOUT:"inactivityTimeout",ERROR:"error",SERVER_UNAVAILABLE:"serverUnavailable",SESSIONS_OVER_LIMIT:"sessionsOverLimit",UNKNOWN_REASON:"unknownReason"},deactivationReasonsFromServer:{NONE:"NONE",TIMEOUT_INACTIVE:"TIMEOUT_INACTIVE",STOPPED_BY_USER:"STOPPED_BY_USER",DISCONNECTED_USER:"DISCONNECTED_USER",SESSIONS_OVER_LIMIT:"SESSIONS_OVER_LIMIT"},SESSION_CONFIG_KEY:"com.genesyslab.cobrowse.session.config",RELOAD_EXTENSION_COOKIE_NAME:"gcb-cobrowse-reload",RELOAD_EXTENSION_TIMEOUT:600,PAUSE_BEFORE_NAVIGATION:2e3,NAVIGATION_TIMEOUT:7e3,TOOLBAR_POSITION_KEY:"_gcbToolbarCoords_",DOM_RESTRICTION_CLASS_PREFIX:"cobrowse-domrestriction",channels:{META_HANDSHAKE:"/meta/handshake",META_CONNECT:"/meta/connect",SESSION_CREATE:a+"/create",SESSION_CONFIG:a+"/config",SESSION_JOIN:a+"/join",SESSION_JOINED:a+"/joined",SESSION_MODE:a+"/mode",SESSION_MODE_ATTEMPT:a+"/mode/attempt",SESSION_MODE_DENIAL:a+"/mode/denial",SESSION_EXIT:a+"/exit",SESSION_DEACTIVATED:a+"/deactivated",SERVICE_CONTEXT:b,CONTEXT_DOM:b+"/dom",CONTEXT_CSS:b+"/css",CONTEXT_READY:b+"/ready",CONTEXT_SCROLL:b+"/scroll",CONTEXT_MOUSE_MOVE:b+"/mouse/move",CONTEXT_MOUSE_CLICK:b+"/mouse/click",CONTEXT_INPUT:b+"/input",WINDOW_SIZE:c+"/size",WINDOW_DIALOG_START:c+"/dialog/start",WINDOW_DIALOG_END:c+"/dialog/end",WINDOW_CONTROL:c+"/control",WINDOW_NAVIGATE:c+"/navigate",WINDOW_NAVIGATE_ATTEMPT:c+"/navigate/attempt",WINDOW_NAVIGATE_DENIAL:c+"/navigate/denial"},SERVER_STICKY_COOKIE:"gcbSessionServer",LIVE_SESSIONS_REST_RESOURCE:"/rest/live/sessions/",SLAVE_METRICS_REST_RESOURCE:"/rest/live/sessions/{id}/slave-rendered"}}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define("SecondLevelDomains",b):a.SecondLevelDomains=b()}(this,function(){"use strict";var a=Object.prototype.hasOwnProperty,b={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(a){return!!a.match(b.has_expression)},is:function(a){return!!a.match(b.is_expression)},get:function(a){var c=a.match(b.has_expression);return c&&c[1]||null},init:function(){var c="";for(var d in b.list)if(a.call(b.list,d)){var e="("+b.list[d]+")."+d;c+="|("+e+")"}b.has_expression=new RegExp("\\.("+c.substr(1)+")$","i"),b.is_expression=new RegExp("^("+c.substr(1)+")$","i")}};return b.init(),b}),function(a,b){"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define("URI",["SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains)}(this,function(a){"use strict";function b(a,c){return this instanceof b?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==c?this.absoluteTo(c):this):new b(a,c)}function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function d(a){return String(Object.prototype.toString.call(a)).slice(8,-1)}function e(a){return"Array"===d(a)}function f(a,b){var c,d,f={};if(e(b))for(c=0,d=b.length;d>c;c++)f[b[c]]=!0;else f[b]=!0;for(c=0,d=a.length;d>c;c++)void 0!==f[a[c]]&&(a.splice(c,1),d--,c--);return a}function g(a,b){var c,f;if(e(b)){for(c=0,f=b.length;f>c;c++)if(!g(a,b[c]))return!1;return!0}var h=d(b);for(c=0,f=a.length;f>c;c++)if("RegExp"===h){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function h(a,b){if(!e(a)||!e(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}function i(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var j=b.prototype,k=Object.prototype.hasOwnProperty;b._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:b.duplicateQueryParameters}},b.duplicateQueryParameters=!1,b.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,b.idn_expression=/[^a-z0-9\.-]/i,b.punycode_expression=/(xn--)/i,b.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,b.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,b.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},b.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,b.encode=i,b.decode=decodeURIComponent,b.iso8859=function(){b.encode=escape,b.decode=unescape},b.unicode=function(){b.encode=i,b.decode=decodeURIComponent},b.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},b.encodeQuery=function(a){return b.encode(a+"").replace(/%20/g,"+")},b.decodeQuery=function(a){return b.decode((a+"").replace(/\+/g,"%20"))},b.recodePath=function(a){for(var c=(a+"").split("/"),d=0,e=c.length;e>d;d++)c[d]=b.encodePathSegment(b.decode(c[d]));return c.join("/")},b.decodePath=function(a){for(var c=(a+"").split("/"),d=0,e=c.length;e>d;d++)c[d]=b.decodePathSegment(c[d]);
return c.join("/")};var l,m={encode:"encode",decode:"decode"},n=function(a,c){return function(d){return b[c](d+"").replace(b.characters[a][c].expression,function(d){return b.characters[a][c].map[d]})}};for(l in m)b[l+"PathSegment"]=n("pathname",m[l]);b.encodeReserved=n("reserved","encode"),b.parse=function(a,c){var d;return c||(c={}),d=a.indexOf("#"),d>-1&&(c.fragment=a.substring(d+1)||null,a=a.substring(0,d)),d=a.indexOf("?"),d>-1&&(c.query=a.substring(d+1)||null,a=a.substring(0,d)),"//"===a.substring(0,2)?(c.protocol="",a=a.substring(2),a=b.parseAuthority(a,c)):(d=a.indexOf(":"),d>-1&&(c.protocol=a.substring(0,d),c.protocol&&!c.protocol.match(b.protocol_expression)?c.protocol=void 0:"file"===c.protocol?a=a.substring(d+3):"//"===a.substring(d+1,d+3)?(a=a.substring(d+3),a=b.parseAuthority(a,c)):(a=a.substring(d+1),c.urn=!0))),c.path=a,c},b.parseHost=function(a,b){var c,d,e=a.indexOf("/");return-1===e&&(e=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},b.parseAuthority=function(a,c){return a=b.parseUserinfo(a,c),b.parseHost(a,c)},b.parseUserinfo=function(a,c){var d,e=a.indexOf("@"),f=a.indexOf("/");return e>-1&&(-1===f||f>e)?(d=a.substring(0,e).split(":"),c.username=d[0]?b.decode(d[0]):null,d.shift(),c.password=d[0]?b.decode(d.join(":")):null,a=a.substring(e+1)):(c.username=null,c.password=null),a},b.parseQuery=function(a){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,e,f={},g=a.split("&"),h=g.length,i=0;h>i;i++)c=g[i].split("="),d=b.decodeQuery(c.shift()),e=c.length?b.decodeQuery(c.join("=")):null,f[d]?("string"==typeof f[d]&&(f[d]=[f[d]]),f[d].push(e)):f[d]=e;return f},b.build=function(a){var c="";return a.protocol&&(c+=a.protocol+":"),a.urn||!c&&!a.hostname||(c+="//"),c+=b.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(c+="/"),c+=a.path),"string"==typeof a.query&&a.query&&(c+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(c+="#"+a.fragment),c},b.buildHost=function(a){var c="";return a.hostname?(b.ip6_expression.test(a.hostname)?c+=a.port?"["+a.hostname+"]:"+a.port:a.hostname:(c+=a.hostname,a.port&&(c+=":"+a.port)),c):""},b.buildAuthority=function(a){return b.buildUserinfo(a)+b.buildHost(a)},b.buildUserinfo=function(a){var c="";return a.username&&(c+=b.encode(a.username),a.password&&(c+=":"+b.encode(a.password)),c+="@"),c},b.buildQuery=function(a,c){var d,f,g,h,i="";for(f in a)if(k.call(a,f)&&f)if(e(a[f]))for(d={},g=0,h=a[f].length;h>g;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(i+="&"+b.buildQueryParameter(f,a[f][g]),c!==!0&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(i+="&"+b.buildQueryParameter(f,a[f]));return i.substring(1)},b.buildQueryParameter=function(a,c){return b.encodeQuery(a)+(null!==c?"="+b.encodeQuery(c):"")},b.addQuery=function(a,c,d){if("object"==typeof c)for(var f in c)k.call(c,f)&&b.addQuery(a,f,c[f]);else{if("string"!=typeof c)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[c])return void(a[c]=d);"string"==typeof a[c]&&(a[c]=[a[c]]),e(d)||(d=[d]),a[c]=a[c].concat(d)}},b.removeQuery=function(a,c,d){var g,h,i;if(e(c))for(g=0,h=c.length;h>g;g++)a[c[g]]=void 0;else if("object"==typeof c)for(i in c)k.call(c,i)&&b.removeQuery(a,i,c[i]);else{if("string"!=typeof c)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==d?a[c]===d?a[c]=void 0:e(a[c])&&(a[c]=f(a[c],d)):a[c]=void 0}},b.hasQuery=function(a,c,f,i){if("object"==typeof c){for(var j in c)if(k.call(c,j)&&!b.hasQuery(a,j,c[j]))return!1;return!0}if("string"!=typeof c)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(d(f)){case"Undefined":return c in a;case"Boolean":var l=Boolean(e(a[c])?a[c].length:a[c]);return f===l;case"Function":return!!f(a[c],c,a);case"Array":if(!e(a[c]))return!1;var m=i?g:h;return m(a[c],f);case"RegExp":return e(a[c])?i?g(a[c],f):!1:Boolean(a[c]&&a[c].match(f));case"Number":f=String(f);case"String":return e(a[c])?i?g(a[c],f):!1:a[c]===f;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},b.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"!==a.charAt(c)&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},b.withinString=function(a,c){return a.replace(b.find_uri_expression,c)},b.ensureValidHostname=function(a){if(a.match(b.invalid_hostname_characters)){if(!punycode)throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(punycode.toASCII(a).match(b.invalid_hostname_characters))throw new TypeError("Hostname '"+a+"' contains characters other than [A-Z0-9.-]")}},j.build=function(a){return a===!0?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=b.build(this._parts),this._deferred_build=!1),this},j.clone=function(){return new b(this)},j.valueOf=j.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},n=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b,this.build(!c),this)}};for(l in m)j[l]=n(m[l]);m={query:"?",fragment:"#"},n=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(l in m)j[l]=n(l,m[l]);m={search:["?","query"],hash:["#","fragment"]},n=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(l in m)j[l]=n(m[l][1],m[l][0]);j.pathname=function(a,c){if(void 0===a||a===!0){var d=this._parts.path||(this._parts.urn?"":"/");return a?b.decodePath(d):d}return this._parts.path=a?b.recodePath(a):"/",this.build(!c),this},j.path=j.pathname,j.href=function(a,c){var d;if(void 0===a)return this.toString();this._string="",this._parts=b._parts();var e=a instanceof b,f="object"==typeof a&&(a.hostname||a.path);if(!e&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=b.parse(a,this._parts);else{if(!e&&!f)throw new TypeError("invalid input");var g=e?a._parts:a;for(d in g)k.call(this._parts,d)&&(this._parts[d]=g[d])}return this.build(!c),this},j.is=function(c){var d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,e=b.ip4_expression.test(this._parts.hostname),f=b.ip6_expression.test(this._parts.hostname),d=e||f,g=!d,h=g&&a&&a.has(this._parts.hostname),i=g&&b.idn_expression.test(this._parts.hostname),j=g&&b.punycode_expression.test(this._parts.hostname)),c.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return d;case"ip4":case"ipv4":case"inet4":return e;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var o=j.protocol,p=j.port,q=j.hostname;j.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");return o.call(this,a,b)},j.scheme=j.protocol,j.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return p.call(this,a,b)},j.hostname=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var d={};b.parseHost(a,d),a=d.hostname}return q.call(this,a,c)},j.host=function(a,c){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?b.buildHost(this._parts):"":(b.parseHost(a,this._parts),this.build(!c),this)},j.authority=function(a,c){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?b.buildAuthority(this._parts):"":(b.parseAuthority(a,this._parts),this.build(!c),this)},j.userinfo=function(a,c){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var d=b.buildUserinfo(this._parts);return d.substring(0,d.length-1)}return"@"!==a[a.length-1]&&(a+="@"),b.parseUserinfo(a,this._parts),this.build(!c),this},j.resource=function(a,c){var d;return void 0===a?this.path()+this.search()+this.hash():(d=b.parse(a),this._parts.path=d.path,this._parts.query=d.query,this._parts.fragment=d.fragment,this.build(!c),this)},j.subdomain=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||""}var f=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,f),h=new RegExp("^"+c(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&b.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!d),this},j.domain=function(a,d){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(d=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.match(/\./g);if(e&&e.length<2)return this._parts.hostname;var f=this._parts.hostname.length-this.tld(d).length-1;return f=this._parts.hostname.lastIndexOf(".",f-1)+1,this._parts.hostname.substring(f)||""}if(!a)throw new TypeError("cannot set domain empty");if(b.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!d),this},j.tld=function(b,d){if(this._parts.urn)return void 0===b?"":this;if("boolean"==typeof b&&(d=b,b=void 0),void 0===b){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.lastIndexOf("."),f=this._parts.hostname.substring(e+1);return d!==!0&&a&&a.list[f.toLowerCase()]?a.get(this._parts.hostname)||f:f}var g;if(!b)throw new TypeError("cannot set TLD empty");if(b.match(/[^a-zA-Z0-9-]/)){if(!a||!a.is(b))throw new TypeError("TLD '"+b+"' contains characters other than [A-Z0-9]");g=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,b)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,b)}return this.build(!d),this},j.directory=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var e=this._parts.path.length-this.filename().length-1,f=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return a?b.decodePath(f):f}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+c(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=b.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!d),this},j.filename=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var e=this._parts.path.lastIndexOf("/"),f=this._parts.path.substring(e+1);return a?b.decodePathSegment(f):f}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(c(this.filename())+"$");return a=b.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(d):this.build(!d),this},j.suffix=function(a,d){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var e,f,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(e=g.substring(h+1),f=/^[a-z0-9%]+$/i.test(e)?e:"",a?b.decodePathSegment(f):f)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=a?new RegExp(c(j)+"$"):new RegExp(c("."+j)+"$");else{if(!a)return this;this._parts.path+="."+b.recodePath(a)}return i&&(a=b.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!d),this},j.segment=function(a,b,c){var d=this._parts.urn?":":"/",f=this.path(),g="/"===f.substring(0,1),h=f.split(d);if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error("Bad segment '"+a+"', must be 0-based integer");return g&&h.shift(),0>a&&(a=Math.max(h.length+a,0)),void 0===b?void 0===a?h:h[a]:(null===a||void 0===h[a]?e(b)?h=b:(b||"string"==typeof b&&b.length)&&(""===h[h.length-1]?h[h.length-1]=b:h.push(b)):b||"string"==typeof b&&b.length?h[a]=b:h.splice(a,1),g&&h.unshift(""),this.path(h.join(d),c))};var r=j.query;return j.query=function(a,c){if(a===!0)return b.parseQuery(this._parts.query);if("function"==typeof a){var d=b.parseQuery(this._parts.query),e=a.call(this,d);return this._parts.query=b.buildQuery(e||d,this._parts.duplicateQueryParameters),this.build(!c),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=b.buildQuery(a,this._parts.duplicateQueryParameters),this.build(!c),this):r.call(this,a,c)},j.setQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);if("object"==typeof a)for(var f in a)k.call(a,f)&&(e[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");e[a]=void 0!==c?c:null}return this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.addQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.addQuery(e,a,void 0===c?null:c),this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.removeQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.removeQuery(e,a,c),this._parts.query=b.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof a&&(d=c),this.build(!d),this},j.hasQuery=function(a,c,d){var e=b.parseQuery(this._parts.query);return b.hasQuery(e,a,c,d)},j.setSearch=j.setQuery,j.addSearch=j.addQuery,j.removeSearch=j.removeQuery,j.hasSearch=j.hasQuery,j.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},j.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},j.normalizeHostname=function(a){return this._parts.hostname&&(this.is("IDN")&&punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a)),this},j.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===b.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},j.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var c,d,e,f,g=this._parts.path;for("/"!==g.charAt(0)&&("."===g.charAt(0)&&(d=g.substring(0,g.indexOf("/"))),c=!0,g="/"+g),g=g.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){if(e=g.indexOf("/../"),-1===e)break;if(0===e){g=g.substring(3);break}f=g.substring(0,e).lastIndexOf("/"),-1===f&&(f=e),g=g.substring(0,f)+g.substring(e+3)}return c&&this.is("relative")&&(g=d?d+g:g.substring(1)),g=b.recodePath(g),this._parts.path=g,this.build(!a),this},j.normalizePathname=j.normalizePath,j.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(b.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a)),this},j.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},j.normalizeSearch=j.normalizeQuery,j.normalizeHash=j.normalizeFragment,j.iso8859=function(){var a=b.encode,c=b.decode;return b.encode=escape,b.decode=decodeURIComponent,this.normalize(),b.encode=a,b.decode=c,this},j.unicode=function(){var a=b.encode,c=b.decode;return b.encode=i,b.decode=unescape,this.normalize(),b.encode=a,b.decode=c,this},j.readable=function(){var a=this.clone();a.username("").password("").normalize();var c="";if(a._parts.protocol&&(c+=a._parts.protocol+"://"),a._parts.hostname&&(a.is("punycode")&&punycode?(c+=punycode.toUnicode(a._parts.hostname),a._parts.port&&(c+=":"+a._parts.port)):c+=a.host()),a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(c+="/"),c+=a.path(!0),a._parts.query){for(var d="",e=0,f=a._parts.query.split("&"),g=f.length;g>e;e++){var h=(f[e]||"").split("=");d+="&"+b.decodeQuery(h[0]).replace(/&/g,"%26"),void 0!==h[1]&&(d+="="+b.decodeQuery(h[1]).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=a.hash()},j.absoluteTo=function(a){var c,d,e,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return f;for(a instanceof b||(a=new b(a)),d=0,e;e=g[d];d++)f._parts[e]=a._parts[e];for(g=["query","path"],d=0,e;e=g[d];d++)!f._parts[e]&&a._parts[e]&&(f._parts[e]=a._parts[e]);return"/"!==f.path().charAt(0)&&(c=a.directory(),f._parts.path=(c?c+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},j.relativeTo=function(a){var d,e,f,g,h,i=this.clone(),j=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(a instanceof b||(a=new b(a)),"/"!==this.path().charAt(0)||"/"!==a.path().charAt(0))throw new Error("Cannot calculate common path from non-relative URLs");if(d=b.commonPath(i.path(),a.path()),!d||"/"===d)return i;for(var k,l=0;k=j[l];l++)i._parts[k]=null;if(e=a.directory(),f=this.directory(),e===f)return i._parts.path="./"+i.filename(),i.build();if(g=e.substring(d.length),h=f.substring(d.length),e+"/"===d)return h&&(h+="/"),i._parts.path="./"+h+i.filename(),i.build();for(var m="../",n=new RegExp("^"+c(d)),o=e.replace(n,"/").match(/\//g).length-1;o--;)m+="../";return i._parts.path=i._parts.path.replace(n,m),i.build()},j.equals=function(a){var c,d,f,g=this.clone(),i=new b(a),j={},l={},m={};if(g.normalize(),i.normalize(),g.toString()===i.toString())return!0;if(c=g.query(),d=i.query(),g.query(""),i.query(""),g.toString()!==i.toString())return!1;if(c.length!==d.length)return!1;j=b.parseQuery(c),l=b.parseQuery(d);for(f in j)if(k.call(j,f)){if(e(j[f])){if(!h(j[f],l[f]))return!1}else if(j[f]!==l[f])return!1;m[f]=!0}for(f in l)if(k.call(l,f)&&!m[f])return!1;return!0},j.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},b}),define("cb/lib/dom/Node",[],function(){"use strict";return{ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10}}),function(a){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],a):a(jQuery)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):String(g),document.cookie=[f.raw?e:encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;o>n;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)?(a.cookie(b,"",a.extend({},c,{expires:-1})),!0):!1}}),define("util",["jquery","underscore","cb/constants","URI","cb/lib/dom/Node","cb/lib/contexts","jquery.cookie"],function(a,b,c,d,e,f){"use strict";function g(){return L}function h(a){function b(){}return b.prototype=a,new b}function i(a){var b=new d(document.location.href);return d.parseQuery(a?b.fragment():b.query())}function j(a){return i()[a]}function k(a){return i(!0)[a]}function l(a,c,d){return b.each(d,function(d){a[d]=b.bind(c[d],c)}),a}function m(a,c,d){d=d||G,function e(){var f;try{f=a()}catch(g){}f?c(f):b.delay(e,d)}()}function n(a){var b=new d(a);return b.filename(""),b.href()}function o(){var a=document.querySelector("base");return a&&a.hasAttribute("href")?a.href:n(p())}function p(){return document.location.href}function q(a){return H.test(a)}function r(a){return a.replace(I,"")}function s(a,b,c){for(var d,e=a.length;e--;)d=a[e],c(d,e,a)||d.childNodes&&d.childNodes.length&&b(d.childNodes)}function t(a){var b="<br/>";return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+b+"$2")}function u(){return a("["+J+"]")}function v(a,b){var c;if(a.nodeType===e.ELEMENT_NODE&&(a.setAttribute(J,K),!b&&a.childNodes.length))for(c=a.firstChild;c;c=c.nextSibling)v(c)}function w(a){a.removeAttribute(J)}function x(a){if(!a.nodeType)throw new Error("Invalid argument type. Expected DOM Node.");return a.nodeType===e.ELEMENT_NODE?a.getAttribute(J)===K:a.parentNode&&x(a.parentNode)}function y(a){for(;a.parentNode;){if(a.getAttribute&&a.getAttribute(J)===K)return a;a=a.parentNode}return null}function z(b,c,d){return a.cookie(b,c,a.extend({},d,M))}function A(b){return a.removeCookie(b,M)}function B(c,d,e){var f=a.Deferred(),g=a.ajax(a.extend({dataType:"jsonp",cache:!0,url:c},e));return g.done(function(a){b.extend(d,a),f.resolve(a)}),g.fail(function(){f.resolve({})}),f.promise()}function C(a,b){return a.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}function D(a){return N.test(a)&&"on"!==a.toLowerCase().slice(0,2)}function E(){return((new Date).getTime()+Math.random()+"").substr(-9)}function F(a){a=a||document,a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1)}var G=50,H=/[\w-]+\.[\w-]+\.\w+/,I=/[^.]*./,J=c.SERVICE_NODE_ATTR,K="true",L=function(){var a=new d(document.location.href);return a.domain()!==a.tld()?a.domain():void 0}(),M={path:"/",domain:L},N=/^[:A-Za-z_][:A-Za-z_.-]*$/;return{log:a.noop,derive:h,getUrlVars:i,getUrlVar:j,getHashVar:k,proxyMethods:l,injectAsync:m,isSubdomain:q,raiseDomainLevel:r,walkNodes:s,isSameWindow:f.isSameWindow,markServiceNode:v,unmarkServiceNode:w,getServiceNodes:u,isServiceNode:x,getServiceParent:y,setRootDomainCookie:z,removeRootDomainCookie:A,nl2br:t,fetchLocalization:B,supplant:C,getCookieDomain:g,getPageBaseUrl:o,getPageUrl:p,isValidAttribute:D,getRandomString:E,blockContextMenu:F}}),define("cb/app/master/masterApi",[],function(){"use strict";function a(a){return{VERSION:"8.5.003.13",startSession:a.startSession,downgradeMode:a.downgradeMode,exitSession:a.exitSession,isBrowserSupported:a.isBrowserSupported,markServiceElement:a.markServiceElement,onInitialized:a.on.ready,onAgentJoined:a.on.agentJoined,onAgentNavigated:a.on.navigationInitiated,onModeChanged:a.on.modeChanged,onModeUpgradeRequested:a.on.modeUpgradeRequested,onNavigationFailed:a.on.navigationFailed,onMaskedElement:a.on.elementMasked,onSessionStarted:a.on.sessionStarted,onSessionEnded:a.on.disconnected}}function b(a){return{VERSION:"8.5.003.13",markServiceElement:a.markServiceElement,onMaskedElement:a.on.elementMasked}}return{CobrowseApi:a,ChildCobrowseApi:b}}),define("support",["jquery","underscore","util"],function(a,b,c){"use strict";var d,e,f,g,h,i,j;d=!0,e=document.createTextNode("");try{e.customProp=1}catch(k){c.log("Custom properties on text nodes are not supported ",k),d=!1}e=null,j=!!document.addEventListener,f=!0;try{Object.defineProperty(document.createElement("div"),"style",{configurable:!0})}catch(k){c.log("Node accessors are not configurable: ",k),f=!1}return g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,h=document.styleSheets[0]&&b.isObject(document.styleSheets[0].media),i=function(){try{for(var b,d="i"+(new Date).getTime(),e=a('<div id="'+d+'"></div>'),f=a('<style type="text/css"></style>'),g=4095,h="";g--;)h+="#"+d+"{ color: rgb(255, 255, 255) }\n";return h+="#"+d+" { color: rgb(0, 0, 0) !important }\n",f.html(h).appendTo("head"),e.appendTo("body"),b="rgb(0, 0, 0)"===a(e).css("color"),f.remove(),e.remove(),b}catch(i){return c.log("Failed to check long stylesheets support: ",i),!1}}(),{textNodeCustomProps:d,w3cEvents:j,configurableNodeProperties:f,mutationObservers:!b.isUndefined(g),dom2Stylesheets:h,longStylesheets:i}}),define("cb/environment",["jquery","util","cb/lib/contexts","cb/constants","URI"],function(a,b,c,d,e){"use strict";function f(){var a;if(n)return b.log("returning cached slave top context"),n;for(a=window;!/slave.html$/.test(a.location.pathname);){if(b.log("current window is not top, going up; pathname: ",a.location.pathname),p(window.top,a))throw new Error("slave.html window is not found");a.Date(),a=a.parent}return b.log("got top window: ",a),n=a}function g(){var a=f();return a.location.href.match(/.*\/cobrowse/)[0]}function h(){return p(f(),window)}function i(a,b){var d=a===r?f:c.getTopContext;return function(){return d()[b]}}function j(a,b){var d=a===r?f:c.getTopContext;return function(a){d()[b]=a}}function k(c,d){var e=a(c),f=e.attr(s);return f?b.log("IFRAME IS ALREADY INDEXED WITH ID ",f):(f=d(),e.attr(s,f)),Number(f)}function l(){var a=Number(window.frameElement.getAttribute(s));if(b.log("CONTEXT ID IS SET TO: ",a),!a)throw new Error("Unknown context id");return a}function m(){var a=new e(document.location.href).domain();return a?(document.domain=a,void b.log("DOCUMENT DOMAIN SET TO: ",a)):void b.log("NOT SETTING DOCUMENT DOMAIN, WE'RE NOT IN VALID DOMAIN")}var n,o,p=b.isSameWindow,q=d.userRoles.MASTER,r=d.userRoles.SLAVE,s=d.IFRAME_INDEX_PROP,t=d.MASTER_GLOBAL_NAME,u=d.SLAVE_GLOBAL_NAME;return o=function(){var b=a("script[data-gcb-url]").attr("data-gcb-url");return b=new e(b),b.is("absolute")||(b=b.absoluteTo(document.location.href)),b=b.toString().replace(/\/$/,""),function(){return b}}(),{setDocumentDomain:m,master:{getTopContext:c.getTopContext,isTopmostContext:c.isTopContext,getBaseUrl:o,provideTopmostApi:i(q,t),registerTopmostApi:j(q,t),indexIframeIfNotYet:k},slave:{getBaseUrl:g,getTopContext:f,isVirtualMonitorContext:h,provideTopmostApi:i(r,u),registerTopmostApi:j(r,u),extractContextId:l}}}),function(a){function b(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function c(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function d(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){d.prototype.dispatch.apply(a,arguments)}}b.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},d.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,c,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==c)throw new Error("You cannot add"+(c?"":"Once")+"() then add"+(c?"Once":"")+"() the same listener without removing the relationship first.")}else f=new b(this,a,c,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){return c(a,"add"),this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){return c(a,"addOnce"),this._registerListener(a,!0,b,d)},remove:function(a,b){c(a,"remove");var d=this._indexOfListener(a,b);return-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b,c=Array.prototype.slice.call(arguments),d=this._bindings.length;if(this.memorize&&(this._prevParams=c),d){b=this._bindings.slice(),this._shouldPropagate=!0;do d--;while(b[d]&&this._shouldPropagate&&b[d].execute(c)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var e=d;e.Signal=d,"function"==typeof define&&define.amd?define("signals",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:a.signals=e}(this),define("cb/transport/clients/contextClient",["underscore","../../constants"],function(a,b){"use strict";function c(b,c){function e(a,d,e){d.contextId=c,b.publish(a,d,e)}function f(){return c}function g(a){return d.SERVICE_CONTEXT+"/"+c+a}var h=this;a.extend(h,{publish:e,createContextChannel:g,getContextId:f,addListeners:b.addListeners})}var d=b.channels;return c}),define("cb/transport/clients/masterDomClient",["jquery","underscore","signals","util","cb/constants"],function(a,b,c,d,e){"use strict";function f(a){function e(a){d.log("TOPMOST CLIENT GOT MESSAGE FROM AGENT: ",a),j.slaveContextReady.dispatch([a.data.userId])}function f(b){a.publish(g.CONTEXT_DOM,b,function(a){a.successful||j.messageFailure.dispatch()})}var h=this,i="/service/context/"+a.getContextId()+"/ready",j={slaveContextReady:new c,messageFailure:new c},k={};k[i]=e,a.addListeners(k),b.extend(h,{on:j,publishDOM:f})}var g=e.channels;return f}),define("cb/transport/clients/scrollClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(b){function d(a){i.scrollReceived.dispatch(a.data)}function e(a){b.publish(f.CONTEXT_SCROLL,a)}var g=this,h=b.createContextChannel("/scroll"),i={scrollReceived:new c},j={};j[h]=d,b.addListeners(j),a.extend(g,{on:i,publishScroll:e})}var f=d.channels;return e}),define("cb/transport/clients/mouseClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){m.mouseMoveReceived.dispatch(a.data)}function g(a){b.log("GOT MOUSE CLICK, ",a.data),m.mouseClickReceived.dispatch(a.data)}function h(a){d.publish(f.CONTEXT_MOUSE_MOVE,a)}function i(a){b.log("PUBLISH MOUSE CLICK, ",a),d.publish(f.CONTEXT_MOUSE_CLICK,a)}var j=this,k=d.createContextChannel("/mouse/move"),l=d.createContextChannel("/mouse/click"),m={mouseMoveReceived:new c,mouseClickReceived:new c},n={};n[k]=e,n[l]=g,d.addListeners(n),a.extend(j,{on:m,publishMouseMove:h,publishMouseClick:i
})}var f=d.channels;return e}),define("cb/transport/clients/inputClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){d.publish(f.CONTEXT_INPUT,a),b.log("PUBLISHED INPUT VALUE: ",a)}function g(a){b.log("RECEIVED INPUT VALUE:",a),j.valuesReceived.dispatch(a.data)}var h=this,i=d.createContextChannel("/input"),j={valuesReceived:new c},k={};k[i]=g,d.addListeners(k),a.extend(h,{on:j,publishValues:e})}var f=d.channels;return e}),define("cb/transport/clients/windowDialogClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){b.log("GOT WINDOW DIALOG START, ",a.data),m.dialogStartReceived.dispatch(a.data)}function g(a){b.log("GOT WINDOW DIALOG END, ",a.data),m.dialogEndReceived.dispatch(a.data)}function h(a){b.log("PUBLISH DIALOG START, ",a),d.publish(f.WINDOW_DIALOG_START,a)}function i(a){b.log("PUBLISH DIALOG END, ",a),d.publish(f.WINDOW_DIALOG_END,a)}var j=this,k="/service/context/"+d.getContextId()+"/window/dialog/start",l="/service/context/"+d.getContextId()+"/window/dialog/end",m={dialogStartReceived:new c,dialogEndReceived:new c},n={};n[k]=e,n[l]=g,d.addListeners(n),a.extend(j,{on:m,publishDialogStart:h,publishDialogEnd:i})}var f=d.channels;return e}),define("cb/transport/clients/coreCssClient",["underscore","signals"],function(a,b){"use strict";function c(c){function d(a){var b=a.data||{};g.gotProcessedCss.dispatch(b)}var e=this,f=c.createContextChannel("/css"),g={gotProcessedCss:new b},h={};h[f]=d,c.addListeners(h),a.extend(e,{on:g})}return c}),define("cb/transport/clients/masterCssClient",["underscore","signals","cb/constants","./coreCssClient"],function(a,b,c,d){"use strict";function e(b){function e(a){b.publish(h,a)}function f(a){a.command="setCSS",b.publish(i,a)}var g=this,h=c.channels.CONTEXT_CSS,i=c.channels.CONTEXT_DOM,j=new d(b);a.extend(g,j,{publishServerCss:e,publishBrowserCss:f})}return e}),define("cb/services/scrollService",["jquery","underscore","util","cb/constants"],function(a,b,c,d){"use strict";function e(d,e,j,k){function l(){var a;d===h&&o()||(a=m(),x.targeted&&(a.targetUsersIds=k.users.pluck("userId")),c.log("PUBLISHING SCROLL ",a.top," ",a.left),e.publishScroll(a))}function m(){return{top:z.scrollTop(),left:z.scrollLeft()}}function n(b){t(),w&&window.clearTimeout(w),a("html,body").scrollTop(b.top).scrollLeft(b.left),w=window.setTimeout(s,g)}function o(){return A.pointer&&!i}function p(){o()&&(c.log((A.pointer?"DISABLING ":"ALLOWING ")+"SCROLLING"),a("html").attr("data-gcb-pointer-mode",A.pointer?"true":"false"))}function q(a){A=a,p()}function r(a){if(a&&(c.log("ACTIVATING SCROLL SERVICE"),x=a),x.publish&&s(),x.listen&&e.on.scrollReceived.add(n),x.targeted&&!k)throw new Error("Session is needed for targeting, but is not provided");d===h&&(p(),j.on.modeChanged.add(q))}function s(){z.on("scroll.gcb",v)}function t(){z.off("scroll.gcb")}function u(){t(),e.on.scrollReceived.remove(n),j.on.modeChanged.remove(q)}var v,w,x,y=this,z=a(window),A=j.currentMode();v=b.throttle(l,f),b.extend(y,{getCurrentScroll:m,applyScroll:n,activate:r,deactivate:u})}var f=70,g=70,h=d.userRoles.SLAVE,i=!0;return e}),define("cb/lib/dom/watcher",["jquery","underscore"],function(a,b){"use strict";function c(a){return a.nodeType===E?b.toArray(a.childNodes):[a]}function d(a){var b=a.parentNode;return null!=b?e(b,a):null}function e(a,b){var c=b.previousSibling,d=b.nextSibling;return F.createChildListRecord(a,[],[b],c,d)}function f(a){return b.isNumber(a.length)?a:[a]}function g(a,c,d){var e=G.call(arguments,3),f=c.length-1,g=function(){var h=e.concat(b.toArray(arguments));return f>=0?c[f--].apply(d,[g].concat(h)):b.isFunction(a)?a.apply(d,h):void 0};return g}function h(a,b,c){var d=function(){var e=g(b,d.wrappers,c||this,a);return e.apply(r,arguments)};return d.wrappers=[],d}function i(a,c){return b.isUndefined(c)?this[a]:void(this[a]=c)}function j(a,b,c){var d,e=Object.getOwnPropertyDescriptor(this,b);return e&&delete this[b],d=a(c),e&&Object.defineProperty(this,b,e),d}function k(a,c){b.isFunction(c.set)&&m(a,c.set),b.isFunction(c.get)&&n(a,c.get)}function l(a,c,d,e){var f=Object.getOwnPropertyDescriptor(a,c);if(!f||!b.isFunction(f.set)||!b.isArray(f.set.wrappers)){var g=b.bind(h,r,c,d,e);f={set:g(),get:g(),configurable:!0,enumerable:!1},Object.defineProperty(a,c,f)}return f}function m(a,b){a.set.wrappers.push(b)}function n(a,b){a.get.wrappers.push(b)}function o(a){return a.nodeType===C&&"object"===a.tagName.toLowerCase()&&"application/x-shockwave-flash"===a.type}function p(a){var c=G.call(arguments,1),d=function(a){for(var e=0;e<c.length;)c[e++](a);b.each(a.childNodes,d)};b.each(f(a),d)}function q(f,g){function h(a){var b,c=function(){return b||(b=T(a)),b};return c.isProxy=!0,c}function i(a){if(!o(a)){var b=a.nodeType;(b===C||b===D||b===E)&&(a.appendChild=q,a.insertBefore=r,a.removeChild=y,a.replaceChild=G),a.nodeType===C&&(a.setAttribute=M,a.setAttributeNS=N,!a.nodeName||"TABLE"!==a.nodeName&&"TBODY"!==a.nodeName||(a.insertRow=K),P(a,"class"),R(a),S(a))}}function n(a){p(a,i)}function q(a){return L.call(this,a,null,v)}function r(a,b){return L.call(this,a,b,u)}function y(a){var b=e(this,a),c=x.call(this,a);return g(b),c}function G(a,b){var e=b.nextSibling;e===a&&(e=a.nextSibling);var f=d(a),h=b.previousSibling,i=c(a),j=F.createChildListRecord(this,i,[b],h,e),k=w.call(this,a,b);return n(i),f&&g(f),g(j),k}function K(a){var c=this,d=F.createChildListRecord(c,null,[],null,null),e=b.toArray(c.childNodes),f=B.call(c,a),h=b.difference(b.toArray(c.childNodes),e);return h.push(f),n(h),d.addedNodes=h,g(d),f}function L(a,b,e){var f=d(a),h=b?b.previousSibling:this.lastChild,i=c(a),j=F.createChildListRecord(this,i,[],h,b),k=e.call(this,a,b);return n(i),f&&g(f),g(j),k}function M(a,b){var c=this.getAttribute(a),d=F.createAttributeRecord(this,a,null,c);z.call(this,a,b),g(d)}function N(a,b,c){var d=this.getAttributeNS(a,b),e=F.createAttributeRecord(this,b,a,d);A.call(this,a,b,c),g(e)}function O(a){return function(b,c,d){var e=this.getAttribute(a),f=F.createAttributeRecord(this,a,null,e);b(d),g(f)}}function P(b,c){var d=a.propFix[c]||c;H(b,d,{set:O(c)})}function Q(a){var b=Object.getOwnPropertyDescriptor(a,"style");return b&&b.get&&b.get.isProxy?!0:!1}function R(a){Q(a)||Object.defineProperty(a,"style",{get:h(a),configurable:!0,enumerable:!1})}function S(a){H(a,"innerHTML",{set:function(c,d,e){var f=b.clone(a.childNodes),h=F.createChildListRecord(a,[],f,null,null);c(e);var i=b.clone(a.childNodes);n(i),h.addedNodes=i,g(h)}})}var T=function(){var a=function(a,c){return b.isUndefined(c)?this.style[a]:void(this.style[a]=c)},c=function(a,b,c){return j.call(this,a,"style",c)},d={get:c,set:c};return function(b){for(var c,e=s?t.createElement("stylePropProxy"):{},f=0;J>f;f++)c=l(e,I[f],a,b),k(c,d),m(c,U);return e}}(),U=O("style");this.disconnect=function(){},p(f,i)}var r=window,s=Boolean(a.browser.msie)&&8===parseInt(a.browser.version,10),t=r.document,u=t.insertBefore,v=t.appendChild,w=t.replaceChild,x=t.removeChild,y=t.createElement("table"),z=y.setAttribute,A=y.setAttributeNS,B=y.insertRow,C=1,D=9,E=11,F={createChildListRecord:function(a,b,c,d,e){return{type:"childList",target:a,addedNodes:b,removedNodes:c,previousSibling:d,nextSibling:e,attributeName:null,attributeNamespace:null,oldValue:null}},createAttributeRecord:function(a,b,c,d){return{type:"attributes",target:a,attributeName:b,attributeNamespace:c,oldValue:d,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null}}},G=Array.prototype.slice,H=function(){var a={get:j,set:j};return function(c,d,e){var f=l(c,d,i);k(f,a),b.isObject(e)&&k(f,e)}}(),I=["animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","backfaceVisibility","background","backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","border","borderBottom","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderCollapse","borderColor","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRadius","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStyle","borderTop","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","borderWidth","bottom","boxShadow","captionSide","clear","clip","clipPath","clipRule","color","colorInterpolation","colorInterpolationFilters","content","counterIncrement","counterReset","cssFloat","cssText","cursor","direction","display","dominantBaseline","emptyCells","fill","fillOpacity","fillRule","filter","floodColor","floodOpacity","font","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","height","imageRendering","imeMode","left","letterSpacing","lightingColor","lineHeight","listStyle","listStyleImage","listStylePosition","listStyleType","margin","marginBottom","marginLeft","marginRight","marginTop","marker","markerEnd","markerMid","markerOffset","markerStart","marks","mask","maxHeight","maxWidth","minHeight","minWidth","opacity","orphans","outline","outlineColor","outlineOffset","outlineStyle","outlineWidth","overflow","overflowX","overflowY","padding","paddingBottom","paddingLeft","paddingRight","paddingTop","page","pageBreakAfter","pageBreakBefore","pageBreakInside","parentRule","perspective","perspectiveOrigin","pointerEvents","position","quotes","resize","right","shapeRendering","size","stopColor","stopOpacity","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","tableLayout","textAlign","textAnchor","textDecoration","textIndent","textOverflow","textRendering","textShadow","textTransform","top","transform","transformOrigin","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","vectorEffect","verticalAlign","visibility","whiteSpace","widows","width","wordBreak","wordSpacing","wordWrap","zIndex","zoom"],J=I.length;return q}),define("cb/lib/dom/mutationObserverPolyfill",["jquery","underscore","./watcher","util","support","./Node"],function(a,b,c,d,e,f){"use strict";function g(a,b){this.observer=a,this.options=b}function h(a){return this===a.observer}function i(b){return a(b).data(q)||[]}function j(a,b){r(a,b(i(a)))}function k(a,b){j(a,function(a){return a.push(b),a})}function l(a,c){j(a,function(a){var d=b.indexOf(a,c);return d>=0&&a.splice(d,1),a})}function m(a,b,c){k(a,new g(b,c))}function n(a,c){j(a,function(a){return b.reject(a,h,c)})}function o(a){function c(){e=b.defer(d)}function d(){a(),e&&c()}var e;this.scheduleIfAbsent=function(){e||c()},this.cancel=function(){e&&(clearTimeout(e),e=0)}}var p=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!b.isUndefined(p))return p;var q="_mutation_observers_",r=function(){function b(b,c){a(b).data(q,c)}return e.textNodeCustomProps?b:function(a,c){a.nodeType!==f.TEXT_NODE&&b(a,c)}}(),s=function(){function a(a){if(a.childList!==!0&&a.attributes!==!0&&a.characterData!==!0)throw new SyntaxError('At least one of "childList", "attributes" or "characterData" options must be true');if(a.attributeOldValue===!0&&a.attributes!==!0)throw new SyntaxError("attributeOldValue option is set while attributes option is NOT set");if(!b.isEmpty(a.attributeFilter)&&a.attributes!==!0)throw new SyntaxError("attributeFilter option is specified while attributes option is NOT set");if(a.characterDataOldValue===!0&&a.characterData!==!0)throw new SyntaxError("characterDataOldValue option is set while characterData option is NOT set")}function c(a){d.proxyMethods(this,a,["observe","disconnect","takeRecords"])}function e(d,e){var g,j=f++,k=[],l=[];this.getAPI=function(){return g},this.getCallback=function(){return e},this.getId=function(){return j},this.queueRecord=function(a){l.push(a)},this.replaceLastRecord=function(a){l[l.length-1]=a},this.observe=function(c,e){e=e||{},a(e);var f=b.find(i(c),h,this);f?f.options=e:(m(c,this,e),k.push(c)),d.registerObserver(this)},this.disconnect=function(){b.each(k,function(a){n(a,this)},this),k=[],l=[],d.unregisterObserver(this)},this.takeRecords=function(){var a=l;return l=[],a},g=new c(this)}var f=1;return e}(),t=function(){function a(a,b){g.call(this,b.observer,b.options),this.node=a}function d(){function c(a){b.each(a.transientROs,function(a){l(a.node,a)}),a.transientROs=[]}function d(){var a=f.slice(0),e=!1;b.each(a,function(a){var b=a.takeRecords(),d=a.getAPI();c(a),b.length>0&&(e=!0,a.getCallback().call(d,b,d))}),e&&d()}var f=[],g=new o(d);new e(this),this.registerObserver=function(a){b.indexOf(f,a)<0&&(a.transientROs=[],f.push(a)),g.scheduleIfAbsent()},this.unregisterObserver=function(a){var d=b.indexOf(f,a);d>=0&&(c(a),f.splice(d,1),0===f.length&&g.cancel())},this.registerAsTransientObserver=function(c,d){var e=b.indexOf(f,d.observer);if(e>=0){var g=new a(c,d);k(c,g),d.observer.transientROs.push(g)}}}var e=function(){function a(a){function e(c){var e=c.target;f(e,d(c),!1);var g=c.removedNodes;g.length&&b.each(g,function(b){f(e,function(c){a.registerAsTransientObserver(b,c)},!0)})}var g=new c(document,e);this.disconnect=function(){g&&(g.disconnect(),g=null)}}function d(a){var c,d={};switch(a.type){case"childList":return function(b){var c,f;b.options.childList===!0&&(c=b.observer,f=c.getId(),d[f]||(d[f]=!0,e(a,c)))};case"attributes":return c=b.clone(a),c.oldValue=null,function(f){var g,h,i,j,k=f.options,l=k.attributeFilter;k.attributes===!0&&(!l||b.contains(l,a.attributeName)&&null===a.attributeNamespace)&&(g=f.observer,h=g.getId(),i=d[h],j=k.attributeOldValue,i?j&&i.withoutOldValue&&(i.withoutOldValue=!1,f.observer.replaceLastRecord(a)):(d[h]={withoutOldValue:!j},e(j?a:c,g)))};default:return function(){}}}function e(a,b){b.queueRecord(a)}function f(a,b,c){function d(a){a.options.subtree===!0&&b(a)}var e;for(c?e=a:(g(a,b),e=a.parentNode);e;e=e.parentNode)g(e,d)}function g(a,c){b.each(i(a),c)}return a}();return d}(),u=function(){function a(a){return d=new t,e.createMutationObserver=c,c(a)}function c(a){return new s(d,a).getAPI()}var d,e={};return b.extend(e,{createMutationObserver:a})}();return function(a){return u.createMutationObserver(a)}}),define("cb/lib/dom/ieNodeMap",[],function(){"use strict";function a(){this.map={}}var b=Object.prototype.hasOwnProperty,c=1;return a.prototype={set:function(a,d){var e,f,g,h=this.map;for(f in h)if(b.call(h,f)&&(g=h[f].k,g===a)){e=f;break}e||(e=c++),h[e]={k:a,v:d}},get:function(a){var c,d,e=this.map;for(c in e)if(b.call(e,c)&&(d=e[c].k,d===a))return e[c].v},has:function(a){var c,d,e=this.map;for(c in e)if(b.call(e,c)&&(d=e[c].k,d===a))return!0;return!1},"delete":function(a){var c,d,e=this.map;for(c in e)b.call(e,c)&&(d=e[c].k,d===a&&delete e[c])},keys:function(){var a,c=this.map,d=[];for(a in c)b.call(c,a)&&d.push(c[a].k);return d}},a}),define("mutation_summary",["cb/lib/dom/mutationObserverPolyfill","underscore","support","cb/lib/dom/ieNodeMap"],function(a,b,c,d){"use strict";function e(a){return a[t]?!1:(a[t]=u++,!0)}function f(){this.map_={}}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function h(a,b,c){this.rootNode=a,this.elementFilter=b,this.calcReordered=c}function i(a){function c(){f&&(g&&(f.qualifiers.push(g),g=void 0),i.push(f)),f={qualifiers:[]}}function d(){g&&f.qualifiers.push(g),g={}}function e(a){return'"'+a.replace(/"/,'\\"')+'"'}for(var f,g,h,i=[],j=/\s/,k="Invalid or unsupported selector syntax.",l=1,m=2,n=3,o=4,p=5,q=6,r=7,s=8,t=9,u=10,v=11,w=12,x=13,y=14,z=l,A=0;A<a.length;){var D=a[A++];switch(z){case l:if(D.match(B)){c(),f.tagName=D,z=m;break}if("*"==D){c(),f.tagName="*",z=n;break}if("."==D){c(),d(),f.tagName="*",g["class"]=!0,z=o;break}if("#"==D){c(),d(),f.tagName="*",g.id=!0,z=o;break}if("["==D){c(),d(),f.tagName="*",g.attrName="",z=q;break}if(D.match(j))break;throw Error(k);case m:if(D.match(C)){f.tagName+=D;break}if("."==D){d(),g["class"]=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),g.attrName="",z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case n:if("."==D){d(),g["class"]=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),g.attrName="",z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case o:if(D.match(B)){g.attrValue=D,z=p;break}throw Error(k);case p:if(D.match(C)){g.attrValue+=D;break}if("."==D){d(),g["class"]=!0,z=o;break}if("#"==D){d(),g.id=!0,z=o;break}if("["==D){d(),z=q;break}if(D.match(j)){z=y;break}if(","==D){z=l;break}throw Error(k);case q:if(D.match(B)){g.attrName=D,z=r;break}if(D.match(j))break;throw Error(k);case r:if(D.match(C)){g.attrName+=D;break}if(D.match(j)){z=s;break}if("~"==D){g.contains=!0,z=t;break}if("="==D){g.attrValue="",z=v;break}if("]"==D){z=n;break}throw Error(k);case s:if("~"==D){g.contains=!0,z=t;break}if("="==D){g.attrValue="",z=v;break}if("]"==D){z=n;break}if(D.match(j))break;throw Error(k);case t:if("="==D){g.attrValue="",z=v;break}throw Error(k);case u:if("]"==D){z=n;break}if(D.match(j))break;throw Error(k);case v:if(D.match(j))break;if('"'==D||"'"==D){h=D,z=x;break}g.attrValue+=D,z=w;break;case w:if(D.match(j)){z=u;break}if("]"==D){z=n;break}if("'"==D||'"'==D)throw Error(k);g.attrValue+=D;break;case x:if(D==h){z=u;break}g.attrValue+=D;break;case y:if(D.match(j))break;if(","==D){z=l;break}throw Error(k)}}switch(z){case l:case m:case n:case p:case y:c();break;default:throw Error(k)}if(!i.length)throw Error(k);return b.each(i,function(a){var c=a.tagName.toUpperCase();a.tagName!=c&&(a.caseInsensitiveTagName=c);var d=a.tagName;b.each(a.qualifiers,function(a){if(a["class"])d+="."+a.attrValue;else if(a.id)d+="#"+a.attrValue;else{var b=a.attrName.toLowerCase();a.attrName!=b&&(a.caseInsensitiveAttrName=b),a.contains?d+="["+a.attrName+"~="+e(a.attrValue)+"]":(d+="["+a.attrName,a.hasOwnProperty("attrValue")&&(d+="="+e(a.attrValue)),d+="]")}}),a.selectorString=d}),i}function j(a){if("string"!=typeof a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(a=a.trim(),!a)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!a.match(D))throw Error("Invalid request option. invalid attribute name: "+a);return a}function k(a){if(!a.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var c={},d={},e=a.split(/\s+/),f=0;f<e.length;f++){var g=e[f];if(g){var g=j(g);if(c.hasOwnProperty(g.toLowerCase()))throw Error("Invalid request option: observing multiple case varitations of the same attribute is not supported.");d[g]=!0,c[g.toLowerCase()]=!0}}return b.keys(d)}function l(a){var c={callback:!0,queries:!0,rootNode:!0,observeOwnChanges:!0},d={};for(var e in a)if(!(e in c))throw Error("Invalid option: "+e);if("function"!=typeof a.callback)throw Error("Invalid options: callback is required and must be a function");if(d.callback=a.callback,d.rootNode=a.rootNode||document,d.observeOwnChanges=a.observeOwnChanges,!a.queries||!a.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");d.queries=[];for(var f=0;f<a.queries.length;f++){var g=a.queries[f];if(g.all){if(b.keys(g).length>1)throw Error("Invalid request option. all has no options.");d.queries.push({all:!0})}else if(g.hasOwnProperty("attribute")){var h={attribute:j(g.attribute)};if(h.elementFilter=i("*["+h.attribute+"]"),b.keys(g).length>1)throw Error("Invalid request option. attribute has no options.");d.queries.push(h)}else if(g.hasOwnProperty("element")){var l=b.keys(g).length,h={element:g.element,elementFilter:i(g.element)};if(g.hasOwnProperty("elementAttributes")&&(h.elementAttributes=k(g.elementAttributes),l--),l>1)throw Error("Invalid request option. element only allows elementAttributes option.");d.queries.push(h)}else{if(!g.characterData)throw Error("Invalid request option. Unknown query request.");if(b.keys(g).length>1)throw Error("Invalid request option. characterData has no options.");d.queries.push({characterData:!0})}}return d}function m(a){var c={};return b.each(a,function(a){b.each(a.qualifiers,function(a){a["class"]?c["class"]=!0:a.id?c.id=!0:c[a.attrName]=!0})}),b.keys(c)}function n(a){function c(a){if(!e.attributes||d){if(e.attributes=!0,e.attributeOldValue=!0,!a)return void(d=void 0);d=d||{},b.each(a,function(a){d[a]=!0,d[a.toLowerCase()]=!0})}}var d,e={childList:!0,subtree:!0};return b.each(a,function(a){if(a.characterData)return e.characterData=!0,void(e.characterDataOldValue=!0);if(a.all)return c(),e.characterData=!0,void(e.characterDataOldValue=!0);if(a.attribute)return void c([a.attribute.trim()]);a.elementFilter&&b.some(a.elementFilter,function(a){return a.className})&&c(["class"]);var d=m(a.elementFilter).concat(a.elementAttributes||[]);d.length&&c(d)}),d&&(e.attributeFilter=b.keys(d)),e}function o(a,c,d){a.elementFilter=d.elementFilter,a.filterCharacterData=d.characterData;var e={target:c,type:"summary",added:[],removed:[]};if(e.getOldParentNode=b.bind(a.getOldParentNode,a),(d.all||d.element)&&(e.reparented=[]),d.all&&(e.reordered=[]),a.getChanged(e),d.all||d.attribute||d.elementAttributes){var f=d.attribute?[d.attribute]:d.elementAttributes,g=a.getAttributesChanged(f);d.attribute?(e.valueChanged=[],g[d.attribute]&&(e.valueChanged=g[d.attribute]),e.getOldAttribute=function(b){return a.getOldAttribute(b,d.attribute)}):(e.attributeChanged=g,d.elementAttributes&&b.each(d.elementAttributes,function(a){e.attributeChanged.hasOwnProperty(a)||(e.attributeChanged[a]=[])}),e.getOldAttribute=b.bind(a.getOldAttribute,a))}if(d.all||d.characterData){var h=a.getCharacterDataChanged();e.getOldCharacterData=b.bind(a.getOldCharacterData,a),d.characterData?e.valueChanged=h:e.characterDataChanged=h}return e.reordered&&(e.getOldPreviousSibling=b.bind(a.getOldPreviousSibling,a)),e}function p(c){function d(){b.each(t,function(a){a&&a.recordPreviousState()})}function e(a){b.each(t,function(b,c){b&&b.validate(a[c])})}function f(a){if(!a||!a.length)return[];var c=new h(m,r,s);return c.processMutations(a),b.map(j.queries,function(a){return o(c,m,a)})}function g(a){return b.some(a,function(a){var c=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(b.some(c,function(b){return a[b]&&a[b].length}))return!0;if(a.attributeChanged){var d=b.some(b.keys(a.attributeChanged),function(b){return a.attributeChanged[b].length});if(d)return!0}return!1})}var i=!1,j=l(c),k=n(j.queries),m=j.rootNode,q=j.callback,r=Array.prototype.concat.apply([],b.map(j.queries,function(a){return a.elementFilter?a.elementFilter:[]}));r.length||(r=void 0);var s=b.some(j.queries,function(a){return a.all}),t=[];p.createQueryValidator&&(t=b.map(j.queries,function(a){return p.createQueryValidator(m,a)}));var u=new a(function(a){j.observeOwnChanges||u.disconnect();var b=f(a);e(b),j.observeOwnChanges&&d(),g(b)&&q(b),j.observeOwnChanges||(d(),u.observe(m,k))});this.reconnect=function(){if(i)throw Error("Already connected");u.observe(m,k),i=!0,d()},this.disconnect=function(){if(!i)throw Error("Not connected");var a;"function"==typeof u.takeRecords?a=u.takeRecords():console.log("Warning: MutationObserver.takeRecords not implemented. Current changes cannot be reported."),u.disconnect(),i=!1;var b=f(a);return g(b)?b:void 0},this.reconnect()}var q="matchesSelector";try{var r=document.documentElement;r.webkitMatchesSelector&&(q="webkitMatchesSelector"),r.mozMatchesSelector&&(q="mozMatchesSelector")}catch(s){}var t="__cb_mutation_summary_node_id__",u=1;f.prototype={set:function(a,b){e(a),this.map_[a[t]]={k:a,v:b}},get:function(a){if(!e(a)){var b=this.map_[a[t]];return b?b.v:void 0}},has:function(a){return!e(a)&&a[t]in this.map_},"delete":function(a){e(a)||delete this.map_[a[t]]},keys:function(){var a=[];for(var b in this.map_)a.push(this.map_[b].k);return a}},c.textNodeCustomProps||(f=d);var v=0,w=1,x=2,y=3,z=4,A=5;h.prototype={getChange:function(a){var b=this.changeMap.get(a);return b||(b={target:a},this.changeMap.set(a,b)),1===a.nodeType&&(b.matchCaseInsensitive=!0),b},getParentChange:function(a){var b=this.getChange(a);return b.childList||(b.childList=!0,b.oldParentNode=null),b},handleChildList:function(a){this.childListChanges=!0,b.each(a.removedNodes,function(b){var c=this.getParentChange(b);c.added||c.oldParentNode?c.added=!1:c.oldParentNode=a.target},this),b.each(a.addedNodes,function(a){var b=this.getParentChange(a);b.added=!0},this)},handleAttributes:function(a){this.attributesChanges=!0;var b=this.getChange(a.target);b.attributes||(b.attributes=!0,b.attributeOldValues={});var c=b.attributeOldValues;g(c,a.attributeName)||(c[a.attributeName]=a.oldValue)},handleCharacterData:function(a){this.characterDataChanges=!0;var b=this.getChange(a.target);b.characterData||(b.characterData=!0,b.characterDataOldValue=a.oldValue)},processMutations:function(a){function c(a,b){if(!k.has(a)){k.set(a,!0);var f=l.changeMap.get(a),m=b;if((f&&f.childList||void 0==m)&&(m=i(a)),m!=v){if(h(a),m==w)d.push(a);else if(m==y)e.push(a);else if(m==x){var n=x;f&&f.childList&&(f.oldParentNode!==a.parentNode?n=z:l.calcReordered&&j(a)&&(n=A)),g.set(a,n)}if(m!=x)for(var o=a.firstChild;o;o=o.nextSibling)c(o,m)}}}this.mutations=a,this.changeMap=new f,b.each(this.mutations,function(a){switch(a.type){case"childList":this.handleChildList(a);break;case"attributes":this.handleAttributes(a);break;case"characterData":this.handleCharacterData(a)}},this);var d=this.entered=[],e=this.exited=[],g=this.stayedIn=new f;if(this.childListChanges||this.attributesChanges){var h=b.bind(this.matchabilityChange,this),i=b.bind(this.reachabilityChange,this),j=b.bind(this.wasReordered,this),k=new f,l=this;b.each(this.changeMap.keys(),function(a){c(a)})}},getChanged:function(a){var c=b.bind(this.matchabilityChange,this);b.each(this.entered,function(b){var d=c(b);(d==w||d==x)&&a.added.push(b)}),b.each(this.stayedIn.keys(),function(b){var d=c(b);if(d==w)a.added.push(b);else if(d==y)a.removed.push(b);else if(d==x&&(a.reparented||a.reordered)){var e=this.stayedIn.get(b);a.reparented&&e==z?a.reparented.push(b):a.reordered&&e==A&&a.reordered.push(b)}},this),b.each(this.exited,function(b){var d=c(b);(d==y||d==x)&&a.removed.push(b)})},getOldParentNode:function(a){var b=this.changeMap.get(a);if(b&&b.childList)return b.oldParentNode?b.oldParentNode:null;var c=this.reachabilityChange(a);if(c==v||c==w)throw Error("getOldParentNode requested on invalid node.");return a.parentNode},getOldPreviousSibling:function(a){var b=this.childlistChanges.get(a.parentNode);if(!b||!this.wasReordered(a))throw Error("getOldPreviousSibling requested on invalid node.");return b.oldPreviousSibling.get(a)},getOldAttribute:function(a,b){var c=this.changeMap.get(a);if(!c||!c.attributes)throw Error("getOldAttribute requested on invalid node.");if(c.matchCaseInsensitive&&(b=b.toLowerCase()),!g(c.attributeOldValues,b))throw Error("getOldAttribute requested for unchanged attribute name.");return c.attributeOldValues[b]},getAttributesChanged:function(a){if(!this.attributesChanges)return{};var c,d;a&&(c={},d={},b.each(a,function(a){c[a]=!0;var b=a.toLowerCase();a!=b&&(d[b]=a)}));for(var e={},f=this.changeMap.keys(),g=0;g<f.length;g++){var h=f[g],i=this.changeMap.get(h);if(i.attributes&&x==this.reachabilityChange(h)&&x==this.matchabilityChange(h)){var j=h,k=i.attributeOldValues;b.each(b.keys(k),function(a){var b=a;i.matchCaseInsensitive&&d&&d[a]&&(b=d[a]),(!c||c[b])&&j.getAttribute(a)!=k[a]&&(e[b]||(e[b]=[]),e[b].push(j))})}}return e},getOldCharacterData:function(a){var b=this.changeMap.get(a);if(!b||!b.characterData)throw Error("getOldCharacterData requested on invalid node.");return b.characterDataOldValue},getCharacterDataChanged:function(){if(!this.characterDataChanges)return[];for(var a=this.changeMap.keys(),b=[],c=0;c<a.length;c++){var d=a[c];if(x==this.reachabilityChange(d)&&x==this.matchabilityChange(d)){var e=this.changeMap.get(d);e.characterData&&d.textContent!=e.characterDataOldValue&&b.push(d)}}return b},reachabilityChange:function(a){function b(a){var b=g.get(a);if(b&&b.childList){if(b.oldParentNode)return b.oldParentNode;if(b.added)return null}return a.parentNode}function c(a){if(a===e)return!0;if(!a)return!1;var b=h.get(a);return void 0===b&&(b=c(a.parentNode),h.set(a,b)),b}function d(a){if(a===e)return!0;if(!a)return!1;var c=i.get(a);return void 0===c&&(c=d(b(a)),i.set(a,c)),c}this.reachableCache=this.reachableCache||new f,this.wasReachableCache=this.wasReachableCache||new f;var e=this.rootNode,g=this.changeMap,h=this.reachableCache,i=this.wasReachableCache;return c(a)?d(a)?x:w:d(a)?y:v},checkWasMatching:function(a,c,d){var e=this.changeMap.get(a);if(!e||!e.attributeOldValues)return d;var f=c.tagName;if(e.matchCaseInsensitive&&"*"!=f&&g(c,"caseInsensitiveTagName")&&(f=c.caseInsensitiveTagName),"*"!=f&&f!=a.tagName)return!1;var h=e.attributeOldValues,i=b.some(c.qualifiers,function(a){return a["class"]?g(h,"class"):a.id?g(h,"id"):e.matchCaseInsensitive&&g(a,"caseInsensitiveAttrName")?g(h,a.caseInsensitiveAttrName):g(h,a.attrName)});if(!i)return d;for(var j=0;j<c.qualifiers.length;j++){var k,l=c.qualifiers[j];k=l["class"]?"class":l.id?"id":e.matchCaseInsensitive&&g(l,"caseInsensitiveAttrName")?l.caseInsensitiveAttrName:l.attrName;var m=l["class"]?!0:l.contains,n=g(h,k)?h[k]:a.getAttribute(k);if(null==n)return!1;if(l.hasOwnProperty("attrValue")){if(!m&&l.attrValue!==n)return!1;var o=b.some(n.split(" "),function(a){return a==l.attrValue});if(!o)return!1}}return!0},matchabilityChange:function(a){function c(a){this.matchCache||(this.matchCache={}),this.matchCache[a.selectorString]||(this.matchCache[a.selectorString]=new f);var b=this.matchCache[a.selectorString],c=b.get(d);if(void 0!==c)return c;var e=d[q](a.selectorString),g=this.checkWasMatching(d,a,e);return c=e?g?x:w:g?y:v,b.set(d,c),c}if(this.filterCharacterData)switch(a.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return x;default:return v}if(!this.elementFilter)return x;if(a.nodeType!==Node.ELEMENT_NODE)return v;for(var d=a,e=b.map(this.elementFilter,c,this),g=v,h=0;g!=x&&h<e.length;){switch(e[h]){case x:g=x;break;case w:g=g==y?x:w;break;case y:g=g==w?x:y}h++}return g},processChildlistChanges:function(){function a(a){var b=c.get(a);return b||(b={added:new f,removed:new f,maybeMoved:new f,oldPrevious:new f},c.set(a,b)),b}if(!this.childlistChanges){var c=this.childlistChanges=new f,d=b.bind(this.reachabilityChange,this);b.each(this.mutations,function(c){function e(a,b){!a||f.oldPrevious.has(a)||f.added.has(a)||f.maybeMoved.has(a)||b&&(f.added.has(b)||f.maybeMoved.has(b))||f.oldPrevious.set(a,b)}if("childList"==c.type&&d(c.target)==x){var f=a(c.target),g=c.previousSibling;b.each(c.removedNodes,function(a){e(a,g),f.added.has(a)?f.added["delete"](a):(f.removed.set(a,!0),f.maybeMoved["delete"](a,!0)),g=a}),e(c.nextSibling,g),b.each(c.addedNodes,function(a){f.removed.has(a)?(f.removed["delete"](a),f.maybeMoved.set(a,!0)):f.added.set(a,!0)})}})}},wasReordered:function(a){function c(a){for(;a=a.previousSibling;)if(j.has(a))return!1;return!0}function d(a){if(!a)return!1;if(!h.maybeMoved.has(a))return!1;var b=i.get(a);return void 0!==b?b:(j.has(a)?b=c(a):(j.set(a,!0),b=g(a)!==e(a)),j.has(a)?(j["delete"](a),i.set(a,b)):b=i.get(a),b)}function e(a){var b=k.get(a);if(void 0!==b)return b;for(b=h.oldPrevious.get(a);b&&(h.removed.has(b)||d(b));)b=e(b);return void 0===b&&(b=a.previousSibling),k.set(a,b),b}function g(a){if(l.has(a))return l.get(a);for(var b=a.previousSibling;b&&(h.added.has(b)||d(b));)b=b.previousSibling;return l.set(a,b),b}if(!this.childListChanges)return!1;this.processChildlistChanges();var h=this.childlistChanges.get(a.parentNode);if(h.moved)return h.moved.get(a);var i=h.moved=new f,j=new f,k=h.oldPreviousSibling=new f,l=new f;return b.each(h.maybeMoved.keys(),d),
h.moved.get(a)}};var B=/[a-zA-Z_]+/,C=/[a-zA-Z0-9_\-]+/,D=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;return p.NodeMap=f,p}),define("cb/lib/dom/treeMirrorClient",["underscore","signals","mutation_summary","./Node"],function(a,b,c,d){"use strict";function e(a){return"class"===a?"k":a}function f(a,d){this.target=a,this.knownNodes=new c.NodeMap,this.testingQueries=d,this.on={},this.on.domChanged=new b,this.on.nodesAdded=new b}return f.prototype={nextId:1,initialize:function(){var a=this.target,b=this,d=[{all:!0}];this.testingQueries&&(d=d.concat(this.testingQueries)),this.mutationSummary=new c({rootNode:a,callback:function(a){b.applyChanged(a)},queries:d})},takeSnapshot:function(a){var b,c,d=this.target,e=this.serializeNode(d),f=[];for("number"!=typeof e&&(e=e.id),b=d.firstChild;b;b=b.nextSibling)c=this.serializeNode(b,!0,!0),null!=c&&f.push(c);a(e,f)},disconnect:function(){this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0)},rememberNode:function(a){var b=this.nextId++;return this.knownNodes.set(a,b),b},forgetNode:function(a){this.knownNodes["delete"](a)},getIdFromKnownNodes:function(a){var b=this.knownNodes.get(a);return b||null},serializeNode:function(a,b,c){var f,g,h,i,j,k;if(null===a)return null;if(f=this.knownNodes.get(a),!c&&void 0!==f)return f;switch(g={nodeType:a.nodeType,id:f||this.rememberNode(a)},g.nodeType){case d.DOCUMENT_TYPE_NODE:g.name=a.name,g.publicId=a.publicId,g.systemId=a.systemId;break;case d.COMMENT_NODE:case d.TEXT_NODE:g.textContent=a.textContent||a.nodeValue;break;case d.ELEMENT_NODE:if(!a.tagName)return null;for(g.tagName=a.tagName,g.attributes={},k=0;k<a.attributes.length;k++)h=a.attributes.item(k),g.attributes[e(h.name)]=h.value;if(a.value&&!g.attributes.value&&(g.attributes.value=a.value),b&&a.childNodes.length)for(g.childNodes=[],i=a.firstChild;i;i=i.nextSibling)j=this.serializeNode(i,!0,c),null!=j&&g.childNodes.push(j)}return g},serializeAddedAndMoved:function(b){var d,e;return d=new c.NodeMap,a.each(b,function(a){var b=a.parentNode,e=d.get(b);e||(e=new c.NodeMap,d.set(b,e)),e.set(a,!0)}),e=[],a.each(d.keys(),function(a){for(var b,c=d.get(a),f=c.keys();f.length;){for(b=f[0];b.previousSibling&&c.has(b.previousSibling);)b=b.previousSibling;for(;b&&c.has(b);)e.push({node:this.serializeNode(b),previousSibling:this.serializeNode(b.previousSibling),parentNode:this.serializeNode(b.parentNode)}),c["delete"](b),b=b.nextSibling;f=c.keys()}},this),e},serializeAttributeChanges:function(b){var d=new c.NodeMap;return a.each(a.keys(b),function(c){a.each(b[c],function(a){var b=d.get(a);b||(b={node:this.serializeNode(a),attributes:{}},d.set(a,b)),b.attributes[e(c)]=a.getAttribute(c)},this)},this),a.map(d.keys(),function(a){return d.get(a)})},serializeCharacterDataChange:function(a){var b=a,c=a.parentNode;return!this.getIdFromKnownNodes(a)&&c&&"textContent"in c&&(b=a.parentNode),{node:this.serializeNode(b),textContent:a.textContent}},applyChanged:function(b){var c,d,e,f,g=this,h=b[0],i=h.added.concat(h.reparented).concat(h.reordered);i.length&&this.on.nodesAdded.dispatch(i),c=a.map(h.removed,function(a){return g.serializeNode(a,!1,!1)}),d=this.serializeAddedAndMoved(i),e=this.serializeAttributeChanges(h.attributeChanged),f=a.map(h.characterDataChanged,this.serializeCharacterDataChange,this),this.on.domChanged.dispatch(c,d,e,f),a.each(h.removed,this.forgetNode,this)}},f}),define("cb/lib/dom/treeMirrorClientWrapper",["underscore","./treeMirrorClient"],function(a,b){"use strict";function c(b){return a.isNumber(b)?b:b.id?b.id:a.isNumber(b.node)?b.node:a.isNumber(b.node.id)?b.node.id:!1}return function(){var a=b,d=a.prototype,e=d.rememberNode,f=d.forgetNode;b=function(){var b=this;b.reverseKnownNodes={},a.apply(b,Array.prototype.slice.call(arguments)),b.getNodeId=function(a){return a?b.getIdFromKnownNodes(a):null},b.getRealNode=function(a){var d=c(a);return d?b.reverseKnownNodes[d]||null:null}},b.prototype=d,d.rememberNode=function(a){var b,c=e.call(this,a);return b=this.knownNodes.get(a),this.reverseKnownNodes[b]=a,c},d.forgetNode=function(a){var b=this.knownNodes.get(a);f.call(this,a),delete this.reverseKnownNodes[b]}}(),b}),define("cb/lib/jquery.service-nodes",["jquery","util"],function(a,b){"use strict";a.fn.cbMarkNode=function(a){var c=a&&a.noChildren;return this.each(function(){b.markServiceNode(this,c)})},a.fn.cbUnmarkNode=function(){return this.each(function(){b.unmarkServiceNode(this)})},a.fn.cbTestNode=function(){if(this.length>1)throw new Error("Only one node at a time can be tested");return this[0]&&b.isServiceNode(this[0])}}),define("cb/services/masterDomService",["jquery","underscore","cb/lib/dom/treeMirrorClientWrapper","util","cb/lib/dom/Node","signals","cb/lib/jquery.service-nodes"],function(a,b,c,d,e,f){"use strict";function g(a,g,h,i,j,k,l,m){function n(){return M}function o(a,b){var c=!M.length;d.log("NEW SLAVES READY:",a," READY SLAVES: ",M),c&&w(),r(a),E(a,b,c)}function p(a){return o(a,!0)}function q(){d.log("DOM MESSAGE DELIVERY FAILURE"),N.messageFailure.dispatch()}function r(a){M=b.uniq(M.concat(a))}function s(a){for(var b,c=0,e=a.length;e>c;c++)b=a[c],b?(u(b),v(b)):d.log("WARN: CANT GET ADDED NODE FROM DATA ",a[c])}function t(){var a=d.getServiceNodes();d.log("FOUND "+a.length+' "SERVICE" NODES'),a.each(function(){d.markServiceNode(this)})}function u(a){var b;d.isServiceNode(a)||(b=d.getServiceParent(a),b&&(d.log('RE-APPLYING "SERVICENESS" ON ',b),d.markServiceNode(b)))}function v(a){a.tagName&&"IFRAME"===a.tagName&&N.iframeAdded.dispatch(a)}function w(){d.log("FIRST SLAVE IS READY, INITIALIZING MIRRORING"),h.activate({publish:!0,listen:!0,targeted:!0}),K=new c(document,null),K.on.domChanged.add(z,K),K.on.nodesAdded.add(s,null,1),l.activate({onNodesAdded:K.on.nodesAdded,nodeGetter:K.getRealNode}),K.initialize(),J=b.bind(y,K),j.activate({nodeGetter:K.getRealNode,nodeIdGetter:K.getNodeId,targetUsersGetter:n}),i.activate({nodeFilter:l.checkNode,onNodesAdded:K.on.nodesAdded,publishCheckboxes:!0,nodeGetter:K.getRealNode,nodeIdGetter:K.getNodeId,targetUsersGetter:n,valueFilter:l.get$NodeValue}),m.activate()}function x(a,b){var c=a.nodeType;return b=b||{},c===e.COMMENT_NODE?!1:c!==e.ELEMENT_NODE&&c!==e.TEXT_NODE||!d.isServiceNode(a)?c===e.TEXT_NODE?a.parentNode?x(a.parentNode,b):!0:"LINK"===a.nodeName&&"stylesheet"===a.rel||"STYLE"===a.nodeName?b.initial?k.areStylesheetsSynced():!0:"SCRIPT"===a.nodeName?!1:!0:!1}function y(a,b){var c=this.getRealNode(a);return c?x(c,b):!1}function z(a,c,d,e){a=B(a),d=B(d),c=B(c),A(c),G(c),G(d),l.maskSerializedNodes(c),l.maskSerializedNodes(e),b.isEmpty(a)&&b.isEmpty(c)&&b.isEmpty(d)&&b.isEmpty(e)||(O+=1,g.publishDOM({command:"applyChanged",snapshotId:I,changeId:O,targetUsersIds:M,args:[a,c,d,e]}))}function A(a){b.each(a,function(a){var b;if(a.previousSibling){for(b=K.getRealNode(a.previousSibling);!x(b)&&b.previousSibling;)b=b.previousSibling;b?a.previousSibling=K.getNodeId(b):a.previousSibling=null}})}function B(a){return b.filter(a,J)}function C(){d.log("ACTIVATING DOM SERVICE"),g.on.slaveContextReady.add(p),g.on.messageFailure.add(q),t()}function D(){d.log("DEACTIVATING DOM SERVICE"),M=[],g.on.slaveContextReady.remove(p),g.on.messageFailure.remove(q),h.deactivate(),i.deactivate(),k.deactivate(),j.deactivate(),m.deactivate(),K&&(K.disconnect(),K=null)}function E(b,c,e){d.log("TAKING SNAPSHOT"),K.takeSnapshot(function(f,j){d.log("SNAPSHOT TAKEN, PROCESSING IT"),F(j),G(j),l.maskSerializedNodes(j),I=d.getRandomString(),O=0,d.log("PUBLISHING INITIALIZATION SNAPSHOT ",I),d.log("BASE IS "+d.getPageBaseUrl()),g.publishDOM({command:"initialize",snapshotId:I,inReplyToReady:c,targetUsersIds:b,base:d.getPageBaseUrl(),dom:[f,j],scroll:h.getCurrentScroll()}),k.publishCSS({targetUsersIds:e?b.concat(a):b,initial:!0}),i.publishCurrentValues(b)})}function F(a){d.walkNodes(a,F,function(a,b,c){return J(a,{initial:!0})?!1:(c.splice(b,1),!0)})}function G(a){d.walkNodes(a,G,H)}function H(a){var c=a.node||a,e=c.attributes;e&&b.each(e,function(a,b){d.isValidAttribute(b)||delete e[b]})}var I,J,K,L=this,M=[],N={iframeAdded:new f,messageFailure:new f},O=0;b.extend(L,{on:N,activate:C,deactivate:D,initializeSlaves:o})}return g}),define("cb/services/ModeService",["underscore","signals","cb/constants"],function(a,b,c){"use strict";function d(a){return{pointer:a===c.modes.POINTER,write:a===c.modes.WRITE}}function e(e){function f(){return g||(g=d(e.get("mode"))),g}var g,h=this,i={modeChanged:new b};e.on("change:mode",function(a,b){if(b&&a.previous("mode")){if(!a.get("writeModeAllowed")&&b===c.modes.WRITE)throw a.set("mode",c.modes.POINTER),new Error("Switching to Write mode is not allowed");g=d(b),i.modeChanged.dispatch(g)}}),a.extend(h,{on:i,currentMode:f})}return e}),define("cb/services/mouseService",["jquery","underscore","util","support","signals","cb/lib/dom/Node","cb/constants"],function(a,b,c,d,e,f,g){"use strict";function h(g,h,o,p,q,r){function s(a,b){var c;return d.w3cEvents?(c=document.createEvent("MouseEvents"),c.initMouseEvent(a.eventType,!0,!0,document.defaultView,0,0,0,a.x||0,a.y||0,!1,!1,!1,!1,0,b),c.gcbTriggered=!0):(c=document.createEventObject(),c.clientX=a.x||0,c.clientY=a.y||0,c.relatedTarget=b,c.gcbTriggered=!0),c}function t(a){var b,e,f,h=a.eventType;if(h===m?b=ba:a.nodeId&&(b=W(a.nodeId)),e=a.relatedTargetNodeId?W(a.relatedTargetNodeId):null,h!==k&&h!==l||!b||u(aa[h],b,e),g!==j){if(!b)return void c.log("TARGET FOR MOUSE EVENT IS ABSENT, NODE ID ",a.nodeId,JSON.stringify(a));f=s(a,e),h===n&&u("mouseleave",b,null),d.w3cEvents?b.dispatchEvent(f):b.fireEvent("on"+h,f),h===n&&u("mouseenter",b,null),h===k&&(ba=b)}}function u(b,c,d){var e;(!d||d!==c&&!a.contains(c,d))&&(_.foreignMouseEvent.dispatch({type:b,target:c,relatedTarget:d}),e=c.parentNode,e&&e.nodeType===f.ELEMENT_NODE&&u(b,e,d))}function v(a){a.eventType===m&&p.delegateMouseMessage(a),t(a)}function w(b){c.log("REPLAYING CLICK",b),t(a.extend({},b,{eventType:"mouseup"})),t(b)}function x(a){var b;return a.isClicked=!0,p.delegateMouseMessage(a),g!==j?g===i&&q.currentMode().pointer?void c.log("POINTER MODE: NOT REPLAYING CLICK EVENT"):(b=W(a.nodeId),r.isNodeRestricted(b)?void c.log('NODE IS "DOM RESTRICTED", NOT REPLAYING CLICK',b):void w(a)):void 0}function y(a){var b=p.retrieveOffset(window);return{x:a.clientX+b.left,y:a.clientY+b.top}}function z(a){if(!a.gcbTriggered){var b={eventType:a.type},c=V(a.target),d=V(a.relatedTarget);c&&(b.nodeId=c),d&&(b.relatedTargetNodeId=d),h.publishMouseMove(b)}}function A(){c.log("ACTIVATING HOVER EVENTS PUBLISHING"),document.addEventListener?(document.addEventListener(k,z,!0),document.addEventListener(l,z,!0)):document.attachEvent&&(document.attachEvent("on"+k,z),document.attachEvent("on"+l,z))}function B(a){return a.clientX===ca.x&&a.clientY===ca.y?!0:(ca.x=a.clientX,ca.y=a.clientY,!1)}function C(){c.log("ACTIVATING MOUSE MOVE PUBLISHING"),Z.bind(m+$,b.throttle(function(a){var b;a.originalEvent.gcbTriggered||B(a)||(b=y(a),b.eventType=m,h.publishMouseMove(b))},o))}function D(a){a.preventDefault?a.preventDefault():a.stop(),a.returnValue=!1,a.stopPropagation()}function E(a){var b;return a.gcbTriggered?!1:(g===j&&D(a),b=y(a),b.nodeId=V(a.target),b.eventType=n,void h.publishMouseClick(b))}function F(a){var b=a.type&&a.type.toLowerCase();return"INPUT"===a.nodeName&&"radio"===b}function G(b){q.currentMode().pointer&&(c.log("POINTER MODE: PREVENTING INTERACTION ",b),D(b),a(b.target).blur())}function H(b){var d=b.target;F(d)&&(c.log("REMEMBERING CHECKED RADIO WITH NAME "+d.name),X=a('[name="'+d.name+'"]:checked'))}function I(){X&&(c.log("RESTORING CHECKED RADIO WITH NAME "+X[0].name),X.attr("checked",!0),X=null)}function J(){c.log("ACTIVATING SLAVE RADIO BUTTONS LISTENERS"),document.addEventListener?document.addEventListener("mousedown",H,!0):document.attachEvent&&a(document).bind("mousedown"+$,H),a(document).on("change"+$,":radio",I)}function K(){c.log("DEACTIVATING SLAVE RADIO BUTTONS LISTENERS"),Q(document,"mousedown",H),a(document).off("change"+$)}function L(){c.log("ACTIVATING SLAVE MODE LISTENER"),document.addEventListener?(document.addEventListener("focus",G,!0),document.addEventListener("mousedown",G,!0)):document.attachEvent&&(a(document).bind("focus"+$,G),a(document).bind("mousedown"+$,G))}function M(){c.log("DEACTIVATING SLAVE MODE LISTENER"),Q(document,"focus",G),Q(document,"mousedown",G)}function N(){J(),L()}function O(){K(),M()}function P(){c.log("ACTIVATING MOUSE CLICK PUBLISHING"),document.addEventListener?document.addEventListener(n,E,!0):document.attachEvent&&a(document).bind(n+$,E)}function Q(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!0),a.detachEvent&&a.detachEvent("on"+b,c)}function R(){Z.unbind($),Q(document,n,E),Q(document,k,z),Q(document,l,z)}function S(a){c.log("ACTIVATING MOUSE SERVICE WITH OPTIONS",a),c.log("MOUSE SYNC INTERVAL IS ",o),U=a,V=U.nodeIdGetter,W=U.nodeGetter,C(),P(),A(),g===j&&N(),h.on.mouseMoveReceived.add(v),h.on.mouseClickReceived.add(x)}function T(){c.log("DEACTIVATING MOUSE SERVICE"),R(),h.on.mouseMoveReceived.remove(v),h.on.mouseClickReceived.remove(x),g===j&&O(),p.hideAllCursors()}var U,V,W,X,Y=this,Z=a(window.document),$=".gcbMouse",_={foreignMouseEvent:new e},aa={mouseover:"mouseenter",mouseout:"mouseleave"},ba=document.body,ca={x:0,y:0};b.extend(Y,{on:_,activate:S,deactivate:T})}var i=g.userRoles.MASTER,j=g.userRoles.SLAVE,k="mouseover",l="mouseout",m="mousemove",n="click";return h}),define("jquery.txtinput",["jquery"],function(a){!function(a,b){var c=".inputEvent ",d="bound.inputEvent",e="value.inputEvent",f=["input","textInput","propertychange","paste","cut","keydown","drop",""].join(c),g=["focusin","dragstart",""].join(c),h={TEXTAREA:b,INPUT:b},i={paste:b,cut:b,keydown:b,drop:b,textInput:b};a.event.special.txtinput={setup:function(){function b(b){var d=b.target;c&&(window.clearTimeout(c),c=null),m||(b.type in i&&!c?c=window.setTimeout(function(){d.value!==a.data(d,e)&&(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value))},0):"propertychange"===b.type?"value"===b.originalEvent.propertyName&&(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value),m=!0,window.setTimeout(function(){m=!1},0)):(a(d).trigger("txtinput",[b.originalEvent]),a.data(d,e,d.value),m=!0,window.setTimeout(function(){m=!1},0)))}var c,j=0,k=this,l=a(this),m=!1;k.tagName in h?(j=a.data(k,d)||0,j||l.bind(f,b),a.data(k,d,++j),a.data(k,e,k.value)):l.bind(g,function(c){var g=c.target;g.tagName in h&&!a.data(g,d)&&(a(g).bind(f,b),a.data(g,d,++j),a.data(g,e,g.value))})},teardown:function(){var b=a(this);b.unbind(g),b.find("input, textarea").andSelf().each(function(){var c=a.data(this,d,(a.data(this,d)||1)-1);c||b.unbind(f)})}},a.fn.input=function(a){return a?this.bind("txtinput",a):this.trigger("txtinput")}}(a)}),define("cb/services/inputService",["jquery","underscore","util","cb/constants","jquery.txtinput"],function(a,b,c,d){"use strict";function e(d,e,k,l){function m(a){c.log("APPLYING VALUES OF "+a.length+" INPUTS"),b.each(a,K)}function n(){_&&(m(_),_=null)}function o(a){switch(_=a,aa){case j.IDLE:c.log("INPUT SERVICE GOT SNAPSHOT, WAITING FOR DOM"),aa=j.WAITING_DOM;break;case j.WAITING_INPUTS:c.log("INPUT SERVICE GOT SNAPSHOT, DOM READY, APPLYING"),n(),aa=j.IDLE;break;case j.WAITING_DOM:c.log("INPUT SERVICE WARN: GOT INPUTS 2 TIMES IN A ROW, DID NOT GET DOM");break;default:c.log("INPUT SERVICE WARN: UNRECOGNIZED SLAVE INPUT STATE: ",aa),aa=j.IDLE}}function p(){switch(aa){case j.IDLE:c.log("INPUT SERVICE NOTIFIED DOM READY, WAITING FOR INPUTS"),aa=j.WAITING_INPUTS;break;case j.WAITING_DOM:c.log("INPUT SERVICE NOTIFIED DOM READY, APPLYING PEDNING SNAPSHOT"),n(),aa=j.IDLE;break;case j.WAITING_INPUTS:c.log("WARN: GOT DOM 2 TIMES IN A ROW, DID NOT GET INPUTS SNAPSHOT");break;default:c.log("WARN: UNRECOGNIZED SLAVE INPUT STATE: ",aa),aa=j.IDLE}}function q(a){return s(a,!0)}function r(a){return s(a,!1)}function s(b,c){return B(b)?b.checked:D(b)?b.selected:c&&T?T(a(b)):a(b).val()}function t(b){a.data(b,Z,r(b))}function u(b){return a.data(b,Z)}function v(a){return t(a),d===h&&c.isServiceNode(a)?void c.log("SERVICE NODE: SKIPPING INPUT EVENT",a):void E(a)}function w(a){t(a);var d=function(){if(Y){var e=r(a),g=u(a);e!==g&&(c.log("GOT VALUE CHANGE: ",g," => ",e," ON ",a),v(a)),b.delay(d,f)}};b.delay(d,f)}function x(a){var b,e=0,f=a.length;if(d===h)for(;f>e;e++)b=a[e],("TEXTAREA"===b.nodeName||"INPUT"===b.nodeName||"OPTION"===b.nodeName)&&(c.isServiceNode(b)||(c.log("NEW INPUT ELEMENT ADDED, GONNA MONITOR"),v(b),w(b)))}function y(){c.log("ACTIVATING INPUT PUBLISHING"),d===g&&W.on("keydown",function(b){I(b.target)&&a.data(b.target,i,A(b))}),W.on("txtinput.gcb",function(a,e){return e&&e.gcbTriggered?void 0:(c.log("TXTINPUT EVENT WITH ORIG TYPE: ",e.type," ON NODE: ",e.target),d===g&&k.currentMode().pointer?void c.log("POINTER MODE: NOT SENDING EVENT"):void b.defer(function(){v(a.target)}))}),d===h&&(a("input, textarea, select option").each(function(){w(this)}),V&&V.add(x)),W.on("change.gcb",function(a){var b=a.target;return d===g&&k.currentMode().pointer?void c.log('POINTER MODE: NOT SENDING "CHANGE" EVENT'):void((C(b)||d===h&&B(b))&&v(b))})}function z(){W.off("txtinput.gcb"),W.off("change.gcb")}function A(a){return{keyCode:a.keyCode,which:a.which,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey,altKey:a.altKey,metaKey:a.metaKey}}function B(a){var b=a.type&&a.type.toLowerCase();return"INPUT"===a.nodeName&&("checkbox"===b||"radio"===b)}function C(a){return"SELECT"===a.nodeName}function D(a){return"OPTION"===a.nodeName}function E(a){var b=G(a);S&&(b.targetUsersIds=S()),e.publishValues(b)}function F(b){var d=[],f={targetUsersIds:b};a(":input").each(function(){var a=this;c.isServiceNode(a)||d.push(G(this))}),f.nodes=d,c.log("PUBLISHING CURRENT INPUT VALUES: ",f),e.publishValues(f)}function G(c){var d,e,f=q(c);return d={node:Q(c),value:f},e=a.data(c,i),b.isUndefined(e)||(d.kbEventDetails=e,a.removeData(c,i)),d}function H(b,e,f){var g=a(b);B(b)?g.prop("checked",e):D(b)?b.selected=e:(d===h&&I(b)&&(J(b,"keydown",f),J(b,"keypress",f)),g.val(e),t(b),c.log("APPLYING NODE VALUE"),d===h&&(I(b)&&J(b,"keyup",f),J(b,"change")))}function I(a){var c=a.nodeName.toLowerCase(),d=a.type;return"textarea"===c||"input"===c&&(!d||!b.contains($,d))}function J(c,d,e){var f;document.createEvent?(f=document.createEvent("Events"),f.initEvent(d,!0,!0)):(f=document.createEventObject(),f.eventType=d),b.isUndefined(e)||a.extend(f,e),f.gcbTriggered=!0,c.dispatchEvent?c.dispatchEvent(f):c.fireEvent("on"+d,f)}function K(a){var b=R(a.node);return b?void(U&&U(b)||l&&l.isNodeRestricted(b)||H(b,a.value,a.kbEventDetails)):void c.log("!!! NODE NOT FOUND",a)}function L(){c.log("ACTIVATING INPUT LISTENING"),e.on.valuesReceived.add(N)}function M(){e.on.valuesReceived.remove(N)}function N(a){return d===h&&k.currentMode().pointer?void c.log("WARNING! GOT INPUT EVENTS IN POINTER MODE. SKIPPING."):void(a.nodes?o(a.nodes):K(a))}function O(b){c.log("ACTIVATING INPUT SERVICE"),Q=b.nodeIdGetter,R=b.nodeGetter,S=b.targetUsersGetter,V=b.onNodesAdded,T=b.valueFilter,U=b.nodeFilter,W=a(window),y(),L(),Y=!0}function P(){Y&&(c.log("DEACTIVATING INPUT SERVICE"),z(),M(),Y=!1)}var Q,R,S,T,U,V,W,X=this,Y=!1,Z="_gcbLastSentValue_",$=["button","checkbox","file","hidden","image","radio","reset","submit"],_=null,aa=j.IDLE;b.extend(X,{activate:O,deactivate:P,publishCurrentValues:F,handleDomMirrorReady:p})}var f=500,g=d.userRoles.SLAVE,h=d.userRoles.MASTER,i="keyboardEventDetails",j={WAITING_DOM:1,WAITING_INPUTS:2,IDLE:3};return e}),define("cb/services/restrictions/dataMaskingService",["jquery","underscore","util","cb/lib/dom/Node","signals","cb/lib/jquery.service-nodes"],function(a,b,c,d,e){"use strict";function f(f){function h(){var b=f.join(",");a(b).each(function(){i([this]),x.elementMarked.dispatch(this)})}function i(a){c.walkNodes(a,i,j)}function j(a){a.nodeType!==d.TEXT_NODE&&(a[g]=!0)}function k(a){return a.nodeType===d.TEXT_NODE&&a.parentNode&&k(a.parentNode)||a[g]===!0}function l(a){var b=k(a[0]),c=a.val();return b?c&&t(c):c}function m(a){v=a.onNodesAdded,u=a.nodeGetter,c.log("ACTIVATING DATA MASKING FOR ELEMENTS ",f),h(),v.add(n)}function n(a){for(var b,d=!1,e=0,f=a.length;f>e;e++)if(b=a[e],!c.isServiceNode(b)&&"SCRIPT"!==b.nodeName){d=!0;break}d&&h()}function o(a){c.walkNodes(a,o,p)}function p(a){var b;b=u(a),b&&k(b)&&q(a)}function q(b){var e,f;return b.textContent?void(a.trim(b.textContent).length&&(b.textContent=t(b.textContent))):b.node?void q(b.node):(e=b.nodeType,void(e===d.ELEMENT_NODE?(f=b.tagName,b.attributes["data-masked"]=!0,b.attributes.readOnly=!0,"INPUT"===f?r(b):"OPTION"===f&&s(b)):c.log("Unable to mask! Unrecognized node structure: ",b)))}function r(a){var b=a.attributes&&a.attributes.value,c=a.attributes&&a.attributes.placeholder;b&&(a.attributes.value=t(b)),c&&(a.attributes.placeholder=t(c))}function s(a){var b=a.attributes,c=b&&b.value,d=b&&b.label;c&&(b.value=t(c)),d&&(b.label=t(d))}function t(a){return a.replace(/[^\s]/g,"*")}var u,v,w=this,x={elementMarked:new e};f.push('input[type="password"]'),b.extend(w,{on:x,activate:m,maskSerializedNodes:o,get$NodeValue:l,checkNode:k})}var g="_gcbDataMasked_";return f}),define("cb/services/restrictions/domRestrictionsService",["jquery","underscore","json","../../constants","util"],function(a,b,c,d,e){"use strict";function f(c){function d(a){if("regexp"===a.type||b.isUndefined(a.type)){var c=new RegExp(a.pattern);return c.test(document.URL)}return e.log("URI template type : "+a.type+" is not supported"),!1}function f(a){b.each(a,function(a,c){"uriTemplate"!==c&&(k[c]||(k[c]=[]),k[c]=b.union(k[c],a))})}function g(a){var c;return a.domRestrictions&&a.domRestrictions.restrictionsSet?(c=b.union([],a.domRestrictions.restrictionsSet),b.each(c,function(a){b.each(a,function(c,d){c.element?a[d]=b.union([],c.element):"uriTemplate"!==d&&(a[d]=b.toArray(a[d]))})}),c):[]}function h(a){var c=g(a);b.each(c,function(a){d(a.uriTemplate)&&f(a)})}function i(b,c){var d,e,f=!1,g=k[c];if(!g)return!1;for(d=g.length,e={};d--;)if(e=g[d],a(b).is(e.selector)||a(b).parents(e.selector).length){if("true"===e.skip)continue;f=!0;break}return f}function j(){var a={domControl:[],domHiding:[],dataMasking:[]};return b.each(k,function(c,d){a[d]=b(c).chain().where({skip:void 0}).pluck("selector").value()}),a}var k={};e.log("INITIALIZING DOM RESTRICTION SERVICE WITH CONFIG: ",c),h(c),b.extend(this,{getConfig:j,checkNodeRestriction:i})}return f}),define("cb/services/restrictions/domControlService",["jquery","underscore","../../constants","util"],function(a,b,c,d){"use strict";function e(a){function c(a){return!!a[g]}function e(a){a[g]=!0}function f(b){var f;return d.log("CHECK DOM CONTROL RESTRICTIONS FOR NODE",b),c(b)?!0:(f=a.checkNodeRestriction(b,"domControl"),f&&e(b),f)}var g="_gcbDomControlDisabled_";b.extend(this,{isNodeRestricted:f})}return e}),define("cb/services/windowDialogService",["jquery","underscore","util","cb/constants","cb/environment"],function(a,b,c,d,e){"use strict";function f(d,f,h){function i(a,c,d){window[a]=function(){return t[a]=window[a],function(){var e,f=b.toArray(arguments);return c(a,f),e=t[a].apply(window,f),d(a,f,e),e}}()}function j(a){t[a]&&(window[a]=t[a])}function k(a,b){var c={type:"start",name:a,args:b.map(String)};f.publishDialogStart(c)}function l(a,b,c){var d={type:"end",name:a,args:b,result:null==c?!1:c};f.publishDialogEnd(d)}function m(a){c.log("_dialogCallback result:",a)}function n(a){var b=a.args[0]?a.args[0]:"",d=a.args[1]?a.args[1]:"";switch(c.log("DIALOG SERVICE _onDialogStartReceived",a),a.name){case"alert":h.alert(b,m);break;case"confirm":h.confirm(b,m);break;case"prompt":h.prompt(b,d,m)}}function o(b,c){u._animateClick(b,a(e[d].getTopContext()).find(c)),h.showMessage(b,"info"),h.destroyDialogs()}function p(b){c.log("DIALOG SERVICE _onDialogEndReceived",b),"alert"===b.name?o("Alert dialog was closed.",".gcb-dialog-buttons button:contains(Ok)"):"prompt"===b.name?"string"==typeof b.result?(a(e[d].getTopContext()).find(".gcb-dialog-prompt input:text").val(b.result),o('Prompt dialog "'+b.args[0]+'" was finished with result: "'+b.result+'"',".gcb-dialog-buttons button:contains(Ok)")):o('Prompt dialog "'+b.args[0]+'" was canceled ',".gcb-cancel"):b.result?o('Confirm dialog "'+b.args[0]+'" was confirmed',".gcb-dialog-buttons button:contains(Ok)"):o('Confirm dialog "'+b.args[0]+'" was canceled',".gcb-cancel")}function q(){c.log("ACTIVATE WINDOW DIALOG SERVICE"),i("alert",k,l),i("prompt",k,l),i("confirm",k,l),f.on.dialogStartReceived.add(n),f.on.dialogEndReceived.add(p)}function r(){c.log("DEACTIVATE WINDOW DIALOG SERVICE"),j("alert"),j("prompt"),j("confirm"),f.on.dialogStartReceived.remove(n),f.on.dialogEndReceived.remove(p)}var s=this,t={},u=h?h.getVirtualMouseManager():{};d=g[d],c.log("Initializing window dialog service for "+d),b.extend(s,{activate:q,deactivate:r,destroyDialogs:function(){try{h.destroyDialogs()}catch(a){c.log("NO CURRENT DIALOGS")}}})}var g={};return g[d.userRoles.SLAVE]="slave",g[d.userRoles.MASTER]="master",f}),define("cb/app/master/masterCore",["jquery","underscore","cb/environment","signals","util","cb/constants","../../transport/clients/contextClient","../../transport/clients/masterDomClient","../../transport/clients/scrollClient","../../transport/clients/mouseClient","../../transport/clients/inputClient","../../transport/clients/windowDialogClient","../../transport/clients/masterCssClient","../../services/scrollService","../../services/masterDomService","../../services/ModeService","../../services/mouseService","../../services/inputService","../../services/restrictions/dataMaskingService","../../services/restrictions/domRestrictionsService","../../services/restrictions/domControlService","../../services/windowDialogService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){"use strict";function w(w,y,z){function A(a){e.log("MASTER CORE: CONNECTED; CONTEXT: ",z),a.newSession&&(e.log("MASTER CORE: NEW SESSION, CLEARING CACHED CONFIG"),w.clearSessionConfigCache()),e.log("MASTER CORE: GETTING SESSION CONFIG"),w.getSessionConfig(function(a){var d,g,h,i,j,k=new p(w.getSession());return e.log("MASTER CORE: GOT SESSION CONFIG; CONTEXT: ",z),a?(F=new t(a),G=new u(F),g=new n(x,N,k,I),d=new r(x,P,k,G),i=new s(F.getConfig().dataMasking),i.on.elementMarked.add(J.elementMasked.dispatch),h=new q(x,O,w.getMouseSyncInterval(),w.getVirtualMouseManager(),k,G),j=new v(x,Q),E=new o(I.get("userId"),M,g,d,h,y,i,j),E.on.iframeAdded.add(function(a){var b=c.master.indexIframeIfNotYet(a,w.getNextContextId);e.log("NEW IFRAME DETECTED, CONTEXT ID SET TO ",b)}),E.on.messageFailure.add(function(){e.log("ABNORMAL NETWORK CONDITION. TERMINATING THE SESSION"),w.getSessionClient().disconnect(f.sessionEndTriggers.TIMEOUT)}),J.pickedUpSlaves.add(function(a){E.initializeSlaves(a,!1)}),E.activate(),y.activate({foreignMouseEvent:h.on.foreignMouseEvent,cssClient:R}),void B()):(w.getSessionClient().disconnect(f.sessionEndTriggers.ERROR),void b.defer(function(){throw new Error("Session configuration error. Unable to start Co-browse")}))})}function B(){I.users.length&&(e.log("SUCCESSFULLY EXTRACTED CONNECTED SLAVE ID: ",I.users.toJSON()),J.pickedUpSlaves.dispatch(I.users.pluck("userId")))}function C(){e.log("EXITED SESSION"),E&&E.deactivate()}function D(){e.log("MASTER CORE INIT, CONTEXT: ",z),e.log("INDEXING IFRAMES"),a("iframe").each(function(){c.master.indexIframeIfNotYet(this,w.getNextContextId)}),K.on.connected.add(A),K.on.disconnected.add(C)}var E,F,G,H=this,I=w.getSession(),J={pickedUpSlaves:new d,elementMasked:new d},K=w.getSessionClient(),L=new g(K.getCoreClient(),z),M=new h(L),N=new i(L),O=new j(L),P=new k(L),Q=new l(L),R=new m(L);D(),b.extend(H,{on:J})}var x=f.userRoles.MASTER;return w}),this.org=this.org||{},org.cometd={},org.cometd.JSON={},org.cometd.JSON.toJSON=org.cometd.JSON.fromJSON=function(a){throw"Abstract"},org.cometd.Utils={},org.cometd.Utils.isString=function(a){return void 0===a||null===a?!1:"string"==typeof a||a instanceof String},org.cometd.Utils.isArray=function(a){return void 0===a||null===a?!1:a instanceof Array},org.cometd.Utils.inArray=function(a,b){for(var c=0;c<b.length;++c)if(a===b[c])return c;return-1},org.cometd.Utils.setTimeout=function(a,b,c){return window.setTimeout(function(){try{b()}catch(c){a._debug("Exception invoking timed function",b,c)}},c)},org.cometd.Utils.clearTimeout=function(a){window.clearTimeout(a)},org.cometd.TransportRegistry=function(){var a=[],b={};this.getTransportTypes=function(){return a.slice(0)},this.findTransportTypes=function(c,d,e){for(var f=[],g=0;g<a.length;++g){var h=a[g];b[h].accept(c,d,e)===!0&&f.push(h)}return f},this.negotiateTransport=function(c,d,e,f){for(var g=0;g<a.length;++g)for(var h=a[g],i=0;i<c.length;++i)if(h===c[i]){var j=b[h];if(j.accept(d,e,f)===!0)return j}return null},this.add=function(c,d,e){for(var f=!1,g=0;g<a.length;++g)if(a[g]===c){f=!0;break}return f||("number"!=typeof e?a.push(c):a.splice(e,0,c),b[c]=d),!f},this.find=function(c){for(var d=0;d<a.length;++d)if(a[d]===c)return b[c];return null},this.remove=function(c){for(var d=0;d<a.length;++d)if(a[d]===c){a.splice(d,1);var e=b[c];return delete b[c],e}return null},this.clear=function(){a=[],b={}},this.reset=function(){for(var c=0;c<a.length;++c)b[a[c]].reset()}},org.cometd.Transport=function(){var a,b;this.registered=function(c,d){a=c,b=d},this.unregistered=function(){a=null,b=null},this._debug=function(){b._debug.apply(b,arguments)},this._mixin=function(){return b._mixin.apply(b,arguments)},this.getConfiguration=function(){return b.getConfiguration()},this.getAdvice=function(){return b.getAdvice()},this.setTimeout=function(a,c){return org.cometd.Utils.setTimeout(b,a,c)},this.clearTimeout=function(a){org.cometd.Utils.clearTimeout(a)},this.convertToMessages=function(a){if(org.cometd.Utils.isString(a))try{return org.cometd.JSON.fromJSON(a)}catch(b){throw this._debug("Could not convert to JSON the following string",'"'+a+'"'),b}if(org.cometd.Utils.isArray(a))return a;if(void 0===a||null===a)return[];if(a instanceof Object)return[a];throw"Conversion Error "+a+", typeof "+typeof a},this.accept=function(a,b,c){throw"Abstract"},this.getType=function(){return a},this.send=function(a,b){throw"Abstract"},this.reset=function(){this._debug("Transport",a,"reset")},this.abort=function(){this._debug("Transport",a,"aborted")},this.toString=function(){return this.getType()}},org.cometd.Transport.derive=function(a){function b(){}return b.prototype=a,new b},org.cometd.RequestTransport=function(){function a(a){for(;l.length>0;){var b=l[0],c=b[0],d=b[1];if(c.url!==a.url||c.sync!==a.sync)break;l.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",d.id)}}function b(a,b){if(this.transportSend(a,b),b.expired=!1,!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;b.metaConnect===!0&&(d+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0;var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay",f={reason:c},g=b.xhr;f.httpCode=e.xhrStatus(g),e.abortXHR(g),e._debug(c),e.complete(b,!1,b.metaConnect),a.onFailure(g,a.messages,f)},d)}}function c(a){var c=++i,d={id:c,metaConnect:!1};k.length<this.getConfiguration().maxConnections-1?(k.push(d),b.call(this,a,d)):(this._debug("Transport",this.getType(),"queueing request",c,"envelope",a),l.push([a,d]))}function d(a){var b=a.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",b),null!==j&&j.id!==b)throw"Longpoll request mismatch, completing request "+b;j=null}function e(b,d){var e=org.cometd.Utils.inArray(b,k);if(e>=0&&k.splice(e,1),l.length>0){var f=l.shift(),g=f[0],h=f[1];if(this._debug("Transport dequeued request",h.id),d)this.getConfiguration().autoBatch&&a.call(this,g),c.call(this,g),this._debug("Transport completed request",b.id,g);else{var i=this;this.setTimeout(function(){i.complete(h,!1,h.metaConnect);var a={reason:"Previous request failed"},b=h.xhr;a.httpCode=i.xhrStatus(b),g.onFailure(b,g.messages,a);
},0)}}}function f(a){if(null!==j)throw"Concurrent metaConnect requests not allowed, request id="+j.id+" not yet completed";var c=++i;this._debug("Transport",this.getType(),"metaConnect send, request",c,"envelope",a);var d={id:c,metaConnect:!0};b.call(this,a,d),j=d}var g=new org.cometd.Transport,h=org.cometd.Transport.derive(g),i=0,j=null,k=[],l=[];return h.complete=function(a,b,c){c?d.call(this,a):e.call(this,a,b)},h.transportSend=function(a,b){throw"Abstract"},h.transportSuccess=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&c.length>0?a.onSuccess(c):a.onFailure(b.xhr,a.messages,{httpCode:204}))},h.transportFailure=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c))},h.send=function(a,b){b?f.call(this,a):c.call(this,a)},h.abort=function(){g.abort();for(var a=0;a<k.length;++a){var b=k[a];this._debug("Aborting request",b),this.abortXHR(b.xhr)}j&&(this._debug("Aborting metaConnect request",j),this.abortXHR(j.xhr)),this.reset()},h.reset=function(){g.reset(),j=null,k=[],l=[]},h.abortXHR=function(a){if(a)try{a.abort()}catch(b){this._debug(b)}},h.xhrStatus=function(a){if(a)try{return a.status}catch(b){this._debug(b)}return-1},h},org.cometd.LongPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=!0;return b.accept=function(a,b,d){return c||!b},b.xhrSend=function(a){throw"Abstract"},b.transportSend=function(a,b){this._debug("Transport",this.getType(),"sending request",b.id,"envelope",a);var d=this;try{var e=!0;b.xhr=this.xhrSend({transport:this,url:a.url,sync:a.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(a.messages),onSuccess:function(e){d._debug("Transport",d.getType(),"received response",e);var f=!1;try{var g=d.convertToMessages(e);0===g.length?(c=!1,d.transportFailure(a,b,{httpCode:204})):(f=!0,d.transportSuccess(a,b,g))}catch(h){if(d._debug(h),!f){c=!1;var i={exception:h};i.httpCode=d.xhrStatus(b.xhr),d.transportFailure(a,b,i)}}},onError:function(f,g){c=!1;var h={reason:f,exception:g};h.httpCode=d.xhrStatus(b.xhr),e?d.setTimeout(function(){d.transportFailure(a,b,h)},0):d.transportFailure(a,b,h)}}),e=!1}catch(f){c=!1,this.setTimeout(function(){d.transportFailure(a,b,{exception:f})},0)}},b.reset=function(){a.reset(),c=!0},b},org.cometd.CallbackPollingTransport=function(){var a=new org.cometd.RequestTransport,b=org.cometd.Transport.derive(a),c=2e3;return b.accept=function(a,b,c){return!0},b.jsonpSend=function(a){throw"Abstract"},b.transportSend=function(a,b){for(var d=this,e=0,f=a.messages.length,g=[];f>0;){var h=org.cometd.JSON.toJSON(a.messages.slice(e,e+f)),i=a.url.length+encodeURI(h).length;if(i>c){if(1===f)return void this.setTimeout(function(){d.transportFailure(a,b,{reason:"Bayeux message too big, max is "+c})},0);--f}else g.push(f),e+=f,f=a.messages.length-e}var j=a;if(g.length>1){var k=0,l=g[0];this._debug("Transport",this.getType(),"split",a.messages.length,"messages into",g.join(" + ")),j=this._mixin(!1,{},a),j.messages=a.messages.slice(k,l),j.onSuccess=a.onSuccess,j.onFailure=a.onFailure;for(var m=1;m<g.length;++m){var n=this._mixin(!1,{},a);k=l,l+=g[m],n.messages=a.messages.slice(k,l),n.onSuccess=a.onSuccess,n.onFailure=a.onFailure,this.send(n,b.metaConnect)}}this._debug("Transport",this.getType(),"sending request",b.id,"envelope",j);try{var o=!0;this.jsonpSend({transport:this,url:j.url,sync:j.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(j.messages),onSuccess:function(a){var c=!1;try{var e=d.convertToMessages(a);0===e.length?d.transportFailure(j,b,{httpCode:204}):(c=!0,d.transportSuccess(j,b,e))}catch(f){d._debug(f),c||d.transportFailure(j,b,{exception:f})}},onError:function(a,c){var e={reason:a,exception:c};o?d.setTimeout(function(){d.transportFailure(j,b,e)},0):d.transportFailure(j,b,e)}}),o=!1}catch(p){this.setTimeout(function(){d.transportFailure(j,b,{exception:p})},0)}},b},org.cometd.WebSocketTransport=function(){function a(){if(!l){l=!0;var a=d.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);try{var b=d.getConfiguration().protocol,c=b?new org.cometd.WebSocket(a,b):new org.cometd.WebSocket(a)}catch(e){throw g=!1,this._debug("Exception while creating WebSocket object",e),e}i=d.getConfiguration().stickyReconnect!==!1;var f=this,h=null,j=d.getConfiguration().connectTimeout;j>0&&(h=this.setTimeout(function(){h=null,f._debug("Transport",f.getType(),"timed out while connecting to URL",a,":",j,"ms");var b={code:1e3,reason:"Connect Timeout"};f.webSocketClose(c,b.code,b.reason),f.onClose(c,b)},j));var k=function(){f._debug("WebSocket opened",c),l=!1,h&&(f.clearTimeout(h),h=null),m?(d._warn("Closing Extra WebSocket Connections",c,m),f.webSocketClose(c,1e3,"Extra Connection")):f.onOpen(c)},n=function(a){a=a||{code:1e3},f._debug("WebSocket closing",c,a),l=!1,h&&(f.clearTimeout(h),h=null),null!==m&&c!==m?f._debug("Closed Extra WebSocket Connection",c):f.onClose(c,a)},o=function(a){f._debug("WebSocket message",a,c),c!==m&&d._warn("Extra WebSocket Connections",c,m),f.onMessage(c,a)};c.onopen=k,c.onclose=n,c.onerror=function(){n({code:1002,reason:"Error"})},c.onmessage=o,this._debug("Transport",this.getType(),"configured callbacks on",c)}}function b(a,b,c){var d=org.cometd.JSON.toJSON(b.messages);a.send(d),this._debug("Transport",this.getType(),"sent",b,"metaConnect =",c);var e=this.getConfiguration().maxNetworkDelay,f=e;c&&(f+=this.getAdvice().timeout,n=!0);for(var g=this,h=[],i=0;i<b.messages.length;++i)!function(){var c=b.messages[i];c.id&&(h.push(c.id),k[c.id]=this.setTimeout(function(){g._debug("Transport",g.getType(),"timing out message",c.id,"after",f,"on",a);var b={code:1e3,reason:"Message Timeout"};g.webSocketClose(a,b.code,b.reason),g.onClose(a,b)},f))}();this._debug("Transport",this.getType(),"waiting at most",f,"ms for messages",h,"maxNetworkDelay",e,", timeouts:",k)}function c(c,d,e){try{null===c?a.call(this):b.call(this,c,d,e)}catch(f){this.setTimeout(function(){d.onFailure(c,d.messages,{exception:f})},0)}}var d,e=new org.cometd.Transport,f=org.cometd.Transport.derive(e),g=!0,h=!1,i=!0,j={},k={},l=!1,m=null,n=!1,o=null;return f.reset=function(){e.reset(),g=!0,h=!1,i=!0,j={},k={},l=!1,m=null,n=!1,o=null},f.onOpen=function(a){this._debug("Transport",this.getType(),"opened",a),m=a,h=!0,this._debug("Sending pending messages",j);for(var c in j){var d=j[c],e=d[0],f=d[1];o=e.onSuccess,b.call(this,a,e,f)}},f.onMessage=function(a,b){this._debug("Transport",this.getType(),"received websocket message",b,a);for(var c=!1,d=this.convertToMessages(b.data),e=[],f=0;f<d.length;++f){var g=d[f];if((/^\/meta\//.test(g.channel)||void 0!==g.successful)&&g.id){e.push(g.id);var h=k[g.id];h&&(this.clearTimeout(h),delete k[g.id],this._debug("Transport",this.getType(),"removed timeout for message",g.id,", timeouts",k))}"/meta/connect"===g.channel&&(n=!1),"/meta/disconnect"!==g.channel||n||(c=!0)}for(var i=!1,l=0;l<e.length;++l){var m=e[l];for(var p in j){var q=p.split(","),r=org.cometd.Utils.inArray(m,q);if(r>=0){i=!0,q.splice(r,1);var s=j[p][0],t=j[p][1];delete j[p],q.length>0&&(j[q.join(",")]=[s,t]);break}}}i&&this._debug("Transport",this.getType(),"removed envelope, envelopes",j),o.call(this,d),c&&this.webSocketClose(a,1e3,"Disconnect")},f.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b),g=i&&h;for(var c in k)this.clearTimeout(k[c]);k={};for(var d in j){var e=j[d][0],f=j[d][1];f&&(n=!1),e.onFailure(a,e.messages,{websocketCode:b.code,reason:b.reason})}j={},m=null},f.registered=function(a,b){e.registered(a,b),d=b},f.accept=function(a,b,c){return g&&!!org.cometd.WebSocket&&d.websocketEnabled!==!1},f.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect =",b);for(var d=[],e=0;e<a.messages.length;++e){var f=a.messages[e];f.id&&d.push(f.id)}j[d.join(",")]=[a,b],this._debug("Transport",this.getType(),"stored envelope, envelopes",j),c.call(this,m,a,b)},f.webSocketClose=function(a,b,c){try{a.close(b,c)}catch(d){this._debug(d)}},f.abort=function(){if(e.abort(),m){var a={code:1001,reason:"Abort"};this.webSocketClose(m,a.code,a.reason),this.onClose(m,a)}this.reset()},f},org.cometd.Cometd=function(a){function b(a,b){try{return a[b]}catch(c){return void 0}}function c(a){return org.cometd.Utils.isString(a)}function d(a){return void 0===a||null===a?!1:"function"==typeof a}function e(a,b){if(window.console){var c=window.console[a];d(c)&&c.apply(window.console,b)}}function f(a){fa._debug("Configuring cometd object with",a),c(a)&&(a={url:a}),a||(a={}),xa=fa._mixin(!1,xa,a);var b=fa.getURL();if(!b)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var d=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(b),e=d[2],f=d[8],g=d[9];if(ha=fa._isCrossDomain(e),xa.appendMessageTypeToURL)if(void 0!==g&&g.length>0)fa._info("Appending message type to URI "+f+g+" is not supported, disabling 'appendMessageTypeToURL' configuration"),xa.appendMessageTypeToURL=!1;else{var h=f.split("/"),i=h.length-1;f.match(/\/$/)&&(i-=1),h[i].indexOf(".")>=0&&(fa._info("Appending message type to URI "+f+" is not supported, disabling 'appendMessageTypeToURL' configuration"),xa.appendMessageTypeToURL=!1)}}function g(a){if(a){var b=pa[a.channel];b&&b[a.id]&&(delete b[a.id],fa._debug("Removed",a.listener?"listener":"subscription",a))}}function h(a){a&&!a.listener&&g(a)}function i(){for(var a in pa){var b=pa[a];if(b)for(var c=0;c<b.length;++c)h(b[c])}}function j(a){ja!==a&&(fa._debug("Status",ja,"->",a),ja=a)}function k(){return"disconnecting"===ja||"disconnected"===ja}function l(){return++ka}function m(a,b,c,e,f){try{return b.call(a,e)}catch(g){fa._debug("Exception during execution of extension",c,g);var h=fa.onExtensionException;if(d(h)){fa._debug("Invoking extension exception callback",c,g);try{h.call(fa,g,c,f,e)}catch(i){fa._info("Exception during execution of exception callback in extension",c,i)}}return e}}function n(a){for(var b=0;b<sa.length&&(void 0!==a&&null!==a);++b){var c=xa.reverseIncomingExtensions?sa.length-1-b:b,e=sa[c],f=e.extension.incoming;if(d(f)){var g=m(e.extension,f,e.name,a,!1);a=void 0===g?a:g}}return a}function o(a){for(var b=0;b<sa.length&&(void 0!==a&&null!==a);++b){var c=sa[b],e=c.extension.outgoing;if(d(e)){var f=m(c.extension,e,c.name,a,!0);a=void 0===f?a:f}}return a}function p(a,b){var c=pa[a];if(c&&c.length>0)for(var e=0;e<c.length;++e){var f=c[e];if(f)try{f.callback.call(f.scope,b)}catch(g){fa._debug("Exception during notification",f,b,g);var h=fa.onListenerException;if(d(h)){fa._debug("Invoking listener exception callback",f,g);try{h.call(fa,g,f,f.listener,b)}catch(i){fa._info("Exception during execution of listener callback",f,i)}}}}}function q(a,b){p(a,b);for(var c=a.split("/"),d=c.length-1,e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&p(f,b),f+="*",p(f,b)}}function r(){null!==ra&&org.cometd.Utils.clearTimeout(ra),ra=null}function s(a){r();var b=ta.interval+qa;fa._debug("Function scheduled in",b,"ms, interval =",ta.interval,"backoff =",qa,a),ra=org.cometd.Utils.setTimeout(fa,a,b)}function t(a,b,c,e){for(var f=0;f<b.length;++f){var g=b[f],h=""+l();g.id=h,la&&(g.clientId=la);var i=void 0;d(g._callback)&&(i=g._callback,delete g._callback),g=o(g),void 0!==g&&null!==g?(g.id=h,b[f]=g,i&&(ua[h]=i)):b.splice(f--,1)}if(0!==b.length){var j=fa.getURL();xa.appendMessageTypeToURL&&(j.match(/\/$/)||(j+="/"),e&&(j+=e));var k={url:j,sync:a,messages:b,onSuccess:function(a){try{ya.call(fa,a)}catch(b){fa._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c){try{c.connectionType=fa.getTransport().getType(),za.call(fa,a,b,c)}catch(d){fa._debug("Exception during handling of failure",d)}}};fa._debug("Send",k),ca.send(k,c)}}function u(a){ma>0||oa===!0?na.push(a):t(!1,[a],!1)}function v(){qa=0}function w(){qa<xa.maxBackoff&&(qa+=xa.backoffIncrement)}function x(){++ma}function y(){var a=na;na=[],a.length>0&&t(!1,a,!1)}function z(){if(--ma,0>ma)throw"Calls to startBatch() and endBatch() are not paired";0!==ma||k()||oa||y()}function A(){if(!k()){var a={channel:"/meta/connect",connectionType:ca.getType()};wa||(a.advice={timeout:0}),j("connecting"),fa._debug("Connect sent",a),t(!1,[a],!0,"connect"),j("connected")}}function B(){j("connecting"),s(function(){A()})}function C(a){a&&(ta=fa._mixin(!1,{},xa.advice,a),fa._debug("New advice",ta))}function D(a){r(),a&&ca.abort(),la=null,j("disconnected"),ma=0,v(),ca=null,na.length>0&&(za.call(fa,void 0,na,{reason:"Disconnected"}),na=[])}function E(a,b,c){var e=fa.onTransportFailure;if(d(e)){fa._debug("Invoking transport failure callback",a,b,c);try{e.call(fa,a,b,c)}catch(f){fa._info("Exception during execution of transport failure callback",f)}}}function F(a,b){d(a)&&(b=a,a=void 0),la=null,i(),k()?(ia.reset(),C(xa.advice)):C(fa._mixin(!1,ta,{reconnect:"retry"})),ma=0,oa=!0,da=a,ea=b;var c="1.0",e=fa.getURL(),f=ia.findTransportTypes(c,ha,e),g={version:c,minimumVersion:c,channel:"/meta/handshake",supportedConnectionTypes:f,_callback:b,advice:{timeout:ta.timeout,interval:ta.interval}},h=fa._mixin(!1,{},da,g);if(!ca&&(ca=ia.negotiateTransport(f,c,ha,e),!ca)){var l="Could not find initial transport among: "+ia.getTransportTypes();throw fa._warn(l),l}fa._debug("Initial transport is",ca.getType()),j("handshaking"),fa._debug("Handshake sent",h),t(!1,[h],!1,"handshake")}function G(){j("handshaking"),oa=!0,s(function(){F(da,ea)})}function H(a){var b=ua[a.id];d(b)&&(delete ua[a.id],b.call(fa,a))}function I(a){H(a),q("/meta/handshake",a),q("/meta/unsuccessful",a);var b=!k()&&"none"!==ta.reconnect;b?(w(),G()):D(!1)}function J(a){if(a.successful){la=a.clientId;var b=fa.getURL(),c=ia.negotiateTransport(a.supportedConnectionTypes,a.version,ha,b);if(null===c){var d="Could not negotiate transport with server; client=["+ia.findTransportTypes(a.version,ha,b)+"], server=["+a.supportedConnectionTypes+"]",e=fa.getTransport();return E(e.getType(),null,{reason:d,connectionType:e.getType(),transport:e}),fa._warn(d),void D(!0)}ca!==c&&(fa._debug("Transport",ca.getType(),"->",c.getType()),ca=c),oa=!1,y(),a.reestablish=va,va=!0,H(a),q("/meta/handshake",a);var f=k()?"none":ta.reconnect;switch(f){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+f}}else I(a)}function K(a){var b="1.0",c=fa.getURL(),d=fa.getTransport(),e=ia.findTransportTypes(b,ha,c),f=ia.negotiateTransport(e,b,ha,c);f?(fa._debug("Transport",d.getType(),"->",f.getType()),E(d.getType(),f.getType(),a.failure),I(a),ca=f):(E(d.getType(),null,a.failure),fa._warn("Could not negotiate transport; client=["+e+"]"),D(!0),I(a))}function L(a){q("/meta/connect",a),q("/meta/unsuccessful",a);var b=k()?"none":ta.reconnect;switch(b){case"retry":B(),w();break;case"handshake":ia.reset(),v(),G();break;case"none":D(!1);break;default:throw"Unrecognized advice action"+b}}function M(a){if(wa=a.successful){q("/meta/connect",a);var b=k()?"none":ta.reconnect;switch(b){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+b}}else L(a)}function N(a){wa=!1,L(a)}function O(a){D(!0),H(a),q("/meta/disconnect",a),q("/meta/unsuccessful",a)}function P(a){a.successful?(D(!1),H(a),q("/meta/disconnect",a)):O(a)}function Q(a){O(a)}function R(a){var b=pa[a.subscription];if(b)for(var c=b.length-1;c>=0;--c){var d=b[c];if(d&&!d.listener){delete b[c],fa._debug("Removed failed subscription",d);break}}H(a),q("/meta/subscribe",a),q("/meta/unsuccessful",a)}function S(a){a.successful?(H(a),q("/meta/subscribe",a)):R(a)}function T(a){R(a)}function U(a){H(a),q("/meta/unsubscribe",a),q("/meta/unsuccessful",a)}function V(a){a.successful?(H(a),q("/meta/unsubscribe",a)):U(a)}function W(a){U(a)}function X(a){H(a),q("/meta/publish",a),q("/meta/unsuccessful",a)}function Y(a){void 0===a.successful?void 0!==a.data?q(a.channel,a):fa._warn("Unknown Bayeux Message",a):a.successful?(H(a),q("/meta/publish",a)):X(a)}function Z(a){X(a)}function $(a){if(a=n(a),void 0!==a&&null!==a){C(a.advice);var b=a.channel;switch(b){case"/meta/handshake":J(a);break;case"/meta/connect":M(a);break;case"/meta/disconnect":P(a);break;case"/meta/subscribe":S(a);break;case"/meta/unsubscribe":V(a);break;default:Y(a)}}}function _(a){var b=pa[a];if(b)for(var c=0;c<b.length;++c)if(b[c])return!0;return!1}function aa(a,b){var e={scope:a,method:b};if(d(a))e.scope=void 0,e.method=a;else if(c(b)){if(!a)throw"Invalid scope "+a;if(e.method=a[b],!d(e.method))throw"Invalid callback "+b+" for scope "+a}else if(!d(b))throw"Invalid callback "+b;return e}function ba(a,b,c,d){var e=aa(b,c);fa._debug("Adding",d?"listener":"subscription","on",a,"with scope",e.scope,"and callback",e.method);var f={channel:a,scope:e.scope,callback:e.method,listener:d},g=pa[a];return g||(g=[],pa[a]=g),f.id=g.push(f)-1,fa._debug("Added",d?"listener":"subscription",f),f[0]=a,f[1]=f.id,f}var ca,da,ea,fa=this,ga=a||"default",ha=!1,ia=new org.cometd.TransportRegistry,ja="disconnected",ka=0,la=null,ma=0,na=[],oa=!1,pa={},qa=0,ra=null,sa=[],ta={},ua={},va=!1,wa=!1,xa={protocol:null,stickyReconnect:!0,connectTimeout:0,maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=function(a,c,d){for(var e=c||{},f=2;f<arguments.length;++f){var g=arguments[f];if(void 0!==g&&null!==g)for(var h in g){var i=b(g,h),j=b(e,h);if(i!==c&&void 0!==i)if(a&&"object"==typeof i&&null!==i)if(i instanceof Array)e[h]=this._mixin(a,j instanceof Array?j:[],i);else{var k="object"!=typeof j||j instanceof Array?{}:j;e[h]=this._mixin(a,k,i)}else e[h]=i}}return e},this._warn=function(){e("warn",arguments)},this._info=function(){"warn"!==xa.logLevel&&e("info",arguments)},this._debug=function(){"debug"===xa.logLevel&&e("debug",arguments)},this._isCrossDomain=function(a){return a&&a!==window.location.host};var ya,za;this.send=u,this.receive=$,ya=function(a){fa._debug("Received",a);for(var b=0;b<a.length;++b){var c=a[b];$(c)}},za=function(a,b,c){fa._debug("handleFailure",a,b,c),c.transport=a;for(var d=0;d<b.length;++d){var e=b[d],f={id:e.id,successful:!1,channel:e.channel,failure:c};switch(c.message=e,e.channel){case"/meta/handshake":K(f);break;case"/meta/connect":N(f);break;case"/meta/disconnect":Q(f);break;case"/meta/subscribe":f.subscription=e.subscription,T(f);break;case"/meta/unsubscribe":f.subscription=e.subscription,W(f);break;default:Z(f)}}},this.registerTransport=function(a,b,c){var e=ia.add(a,b,c);return e&&(this._debug("Registered transport",a),d(b.registered)&&b.registered(a,this)),e},this.getTransportTypes=function(){return ia.getTransportTypes()},this.unregisterTransport=function(a){var b=ia.remove(a);return null!==b&&(this._debug("Unregistered transport",a),d(b.unregistered)&&b.unregistered()),b},this.unregisterTransports=function(){ia.clear()},this.findTransport=function(a){return ia.find(a)},this.configure=function(a){f.call(this,a)},this.init=function(a,b){this.configure(a),this.handshake(b)},this.handshake=function(a,b){j("disconnected"),va=!1,F(a,b)},this.disconnect=function(a,b,c){if(!k()){"boolean"!=typeof a&&(c=b,b=a,a=!1),d(b)&&(c=b,b=void 0);var e={channel:"/meta/disconnect",_callback:c},f=this._mixin(!1,{},b,e);j("disconnecting"),t(a===!0,[f],!1,"disconnect")}},this.startBatch=function(){x()},this.endBatch=function(){z()},this.batch=function(a,b){var c=aa(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._info("Exception during execution of batch",d),this.endBatch(),d}},this.addListener=function(a,b,d){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";return ba(a,b,d,!0)},this.removeListener=function(a){if(!(a&&a.channel&&"id"in a))throw"Invalid argument: expected subscription, not "+a;g(a)},this.clearListeners=function(){pa={}},this.subscribe=function(a,b,e,f,g){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(k())throw"Illegal state: already disconnected";d(b)&&(g=f,f=e,e=b,b=void 0),d(f)&&(g=f,f=void 0);var h=!_(a),i=ba(a,b,e,!1);if(h){var j={channel:"/meta/subscribe",subscription:a,_callback:g},l=this._mixin(!1,{},f,j);u(l)}return i},this.unsubscribe=function(a,b,c){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(k())throw"Illegal state: already disconnected";d(b)&&(c=b,b=void 0),this.removeListener(a);var e=a.channel;if(!_(e)){var f={channel:"/meta/unsubscribe",subscription:e,_callback:c},g=this._mixin(!1,{},b,f);u(g)}},this.resubscribe=function(a,b){return h(a),a?this.subscribe(a.channel,a.scope,a.callback,b):void 0},this.clearSubscriptions=function(){i()},this.publish=function(a,b,e,f){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!c(a))throw"Illegal argument type: channel must be a string";if(/^\/meta\//.test(a))throw"Illegal argument: cannot publish to meta channels";if(k())throw"Illegal state: already disconnected";d(b)?(f=b,b=e={}):d(e)&&(f=e,e={});var g={channel:a,data:b,_callback:f},h=this._mixin(!1,{},e,g);u(h)},this.getStatus=function(){return ja},this.isDisconnected=k,this.setBackoffIncrement=function(a){xa.backoffIncrement=a},this.getBackoffIncrement=function(){return xa.backoffIncrement},this.getBackoffPeriod=function(){return qa},this.setLogLevel=function(a){xa.logLevel=a},this.registerExtension=function(a,b){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!c(a))throw"Illegal argument type: extension name must be a string";for(var e=!1,f=0;f<sa.length;++f){var g=sa[f];if(g.name===a){e=!0;break}}return e?(this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1):(sa.push({name:a,extension:b}),this._debug("Registered extension",a),d(b.registered)&&b.registered(a,this),!0)},this.unregisterExtension=function(a){if(!c(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,e=0;e<sa.length;++e){var f=sa[e];if(f.name===a){sa.splice(e,1),b=!0,this._debug("Unregistered extension",a);var g=f.extension;d(g.unregistered)&&g.unregistered();break}}return b},this.getExtension=function(a){for(var b=0;b<sa.length;++b){var c=sa[b];if(c.name===a)return c.extension}return null},this.getName=function(){return ga},this.getClientId=function(){return la},this.getURL=function(){if(ca&&"object"==typeof xa.urls){var a=xa.urls[ca.getType()];if(a)return a}return xa.url},this.getTransport=function(){return ca},this.getConfiguration=function(){return this._mixin(!0,{},xa)},this.getAdvice=function(){return this._mixin(!0,{},ta)},org.cometd.WebSocket=window.WebSocket,org.cometd.WebSocket||(org.cometd.WebSocket=window.MozWebSocket)},"function"==typeof define&&define.amd&&define("org/cometd",[],function(){return org.cometd}),function(){function a(a,b,c){function d(a,b){if(b)for(var c in b)"content-type"!==c.toLowerCase()&&a.setRequestHeader(c,b[c])}function e(){var c=new b.LongPollingTransport,e=b.Transport.derive(c);return e.xhrSend=function(b){return a.ajax({url:b.url,async:b.sync!==!0,type:"POST",contentType:"application/json;charset=UTF-8",data:b.body,xhrFields:{withCredentials:!0},beforeSend:function(a){return d(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}function f(){var c=new b.CallbackPollingTransport,e=b.Transport.derive(c);return e.jsonpSend=function(b){a.ajax({url:b.url,async:b.sync!==!0,type:"GET",dataType:"jsonp",jsonp:"jsonp",data:{message:b.body},beforeSend:function(a){return d(a,b.headers),!0},success:b.onSuccess,error:function(a,c,d){b.onError(c,d)}})},e}return b.JSON.toJSON=c.stringify,b.JSON.fromJSON=c.parse,a.Cometd=function(a){var c=new b.Cometd(a);return b.WebSocket&&c.registerTransport("websocket",new b.WebSocketTransport),c.registerTransport("long-polling",new e),c.registerTransport("callback-polling",new f),c},a.cometd=new a.Cometd,a.cometd}"function"==typeof define&&define.amd?define("jquery.cometd",["jquery","org/cometd","json"],a):a(jQuery,org.cometd,JSON)}(),define("cb/transport/PostMessageTransport",["jquery","underscore","json","util","org/cometd","jquery.cometd","cb/lib/jquery.service-nodes"],function(a,b,c,d){"use strict";function e(){function e(){var c=(new a.Cometd).findTransport("callback-polling");return c.transportSuccess=b.bind(q.transportSuccess,q),c.transportFailure=b.bind(q.transportFailure,q),c}function i(){return s.length?s.pop():n()}function j(a){var b=a.sender;f?s.push(b):(b.$iframe.remove(),b.$form.remove()),delete r[a.request.id]}function k(b,c,d){a("<input/>",{type:"hidden",name:c,value:d}).cbMarkNode().appendTo(b)}function l(a,e){var f,g=i(),h=g.$iframe,j=g.$form;o||(f=document.createElement("a"),f.href=a.url,o=u(f),d.log("Set postMessage origin to "+o)),j.empty(),j.attr("action",a.url),j.attr("target",h.prop("name")),b.each(a.messages,function(a){k(j,"message",c.stringify(a))}),k(j,"id",e.id),k(j,"targetOrigin",v),r[e.id]={envelope:a,request:e,sender:g},j.submit()}function m(a,b){var c=org.cometd.JSON.toJSON(a.messages);c.length<=h&&a.url.length+encodeURI(c).length<=h?t.transportSend(a,b):l(a,b)}var n,o,p=new org.cometd.RequestTransport,q=org.cometd.Transport.derive(p),r={},s=[],t=e(),u=function(a){return a.protocol+"//"+a.hostname+(a.port?":"+a.port:"")},v=u(document.location);return a(window).on("message",function(a){if(a.originalEvent.origin!==o)return!0;var b,d=c.parse(a.originalEvent.data),e=d.id,f=d.messages,g=r[e],h=g.envelope,i=g.request,k=!1;q._debug("Transport",q.getType(),"received response",f);try{b=q.convertToMessages(f),0===b.length?q.transportFailure(h,i,"no response",null):(k=!0,q.transportSuccess(h,i,b))}catch(l){q._debug(l),k||q.transportFailure(h,i,"bad response",l)}finally{j(g)}}),q.accept=function(){return!0},n=function(){var b=0;return function(){var c=a("<iframe />",{name:"_cbIframe_"+ ++b,css:{display:"none"}}).cbMarkNode().appendTo(document.body),d=a("<form />",{method:"POST","accept-charset":"utf-8",css:{display:"none"}}).cbMarkNode().appendTo(document.body);return{$iframe:c,$form:d}}}(),q.transportSend=g?m:l,q.reset=function(){p.reset(),t.reset()},q}var f=Boolean(Number(d.getUrlVar("ifrPool"))),g=!Boolean(Number(d.getUrlVar("no-jsonp"))),h=2e3;return e}),define("cb/transport/cometdWrapper",["jquery","underscore","util","cb/transport/PostMessageTransport","jquery.cometd"],function(a,b,c,d,e){"use strict";function f(){return e.unregisterTransport("callback-polling"),e.registerTransport("postmessage-polling",new d),e}return f}),function(a,b){"undefined"!=typeof exports?b(a,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=f.push,h=f.slice,i=f.splice;b.VERSION="0.9.10",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var j=/\s+/,k=function(a,b,c,d){if(!c)return!0;if("object"==typeof c)for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else{if(!j.test(c))return!0;for(var f=c.split(j),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d))}},l=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},m=b.Events={on:function(a,b,c){if(!k(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!k(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d),this},off:function(a,b,d){var e,f,g,h,i,j,l,m;if(!this._events||!k(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;for(h=a?[a]:c.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],e=this._events[a]){if(g=[],b||d)for(l=0,m=e.length;m>l;l++)f=e[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&g.push(f);this._events[a]=g}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!k(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&l(c,b),d&&l(d,arguments),this},listenTo:function(a,b,d){var e=this._listeners||(this._listeners={}),f=a._listenerId||(a._listenerId=c.uniqueId("l"));return e[f]=a,a.on(b,"object"==typeof b?this:d,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"==typeof b?this:c,this),b||c||delete d[a._listenerId];else{"object"==typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};m.bind=m.on,m.unbind=m.off,c.extend(b,m);var n=b.Model=function(a,b){var d,e=a||{};this.cid=c.uniqueId("c"),this.attributes={},b&&b.collection&&(this.collection=b.collection),b&&b.parse&&(e=this.parse(e,b)||{}),(d=c.result(this,"defaults"))&&(e=c.defaults({},e,d)),this.set(e,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(n.prototype,m,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=!0);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){return a.set(a.parse(c,d),d)?void(b&&b(a,c,d)):!1},this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h,i=this.attributes;return null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,!e||d&&d.wait||this.set(e,d)?(d=c.extend({validate:!0},d),this._validate(e,d)?(e&&d.wait&&(this.attributes=c.extend({},i,e)),void 0===d.parse&&(d.parse=!0),f=d.success,d.success=function(a,b,d){a.attributes=i;var g=a.parse(b,d);return d.wait&&(g=c.extend(e||{},g)),c.isObject(g)&&!a.set(g,d)?!1:void(f&&f(a,b,d))},g=this.isNew()?"create":d.patch?"patch":"update","patch"===g&&(d.attrs=e),h=this.sync(g,this,d),e&&d.wait&&(this.attributes=i),h):!1):!1},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){
b.trigger("destroy",b,b.collection,a)};if(a.success=function(a,b,c){(c.wait||a.isNew())&&e(),d&&d(a,b,c)},this.isNew())return a.success(this,null,a),!1;var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||G();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,b||{}),!1):!0}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))};c.extend(o.prototype,m,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,h,j,k,l,m,n,o;for(l=[],m=b.at,n=this.comparator&&null==m&&0!=b.sort,o=c.isString(this.comparator)?this.comparator:null,d=0,e=a.length;e>d;d++)(f=this._prepareModel(h=a[d],b))?(j=this.get(f))?b.merge&&(j.set(h===f?f.attributes:h,b),n&&!k&&j.hasChanged(o)&&(k=!0)):(l.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f)):this.trigger("invalid",this,h,b);if(l.length&&(n&&(k=!0),this.length+=l.length,null!=m?i.apply(this.models,[m,0].concat(l)):g.apply(this.models,l)),k&&this.sort({silent:!0}),b.silent)return this;for(d=0,e=l.length;e>d;d++)(f=l[d]).trigger("add",f,this,b);return k&&this.trigger("sort",this,b),this},remove:function(a,b){a=c.isArray(a)?a.slice():[a],b||(b={});var d,e,f,g;for(d=0,e=a.length;e>d;d++)g=this.get(a[d]),g&&(delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g));return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:this.length},b)),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a])},at:function(a){return this.models[a]},where:function(a){return c.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},update:function(a,b){b=c.extend({add:!0,merge:!0,remove:!0},b),b.parse&&(a=this.parse(a,b));var d,e,f,g,h=[],i=[],j={};if(c.isArray(a)||(a=a?[a]:[]),b.add&&!b.remove)return this.add(a,b);for(e=0,f=a.length;f>e;e++)d=a[e],g=this.get(d),b.remove&&g&&(j[g.cid]=!0),(b.add&&!g||b.merge&&g)&&h.push(d);if(b.remove)for(e=0,f=this.models.length;f>e;e++)d=this.models[e],j[d.cid]||i.push(d);return i.length&&this.remove(i,b),h.length&&this.add(h,b),this},reset:function(a,b){b||(b={}),b.parse&&(a=this.parse(a,b));for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d]);return b.previousModels=this.models.slice(),this._reset(),a&&this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success;return a.success=function(a,c,d){var e=d.update?"update":"reset";a[e](c,d),b&&b(a,c,d)},this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,b,c){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={}),b.collection=this;var c=new this.model(a,b);return c._validate(a,b)?c:!1},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))},sortedIndex:function(a,b,d){b||(b=this.comparator);var e=c.isFunction(b)?b:function(a){return a.get(b)};return c.sortedIndex(this.models,a,e,d)}});var p=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];c.each(p,function(a){o.prototype[a]=function(){var b=h.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var q=["groupBy","countBy","sortBy"];c.each(q,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var r=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},s=/\((.*?)\)/g,t=/(\(\?)?:\w+/g,u=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(r.prototype,m,{initialize:function(){},route:function(a,d,e){return c.isRegExp(a)||(a=this._routeToRegExp(a)),e||(e=this[d]),b.history.route(a,c.bind(function(c){var f=this._extractParameters(a,c);e&&e.apply(this,f),this.trigger.apply(this,["route:"+d].concat(f)),this.trigger("route",d,f),b.history.trigger("route",this,d,f)},this)),this},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes)for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])},_routeToRegExp:function(a){return a=a.replace(v,"\\$&").replace(s,"(?:$1)?").replace(t,function(a,b){return b?a:"([^/]+)"}).replace(u,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var w=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,y=/^\/+|\/+$/g,z=/msie [\w.]+/,A=/\/$/;w.started=!1,c.extend(w.prototype,m,{interval:50,getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(A,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(x,"")},start:function(a){if(w.started)throw new Error("Backbone.history has already been started");w.started=!0,this.options=c.extend({},{root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=z.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);this.root=("/"+this.root+"/").replace(y,"/"),f&&this._wantsHashChange&&(this.iframe=b.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(d)),this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var g=this.location,h=g.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+g.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),w.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(a){var b=this.fragment=this.getFragment(a),d=c.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0});return d},navigate:function(a,b){if(!w.started)return!1;if(b&&b!==!0||(b={trigger:b}),a=this.getFragment(a||""),this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new w;var B=b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},C=/^(\S+)\s*(.*)$/,D=["model","collection","el","id","attributes","className","tagName","events"];c.extend(B.prototype,m,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=c.result(this,"events"))){this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),!d)throw new Error('Method "'+a[b]+'" does not exist');var e=b.match(C),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=c.extend({},c.result(this,"options"),a)),c.extend(this,c.pick(a,D)),this.options=a},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}});var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.sync=function(a,d,e){var f=E[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||G()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.success;e.success=function(a){i&&i(d,a,e),d.trigger("sync",d,a,e)};var j=e.error;e.error=function(a){j&&j(d,a,e),d.trigger("error",d,a,e)};var k=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,k,e),k},b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var F=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};n.extend=o.extend=r.extend=B.extend=w.extend=F;var G=function(){throw new Error('A "url" property or function must be specified')};return b}),define("cb/session",["jquery","underscore","backbone","json","util","cb/constants"],function(a,b,c,d,e,f){"use strict";var g,h,i,j="genesys.cb.session";return g=c.Model.extend({idAttribute:"userId"}),h=c.Collection.extend({model:g}),i=c.Model.extend({idAttribute:"sessionToken",defaults:{mode:f.modes.POINTER,writeModeAllowed:!0},initialize:function(){var a,c=this.getFromStorage();e.log("INITIALIZING SESSION, STORED: ",c),b.bindAll(this),this.users=new h,this.on("change",this.tearDownIfCleared),c&&(this.removeFromStorage(),a=c.users||[],a&&delete c.users,this.set(c),e.log("SESSION RESTORED 1ST LEVEL PROPS",c)),a&&a.length&&(this.users.reset(a),e.log("SESSION RESTORED USERS",a))},tearDownIfCleared:function(b,c){c.unset&&(this.removeFromStorage(),a(window).off("unload.gcbSession beforeunload.gcbSession"))},removeFromStorage:function(){return e.log("REMOVING SESSION FROM STORAGE"),e.removeRootDomainCookie(j)},getFromStorage:function(){return a.cookie(j)&&d.parse(a.cookie(j))},store:function(){if(this.exists()){var b=this.serialize();e.setRootDomainCookie(j,d.stringify(b)),e.log("SAVED SESSION TO COOKIE: ",a.cookie(j))}},serialize:function(){var a=this.toJSON();return a.users=this.users.toJSON(),a},serializeForApi:function(){var a={token:this.get("sessionToken"),mode:{pointer:this.get("mode")===f.modes.POINTER,write:this.get("mode")===f.modes.WRITE}};return a.agents=this.users.map(function(){return{}}),a},exists:function(){return this.get("sessionToken")&&this.get("userToken")},handleJoinRequest:function(a){var c=this,d=a.userToken,e=a.users;return d&&e?(c.set(b.extend(this.defaults,{userToken:d,writeModeAllowed:!!a.writeModeAllowed})),c.users.reset(e),a.userId&&c.set({userId:a.userId}),!0):!1},activate:function(){a(window).on("unload.gcbSession beforeunload.gcbSession",this.store)},set:function(){try{return c.Model.prototype.set.apply(this,arguments)}catch(a){e.log('EXCEPTION WHEN DOING "SET" ON SESSION: ',a.number,a)}}}),function(){var a;return{createInstance:function(){return a=new i},getInstance:function(){if(!a)throw new Error("Session instance is not created yet");return a}}}()}),function(){function a(a){return a.COOKIE||(a.COOKIE={},a.COOKIE.set=function(a,b,c){throw"Abstract"},a.COOKIE.get=function(a){throw"Abstract"}),a.ReloadExtension=function(b){function c(b){if(h&&null!==h.handshakeResponse){e(b),h.cookiePath=j;var c=a.JSON.toJSON(h);g("Reload extension saving cookie value",c),a.COOKIE.set(i,c,{"max-age":k,path:j,expires:new Date((new Date).getTime()+1e3*k)})}}function d(a){return h.url==a.url}function e(a){a&&("number"==typeof a.cookieMaxAge&&(k=a.cookieMaxAge),"string"==typeof a.cookieName&&(i=a.cookieName),"string"==typeof a.cookiePath&&(j=a.cookiePath))}var f,g,h=null,i="org.cometd.reload",j="/",k=5,l=!1;this.configure=e,this.registered=function(a,b){f=b,f.reload=c,g=f._debug},this.unregistered=function(){delete f.reload,f=null},this.outgoing=function(b){switch(b.channel){case"/meta/handshake":h={},h.url=f.getURL();var c=a.COOKIE.get(i);if(g("Reload extension found cookie value",c),c)try{var e=a.JSON.fromJSON(c);if(a.COOKIE.set(i,"",{"max-age":-1,path:e.cookiePath,expires:-1}),e.handshakeResponse&&d(e))return g("Reload extension restoring state",e),setTimeout(function(){g("Reload extension replaying handshake response",e.handshakeResponse),h.handshakeResponse=e.handshakeResponse,h.transportType=e.transportType,h.reloading=!0;var a=f._mixin(!0,{},h.handshakeResponse,{ext:{reload:!0}});a.supportedConnectionTypes=[h.transportType],f.receive(a),g("Reload extension replayed handshake response",a)},0),l||(l=!0,f.startBatch()),null;g("Reload extension could not restore state",e)}catch(j){g("Reload extension error while trying to restore cookie",j)}break;case"/meta/connect":h.transportType||(h.transportType=b.connectionType,g("Reload extension tracked transport type",h.transportType));break;case"/meta/disconnect":h=null}return b},this.incoming=function(a){if(a.successful)switch(a.channel){case"/meta/handshake":h.handshakeResponse||(h.handshakeResponse=a,g("Reload extension tracked handshake response",a));break;case"/meta/disconnect":h=null;break;case"/meta/connect":l&&(f.endBatch(),l=!1)}return a},e(b)}}"function"==typeof define&&define.amd?define("org/cometd/ReloadExtension",["org/cometd"],a):a(org.cometd)}(),define("jquery.cometd-reload",["jquery","org/cometd","org/cometd/ReloadExtension","util","jquery.cookie"],function(a,b,c,d){"use strict";return function(e){a.cookie&&(b.COOKIE.set=d.setRootDomainCookie,b.COOKIE.get=a.cookie);var f=new c(e),g=f.outgoing;return f.outgoing=function(a){return"/meta/disconnect"===a.channel&&(d.log("CLEANING RELOAD EXTENSION STATE ON DISCONNECT ATTEMPT",a),f.incoming({channel:a.channel,successful:!0})),g(a)},f}}),define("cb/transport/clients/coreSessionClient",["jquery","underscore","../cometdWrapper","signals","util","cb/constants","cb/session","support","jquery.cometd-reload"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(j){function n(a){e.log("COMETD URL IS SET TO: "+a),I=a}function o(){var b,d={url:I,logLevel:P.logLevel||f.cometDLogLevel.WARN,maxNetworkDelay:P.maxNetworkDelay||f.COMETD_MAX_NETWORK_DELAY,connectTimeout:P.connectTimeout,maxConnections:6,autoBatch:!0};return e.log("COMETD CONFIG EXTENDED WITH OPTIONS: ",P),b=new c,b.configure(d),j.disableWebSockets&&(e.log("cobrowse: disabling websocket transport according to config"),b.unregisterTransport("websocket")),b.onListenerException=r,b.addListener(k.META_CONNECT,q),b.addListener(k.SESSION_DEACTIVATED,function(a){var b,c=a.data;e.log('GOT "SESSION DEACTIVATED" MESSAGE. DISCONNECTING. RECEIVED DATA FROM SERVER: ',c),G().disconnect(),c&&c.deactivationReason&&(b=c.deactivationReason),w({reason:p(b)})}),b.registerExtension("reload",new i),b.getExtension("reload").configure({cookieMaxAge:O,cookieName:f.RELOAD_EXTENSION_COOKIE_NAME}),e.log("ReloadExtension cookie lifetime is set to: "+O+" seconds"),a(window).on("unload.gcb beforeunload.gcb",function(){b.reload()}),b}function p(a){var b={};return b[m.NONE]=l.UNKNOWN_REASON,b[m.TIMEOUT_INACTIVE]=l.INACTIVITY_TIMEOUT,b[m.STOPPED_BY_USER]=l.EXTERNAL,b[m.DISCONNECTED_USER]=l.EXTERNAL,b[m.SESSIONS_OVER_LIMIT]=l.SESSIONS_OVER_LIMIT,b[a]||l.UNKNOWN_REASON}function q(a){var b,c=G();c.isDisconnected()&&(M=!1,e.log("CometD connection closed")),b=M,M=a.successful===!0,!b&&M?e.log("CometD connection established"):b&&!M&&e.log("CometD connection broken")}function r(a,b,c,d){e.log("COMETD LISTENER EXCEPTION: ",a,", HANDLE: ",b,", IS LISTENER: ",c,", MESSAGE: ",d),e.log(a.stack),L.caughtException.dispatch(a,b,c,d)}function s(a,c,d){var e={sessionToken:a,role:c};h.longStylesheets||(e.chunkCss=!0),G().publish(k.SESSION_JOIN,e,function(a){var c=a.data||{};c.userToken&&t(c.userToken),b.defer(function(){d(c)})})}function t(a){F=a}function u(a){var c;G().batch(null,function(){b.each(a,function(a,b){c=G().addListener(b,a),"/meta/handshake"===b&&N.push(c)})})}function v(a){K.done(function(){u(a)})}function w(a){var c=a.reason;c||(e.log("Missing deactivation reason while handling disconnection, ending with UNKNOWN_REASON"),c=l.UNKNOWN_REASON),e.log("SESSION ENDED, MESSAGE: ",a),C(),b.defer(function(){J.clear();try{L.disconnected.dispatch({reason:c})}catch(a){e.log("EXCEPTION WHILE DISCONNECTING ",a.number,a)}})}function x(){G().disconnect(),w({reason:l.TIMEOUT})}function y(){return G().isDisconnected()}function z(a,b,c){if(y())return void e.log("NOT PUBLISHING, ALREADY DISCONNECTED ",a,b);if(!F)throw new Error("Trying to publish authorized message without user token");b.userToken=F,G().publish(a,b,function(a){a.successful||e.log("WARN: COULD NOT DELIVER MESSAGE ON CHANNEL "+a.channel+": ",a.failure&&a.failure.reason),c&&c(a)})}function A(a,b,c){G().publish(a,b,c)}function B(){G().handshake({})}function C(){b.each(N,function(a){G().removeListener(a)}),N=[]}function D(a){y()?(e.log("ALREADY DISCONNECTED, QUITTING"),w({reason:a||l.SELF})):(e.log("SENDING EXIT COMMAND"),G().publish(k.SESSION_EXIT,{userToken:F},function(){e.log("EXIT COMMAND EXECUTED. DISCONNECTING NOW"),G().disconnect(),w({reason:a||l.SELF})}))}function E(){return{addListeners:v,publish:H.publishAuthorized}}var F,G,H=this,I=j.cometdUrl,J=g.getInstance(),K=a.Deferred(),L={connected:new d,disconnected:new d,caughtException:new d},M=!1,N=[],O=j.maxOfflineDuration,P=j.cometdConfig||{};G=function(){var a;return function(){return a||(a=o()),a}}(),L.connected.memorize=!0,L.connected.add(K.resolve),b.extend(H,{on:L,handshake:B,publishAuthorized:z,publishRaw:A,joinSession:s,addListeners:u,disconnect:D,timeout:x,getCoreClient:E,setUserToken:t,setCometdUrl:n})}var k=f.channels,l=f.sessionEndTriggers,m=f.deactivationReasonsFromServer;return j}),define("cb/transport/clients/masterSessionClient",["underscore","util","URI","./coreSessionClient","cb/constants","cb/session"],function(a,b,c,d,e,f){"use strict";function g(g,i){function j(a){if(b.log("SOMEONE JOINED THE SESSION",a),!a.data.userId)throw new Error("Did not get valid user id from server");s.users.add(a.data)}function k(a){return!a.ext||!a.ext.reload}function l(a){if(!a.successful)return void b.log("UNSUCCESSFUL HANDSHAKE: ",a);if(b.log("SUCCESSFUL HANDSHAKE: ",a),!t&&k(a))return b.log('"Real" handshake is not allowed on continued session'),void p.timeout();if(t&&!k(a))throw new Error("ReloadExtension handshake was replayed on a new session");t?(b.log("JOINING NEW SESSION ",q),p.joinSession(q,e.userRoles.MASTER,function(a){a.userToken?(s.handleJoinRequest(a),b.log("NEW USER TOKEN ASSIGNED: ",a.userToken),b.log("WRITE MODE IS ALLOWED?: ",!!a.writeModeAllowed),b.log("JOIN REQUEST: ",a),m({newSession:!0}),t=!1):(b.log("WARN: FAILED TO JOIN THE SESSION: ",a),p.disconnect(e.sessionEndTriggers.ERROR))})):m({newSession:!1})}function m(a){try{p.on.connected.dispatch(a)}catch(c){b.log('EXCEPTION IN "CONNECTED" HANDLER',c.number,c)}}function n(){var a=i.serverAvailabilityTimeout;p.addListeners(u),s.exists()?(b.log("CONTINUE SESSION: "+s.get("sessionToken"),", USER TOKEN: "+s.get("userToken")),t=!1,p.setUserToken(s.get("userToken")),p.handshake()):(t=!0,b.log("Sending REST request to create session (timeout is "+a+")..."),g.get(e.LIVE_SESSIONS_REST_RESOURCE+"create",{timeout:a}).done(function(a){b.log("REST session create response",a),b.log("Server name",a.sessionServerName),p.handshake(),q=a.sessionToken,s.set({sessionToken:q}),b.log("NEW SESSION ASSIGNED: "+q)}).fail(function(a,c){b.log('REST request failed: "'+c+'"'),p.disconnect(e.sessionEndTriggers.SERVER_UNAVAILABLE)}))}var o,p,q,r=this,s=f.getInstance(),t=!0,u={};o=new c(i.cometdUrl),i.apikey&&(b.log("APIKEY PROVIDED, ADDING TO COMETD URL: ?apikey="+i.apikey),o.addSearch("apikey",i.apikey)),p=new d({cometdUrl:o.href(),maxOfflineDuration:i.maxOfflineDuration,disableWebSockets:i.disableWebSockets,cometdConfig:i.cometdConfig}),u[h.META_HANDSHAKE]=l,u[h.SESSION_JOINED]=j,p.on.caughtException.add(function(){p.disconnect(e.sessionEndTriggers.ERROR)}),a.extend(r,{on:p.on,connect:n,disconnect:p.disconnect,getCoreClient:p.getCoreClient,publishRaw:p.publishRaw})}var h=e.channels;return g}),define("cb/transport/clients/masterWindowClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){b.log("GOT WINDOW CONTROL COMMAND, ",a.data,a),l.windowCommandReceived.dispatch(a.data.command)}function g(a){b.log("GOT WINDOW NAVIGATE ATTEMPT, ",a.data.url,a),l.navigateAttemptReceived.dispatch(a.data.userId,a.data.url)}function h(a){b.log("ABOUT TO PUBLISH WINDOW SIZE: ",a),d.publish(f.WINDOW_SIZE,a)}function i(a,b){var c={url:a,targetUsersIds:b,allowed:!0};d.publish(f.WINDOW_NAVIGATE,c)}function j(a,b){d.publish(f.WINDOW_NAVIGATE_DENIAL,{targetUsersIds:[a],url:b})}var k=this,l={windowCommandReceived:new c,navigateAttemptReceived:new c},m={};m[f.WINDOW_CONTROL]=e,m[f.WINDOW_NAVIGATE_ATTEMPT]=g,d.addListeners(m),a.extend(k,{on:l,publishWindowSize:h,publishUrl:i,publishNavigateDenial:j})}var f=d.channels;return e}),define("cb/transport/clients/masterModeClient",["underscore","util","signals","cb/constants"],function(a,b,c,d){"use strict";function e(d){function e(a){var c=a.data.mode;if(b.log("GOT MODE COMMAND ",a.data),c===g)n.downgraded.dispatch();else{if(c===h)throw new Error("Illegal attempt to upgrade mode from slave");b.log("WARNING! REQUESTED UPDATE TO UNKNOWN MODE: ",c)}}function i(a){b.log("GOT MODE UPGRADE REQUEST ",a),n.upgradeRequested.dispatch()}function j(a){b.log("PUBLISHING UPGRADE APPROVAL"),d.publish(f.SESSION_MODE,{targetUsersIds:a,mode:h})}function k(a){b.log("PUBLISHING UPGRADE DENIAL"),d.publish(f.SESSION_MODE_DENIAL,{targetUsersIds:a})}function l(a){d.publish(f.SESSION_MODE,{targetUsersIds:a,mode:g})}var m=this,n={downgraded:new c,upgradeRequested:new c},o={};o[f.SESSION_MODE]=e,o[f.SESSION_MODE_ATTEMPT]=i,d.addListeners(o),a.extend(m,{on:n,publishUpgradeApproval:j,publishUpgradeDenial:k,publishDowngrade:l})}var f=d.channels,g=d.modes.POINTER,h=d.modes.WRITE;return e}),define("cb/transport/clients/genericRestClient",["underscore","jquery","URI"],function(a,b,c){"use strict";function d(d,e){function f(a){e&&a.query(function(a){a.apikey=encodeURIComponent(e)})}function g(a){var b=new c(d);return b=b.path(b.path()+"/"+a),b.normalizePath(),f(b),b.href()}function h(a,c){return a=g(a),b.ajax(b.extend({url:a,dataType:"jsonp"},c))}function i(a){d=a}var j=this;a.extend(j,{get:h,setBaseUrl:i})}return d}),define("jquery.twinkle",["jquery","cb/lib/jquery.service-nodes"],function(a){!function(b){"use strict";var c=function(b,c){var d=[].slice,e=a,f=e.extend,g=e.isFunction,h=f({},c),i=function(a,c,d,f){return d=g(d)?d.apply(a,c):d,g(f[d])?f[d].apply(a,c):void e.error('Method "'+d+'" does not exist on jQuery.'+b)},j=function(){return i(this,d.call(arguments),h.defaultStatic,j)},k=function(a){return g(k[a])?k[a].apply(this,d.call(arguments,1)):i(this,d.call(arguments),h.defaultMethod,k)},l=function(a){a&&(f(j,a.statics),f(k,a.methods)),j.modplug=l};l.prev={statics:e[b],methods:e.fn[b]},l(c),e[b]=j,e.fn[b]=k},d={widthRatio:.5,heightRatio:.5,delay:0,gap:0,effect:"splash",effectOptions:void 0,callback:void 0},e={id:void 0,effectOptions:void 0,callback:void 0},f=function(a,b,c,d,e){this.offset={left:a,top:b},this.element=c,this.position={left:d,top:e}},g=function(){var a={};this.add=function(b){return a[b.id]||(a[b.id]=b),this},this.remove=function(b){return a[b]?delete a[b]:b.id&&a[b.id]&&delete a[b.id],this},this.twinkle=function(c,e){var f=b.extend({},d,e),g=a[f.effect];return g&&(c.element=c.element||"body",g.run(c,f.effectOptions,function(){"undefined"!=typeof f.callback&&f.callback()})),this},this.stop=function(c,d){var f=b.extend({},e,d),g=a[f.effect];return g&&(c.element=c.element||"body",g.stop(c,f.effectOptions,f.callback)),this},this.twinkleAtElement=function(a,c){var e=b.extend({},d,c),g=b(a),h=g.offset(),i=g.position(),j=g.outerWidth(!0),k=g.outerHeight(!0),l=h.left+j*e.widthRatio,m=h.top+k*e.heightRatio,n=i.left+j*e.widthRatio,o=i.top+k*e.heightRatio;return this.twinkle(new f(l,m,a,n,o),c)},this.twinkleAtElements=function(a,c){var e=this,f=b.extend({},d,c),g=f.delay,h=b(a),i=h.size();return h.each(function(a){var d=this,h=b.extend({},c);a!==i-1&&delete h.callback,setTimeout(function(){e.twinkleAtElement(d,h)},g),g+=f.gap}),this},this.stopAtElement=function(a,c){var e=b.extend({},d,c),g=b(a),h=g.offset(),i=g.position(),j=g.outerWidth(!0),k=g.outerHeight(!0),l=h.left+j*e.widthRatio,m=h.top+k*e.heightRatio,n=i.left+j*e.widthRatio,o=i.top+k*e.heightRatio;return this.twinkle(new f(l,m,a,n,o),c)},this.stopAtElements=function(a,c){var d=this,f=b.extend({},e,c),g=(f.delay,b(a)),h=g.size();return g.each(function(a){var e=this,f=b.extend({},c);a!==h-1&&delete f.callback,d.stopAtElement(e,f)}),this}},h=new g;c("twinkle",{statics:{twinkle:function(a,b,c,d){return h.twinkle(new f(0,0,a,b,c),d),this},add:function(a){return h.add(a),this},remove:function(a){return h.remove(a),this}},methods:{twinkle:function(a){return h.twinkleAtElements(this,a),this},stop:function(a){return h.stopAtElements(this,a),this}},defaultStatic:"twinkle",defaultMethod:"twinkle"})}(a),function(a){"use strict";var b=function(a){return a.stopImmediatePropagation(),a.preventDefault(),!1},c=function(c,d,e,f){var g,h=function(){g.remove(),f instanceof Function&&f()},i=function(){g.animate({left:d.position.left-e.radius,top:d.position.top-e.radius,width:2*e.radius,height:2*e.radius,opacity:0},.5*e.duration,"linear",h)},j=function(){g=a("<div />").css(c).bind("click dblclick mousedown mouseenter mouseover mousemove",b),a(d.element).after(g),g.animate({left:d.position.left-.5*e.radius,top:d.position.top-.5*e.radius,width:e.radius,height:e.radius,opacity:1},.5*e.duration,"linear",i)},k=function(){};return j(),{stop:k}},d={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3},e=function(){this.id="splash-css",this.run=function(b,e,f){var g=a.extend({},d,e),h={position:"absolute",zIndex:9999,display:"block",borderRadius:g.radius,backgroundColor:g.color,boxShadow:"0 0 30px "+g.color,left:b.position.left,top:b.position.top,width:0,height:0,opacity:.4};c(h,b,g,f)}},f={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2,count:3,delay:300},g=function(){this.id="drops-css",this.run=function(b,d,e){var g,h=a.extend({},f,d),i={position:"absolute",zIndex:1e3,display:"block",borderRadius:h.radius,border:h.width+"px solid "+h.color,left:b.position.left,top:b.position.top,width:0,height:0,opacity:.4},j=function(a,d){setTimeout(function(){c(i,b,h,d)},a)},k=0;for(g=0;g<h.count;g+=1)j(k,g===h.count-1?e:void 0),k+=h.delay}},h=function(){var b=new g;this.id="drop-css",this.run=function(c,d,e){b.run(c,a.extend(d,{count:1}),e)}};a.twinkle.add(new e).add(new h).add(new g)}(a),function(a){"use strict";var b={};b.Interpolator=function(a){var b,c=function(a){var b,c=1/(a.length-1),d=[];for(b=0;b<a.length;b+=1)d.push({x:c*b,y:a[b]});return d},d=function(a,b,c){var d=(b.y-a.y)/(b.x-a.x),e=a.y+d*(c-a.x);return e},e=function(a){var c,d,e;for(c=1;c<b.length;c+=1)if(d=b[c-1],e=b[c],a>=d.x&&a<=e.x)return[d,e];return void 0};b=c(a),this.get=function(a){var b;return a=Math.max(0,Math.min(1,a)),b=e(a),d(b[0],b[1],a)}},b.Interpolator.scale=function(a,b,c){return b=b||1,c=c||0,a=(a-c)/b,a>=0&&1>=a?a:void 0},function(){var c=function(a){var b=a.getContext();b.beginPath(),this.fill=function(c){return b.fillStyle=c,b.fill(),a},this.stroke=function(c,d){return b.lineWidth=c,b.strokeStyle=d,b.stroke(),a},this.draw=function(b,c,d){return this.fill(d),this.stroke(b,c),a},this.circle=function(a,c,d){return b.arc(a,c,d,0,2*Math.PI,!1),this}};b.Ctx=function(d){if(!d||!d.canvas)return void 0;if(!(this instanceof b.Ctx))return new b.Ctx(d);var e=a(d.canvas).width(),f=a(d.canvas).height();this.getContext=function(){return d},this.getWidth=function(){return e},this.getHeight=function(){return f},this.clear=function(){return this.resetTransform(),d.clearRect(0,0,e,f),this},this.resetTransform=function(){return d.setTransform(1,0,0,1,0,0),this},this.translate=function(a,b){return d.translate(a,b),
this},this.rotate=function(a){return d.rotate(Math.PI*a/180),this},this.opacity=function(a){return d.globalAlpha=a,this},this.path=function(){return new c(this)}}}(),b.CanvasEffect=function(c,d,e,f,g){if(!(this instanceof b.CanvasEffect))return new b.CanvasEffect(c,d,e,f,g);var h=c.element,i=c.position.left,j=c.position.top,k={position:"absolute",zIndex:1e3,display:"block",left:i-.5*d,top:j-.5*e,width:d,height:e};this.run=function(c,i){var j,l,m,n=c/1e3*i,o=1/n,p=function(a){setTimeout(function(){l&&f({ctx:l,frac:a,millis:c*a})},c*a)},q=function(){j.remove(),j=void 0,l=void 0,g instanceof Function&&g()},r=function(a){return a.stopImmediatePropagation(),a.preventDefault(),!1};for(j=a("<canvas />").attr("width",d).attr("height",e).css(k),j.cbMarkNode(),j.addClass("gcb-virtualClick"),a(h).after(j),j.bind("click dblclick mousedown mouseenter mouseover mousemove",r),l=new b.Ctx(j.get(0).getContext("2d")),m=0;n>=m;m+=1)p(m*o);setTimeout(q,c)}},function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3},d=function(){this.id="splash",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).fill(g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2},d=function(){this.id="drop",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).stroke(g.width,g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:300,duration:1e3,width:2,count:3,delay:100},d=function(){this.id="drops",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,0]),j=new b.Interpolator([0,g.radius]),k=(g.duration-(g.count-1)*g.delay)/g.duration,l=g.delay/g.duration,m=function(a){var c,d,e,f,h=a.ctx,m=h.getWidth(),n=h.getHeight();for(h.clear(),c=0;c<g.count;c+=1)d=b.Interpolator.scale(a.frac,k,l*c),void 0!==d&&(e=j.get(d),f=i.get(d),h.opacity(f).path().circle(.5*m,.5*n,e).stroke(g.width,g.color))};new b.CanvasEffect(d,h,h,m,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:100,duration:3e3},d=function(){this.id="pulse",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([0,1,.6,1,.6,1,0]),j=new b.Interpolator([0,g.radius,.6*g.radius,g.radius,.6*g.radius,g.radius,0]),k=function(a){var b=j.get(a.frac),c=i.get(a.frac),d=a.ctx;d.clear().opacity(c).path().circle(.5*d.getWidth(),.5*d.getHeight(),b).fill(g.color)};new b.CanvasEffect(d,h,h,k,f).run(g.duration,25)}};a.twinkle.add(new d)}(),function(){var c={color:"rgba(255,0,0,0.5)",radius:100,duration:3e3,satellites:10,satellitesRadius:10,circulations:1.5},d=function(){this.id="orbit",this.run=function(d,e,f){var g=a.extend({},c,e),h=2*g.radius,i=new b.Interpolator([.4,1,1,.4]),j=g.radius-g.satellitesRadius,k=new b.Interpolator([0,j,j,0]),l=function(a){var b,c,d,e,f=k.get(a.frac),h=i.get(a.frac),j=2*Math.PI*g.circulations*a.frac,l=a.ctx;for(l.clear().opacity(h).translate(.5*l.getWidth(),.5*l.getHeight()),b=l.path(),c=0;c<g.satellites;c+=1)j+=2*Math.PI/g.satellites,d=Math.cos(j)*f,e=Math.sin(j)*f,b.circle(d,e,g.satellitesRadius);b.fill(g.color)};new b.CanvasEffect(d,h,h,l,f).run(g.duration,25)}};a.twinkle.add(new d)}()}(a)}),define("cb/ui/mouse/virtualMouseManager",["jquery","underscore","util","cb/environment","cb/lib/jquery.service-nodes","jquery.twinkle"],function(a,b,c,d){"use strict";function e(e){function g(){return o.find(".vmToolbar").outerHeight()+o.find(".vbToolbar").outerHeight()}function h(b){c.log("CREATE VIRTUAL MOUSE FOR USER ID ",b.sourceUserId);var d=a("<div/>",{css:{position:"absolute",left:b.x,top:b.y,"z-index":999999,"pointer-events":"none"},id:"virtualMouse"+b.sourceUserId}).addClass("CobrowseVirtualMouse");d.append(a("<img/>",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3QQBDh45rpL+KQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABy0lEQVQoz43Qz08TQRQH8O++7XbbWqBxa0C0auBSCAej8aQxmPjjgmg4cPEgV68eDAl/gH+AEI4cuOjNQOKBQDmaeNB4MBiI4I+EEmy7rdsu29n54YEsdHWhndPMe/N5M+9pwy/frDx7cPNpfzpeRAeLvL2f12bfrhR26+x8R0AjQizdnZ9bWi3s1llfWwAAwq3D7M3l55ZW19shAgDZ9ACojhAFG2aXQMkzbdEREE4VivutKLInaj349u/D4CEaikJhUCsDUpyKQgBCgDu142oRiP79o2/vA0qdiP4DsulBeo1wowFaXluLRY2O2SWYhgl3ZwOQ8iiupMiEgJICSinAqUL2WKBE6sPz8TuPg3wyplfp+DKHZM2SEvy9khzCdcD/2De2a17OShpFK2kUUwYdUFBZMlaZmpy4f3307ow4cOHXykj0X9Hefd6aDvVjZM5tS9asTE1O3Bu2Up/GB7PrSvAvivvQSEfj+9dHG2U3HwD91fz8wq2rI7MXuswfAGCQho+Ule6vb2NQEkYmq226SNy+dHYZACiuE0/H9Xrrs0+GeheF69issg9W3tsZ6csUglzkWHNdZuPi6MMXl7tNb2zAeh3XiQe5v1+E6N2p54J3AAAAAElFTkSuQmCC"})).cbMarkNode(),p[b.sourceUserId]=d,a(n.document).find("body").append(d)}function i(){function c(a,b,c){var d={effect:"splash",widthRatio:c?c:0,heightRatio:c?c:0,effectOptions:{effect:"splash",radius:45,duration:500},callback:b};a.twinkle(d)}function d(a,b){a.css({left:b.x-a.height()/2,top:b.y-a.height()/2+g()}).fadeIn("fast").fadeOut("fast")}return f?function(a,b){c(b)}:function(){var c=a(b.template('<img src="<%=url%>">',{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABvUlEQVRo3t2ay3GEMAyGf834DA2wDSwVUAEVJA0kDaSSVLAVUAEVUAHbAG4AGlAOdhazsZnhkcVCJ4YD6NPDQhLEzJAsarcnEWUAcgCJvZMBSO11D0Db6wFAC2a9y2s3eYDoapXOVz6htTD31wIYxUvHwlulB1CvAVkGYMKkBHD5p5DuLIjeH4CoBFC8KDcbMNf7ARC9bYhzrM4P5mobAFEC4GPHWF+TGzcwD2sBvg5UfoRg/l4OcEzYLA4nNZOwsSgPADmIBl9iq8BRWSA+KUD0p4L7PFBG/OlTAriFAUyFvUQMcAHR1a3YSpD1XR09AMb6qQCA1PWCmmS6HMl/vSAZoBoBzNEpS4gyMGsl0PquFx4AiUCAZN+e+OCmPhOoe+YCpAIB0lOFUC/QC70LoAUC6FOF0CBQ98EFaCPtwub75AcAswaRLPVta6meiHJJ1j8ZAPMdRBLqQT/XE9cA3iMHqMNTCeOFLuLJRPe8Q1ABwk8J1vcDmCO1ibAuNL7FhwqcsbUdrcc03K3nPiV8EJVt9mMYrwcXHSdfcIwgQldMUwjBS74RQvCadQoidNHtBxH4q0E4vIT97BGB/AALJ9JkKT7BqAAAAABJRU5ErkJggg=="})).css({position:"absolute","z-index":999998}).addClass("gcb-virtualClick").hide().cbMarkNode();return a(n.document).find("body").append(c),function(a){d(c,a)}}()}function j(a){var b=p[a.sourceUserId];b.is(":visible")||b.show(),b.css({top:a.y+g(),left:a.x}),a.isClicked&&q(a,b)}function k(a){p[a.sourceUserId]||h(a),j(a)}function l(){b.each(p,function(a){a.hide()})}c.log("INITIALIZE VIRTUAL MOUSE MANAGER ");var m,n=d[e].getTopContext(),o=a(n.document),p={},q=i();m=function(){function b(b){return{top:a(b.document).scrollTop(),left:a(b.document).scrollLeft()}}function d(a){j.top-=b(a).top,j.left-=b(a).left}function f(a){j.top+=b(a).top,j.left+=+b(a).left}function g(b){j.top+=a(b.frameElement).offset().top,j.left+=a(b.frameElement).offset().left}function h(b){return c.isSameWindow(b,n)||a(b.frameElement).hasClass("vbContentArea")}function i(a){return h(a)?void("slave"===e&&f(a)):(g(a),d(a.parent),void i(a.parent))}var j={left:0,top:0};return function(a){return j={left:0,top:0},i(a),j}}(),b.extend(this,{delegateMouseMessage:k,retrieveOffset:m,getToolbarTopOffset:g,hideAllCursors:l,_animateClick:q})}var f=function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}();return e}),define("cb/services/sessionConfigService",["underscore","json","../constants","util"],function(a,b,c,d){"use strict";function e(e){function f(e){l=!1,sessionStorage.setItem(c.SESSION_CONFIG_KEY,b.stringify(e)),d.log("SESSION CONFIG LOADED AND CACHED: ",e),j=e,a.each(k,function(a){try{a(j,i)}catch(b){d.log("EXCEPTION IN SESSION CONFIG CALLBACK ",b.number,b)}}),k=[]}function g(a){if(j)d.log("SESSION CONFIG FOUND IN MEMORY"),a(j,i);else{var g=sessionStorage.getItem(c.SESSION_CONFIG_KEY);g?(d.log("SESSION CONFIG FOUND IN STORAGE"),j=b.parse(g),a(j,i)):(k.push(a),l||(l=!0,d.log("LOADING SESSION CONFIG FROM SERVER..."),e.get("/rest/dom-restrictions.json",{cache:!0,jsonpCallback:"cb_1412064242290"}).done(f).fail(function(){throw d.log("Failed receiving DOM config. Arguments: ",arguments),new Error("Unable to get DOM restrictions configuration")})))}}function h(){d.log("SESSION CONFIG: CLEARING CACHE"),j=null,sessionStorage.removeItem(c.SESSION_CONFIG_KEY)}var i=this,j=null,k=[],l=!1;a.extend(this,{getSessionConfig:g,clearCache:h})}return e}),define("cb/services/modeService",["underscore","signals","cb/constants"],function(a,b,c){"use strict";function d(a){return{pointer:a===c.modes.POINTER,write:a===c.modes.WRITE}}function e(e){function f(){return g||(g=d(e.get("mode"))),g}var g,h=this,i={modeChanged:new b};e.on("change:mode",function(a,b){if(b&&a.previous("mode")){if(!a.get("writeModeAllowed")&&b===c.modes.WRITE)throw a.set("mode",c.modes.POINTER),new Error("Switching to Write mode is not allowed");g=d(b),i.modeChanged.dispatch(g)}}),a.extend(h,{on:i,currentMode:f})}return e}),define("cb/services/masterTopMostModeService",["jquery","underscore","signals","cb/constants","./modeService"],function(a,b,c,d,e){"use strict";function f(b,d){function f(){return d.users.pluck("userId")}function i(a){a?l(h):b.publishUpgradeDenial(f())}function j(){q.upgradeRequested.dispatch(i)}function k(){d.set("mode",g)}function l(a){d.set("mode",a),a===g?b.publishDowngrade(f()):a===h&&b.publishUpgradeApproval(f())}function m(){b.on.upgradeRequested.add(j),b.on.downgraded.add(k)}function n(){b.on.upgradeRequested.remove(j),b.on.downgraded.remove(k)}var o=this,p=new e(d),q={upgradeRequested:new c};a.extend(!0,o,p,{on:q,activate:m,deactivate:n,setMode:l})}var g=d.modes.POINTER,h=d.modes.WRITE;return f}),define("cb/services/css/coreCssService",["jquery","underscore","cb/constants","util"],function(a,b,c,d){"use strict";function e(){function c(a){d.log("ACTIVATING CORE CSS SERVICE"),h=a.foreignMouseEvent,h.add(g)}function e(){d.log("DEACTIVATING CORE CSS SERVICE"),h&&h.remove(g)}function g(b){a(b.target)[("mouseenter"===b.type?"add":"remove")+"Class"](f)}var h,i=this;b.extend(i,{activate:c,deactivate:e})}var f=c.PSEUDO_HOVER_CLASS;return e.deserializeNode=function(c){var d;return d=c.href?a("<link>",{rel:"stylesheet",href:c.href}):c.css?a("<style>",{text:c.css}):a("<style></style>"),c.media&&d.attr("media",c.media),b.isUndefined(c.pos)||d.data("pos",c.pos),d},e.formatCssNodeForLogging=function(c){var d,e;return d=a.extend(!0,{},c),e=d.css,b.isString(e)&&(d.css=e.substr(0,100)+"..."),d},e.formatCssNodesArrayForLogging=function(a){return b.isArray(a)?b.map(a,e.formatCssNodeForLogging):a},e}),define("cb/services/css/masterBrowserCssService",["underscore","util","cb/constants","URI"],function(a,b,c,d){"use strict";function e(){function e(){var c=document.styleSheets;b.log("----------"),b.log("PARSING STYLESHEETS, TOTAL STYLESHEETS: ",c.length),a.each(c,g),b.log("PARSED ALL STYLESHEETS"),b.log("----------")}function f(a,b){a=a.replace(p,q),a=h(a,b),s.push({css:a})}function g(c,d){var e,h,j,k,l,m=[],n=[],r=c.href||document.location.href;if(i(c)){for(e=c.cssRules||c.rules,b.log("PARSING STYLESHEET No ",d,", ",e.length," RULES "," PATH ",r),l=e.length;l--;)if(h=e[l],3===h.type)g(h.styleSheet);else try{j=h.cssText,m[l]=j,1===h.type&&o.test(j)&&(k=j.replace(p,q),c.insertRule(k,l+1))}catch(s){b.log("EXCEPTION CAUGHT WHILE PARSING CSSRULE: ",h)}for(;m.length>4095;)n.push(m.splice(0,4095));n.push(m),a.each(n,function(a){f(a.join("\n"),r)})}else b.log("SKIPPING STYLESHEET No",d,c.href?c.href:{})}function h(a,c){var e=0,f=a.replace(r,function(a,f,g,h,i,j){var k,l;if("data:"===h.slice(0,5))return a;k=new d(h);try{l=k.absoluteTo(c).href(),e++}catch(m){b.log('UNABLE TO ABSOLUTIZE: "'+h+'"',m)}return f+g+l+i+j});return b.log("ABSOLUTIZED ",e," RULES"),f}function i(a){try{var b,c=a.cssRules||a.rules,d=a.media,e=!1;if(!c)return!1;if(!d)return!0;if(d.length){for(b=0;b<d.length;b++)if("screen"===d.item(b)||"all"===d.item(b)){e=!0;break}if(!e)return!1}return!0}catch(f){return!1}}function j(a){m=a}function k(){return s}function l(a){a.stylesheets=k(),m.publishBrowserCss(a)}var m,n=this,o=/:hover/,p=/:hover/g,q="."+c.PSEUDO_HOVER_CLASS,r=/([Uu][Rr][Ll]\()\s*(?:(['"]?)([^'"\s)]*)(['"]?))?\s*(\))/g,s=[];a.extend(n,{setCssClient:j,createSnapshot:e,getSnashpshot:k,publishCSS:l})}return e}),define("cb/services/css/masterServerCssService",["underscore","jquery","util","cb/constants","URI","./coreCssService"],function(a,b,c,d,e,f){"use strict";function g(d,g){function i(a){var d,e,f,g,h;if(c.isServiceNode(a[0]))return!1;if(d=a.attr("media"),!d)return!0;for(e=d.split(","),h=e.length;h--;)if(f=b.trim(e[h]),g=f.match(u)[0].toLowerCase(),""===g||"screen"===g||"all"===g||"not"===g||"only"===g)return!0;return!1}function j(b){a.each(b,function(a){a[h]=w,v[w]=a,w++})}function k(b){b.baseUrl=c.getPageBaseUrl(),b.pageUrl=c.getPageUrl(),b.cobrowseUrl=g.cobrowseUrl,b.stylesheets=a.map(x,m),g&&g.apikey&&(c.log('"SERVER" CSS SERVICE: INCLUDING APIKEY: '+g.apikey),b.apikey=g.apikey),d.publishServerCss(b),c.log('"SERVER" CSS SERVICE SENT SERIALIZED CSS NODES',l(b))}function l(a){var c=b.extend(!0,{},a);return c.stylesheets=f.formatCssNodesArrayForLogging(a.stylesheets),c}function m(a){var d,g=b(a),i=g.attr("media"),j={};if(j.pos=a[h],"LINK"===a.nodeName)d=new e(b.trim(g.attr("href"))),d.is("relative")&&(d=d.absoluteTo(c.getPageBaseUrl().split("?")[0])),j.href=d.href();else if("STYLE"===a.nodeName&&(j.css=b.trim(g.html()),""===j.css))try{j.css=(a.styleSheet||a.style).cssText}catch(k){c.log("CANNOT GET THE CONTENTS OF A STYLE NODE")}return i&&(j.media=i),c.log('"SERVER" CSS SERVICE: SERIALIZED CSS NODE ',f.formatCssNodeForLogging(j)),j}function n(a){a.data("cb-css-node",!0)}function o(a){return a.data("cb-css-node")}function p(b){var d;if(c.log("HANDLING SERVER-PROCESSED CSS NODES",f.formatCssNodesArrayForLogging(b)),!a.isArray(b))throw new TypeError("CSS service expects an array");d=a.map(b,f.deserializeNode),a.each(d,function(a){var b=a.data("pos");c.markServiceNode(a[0]),n(a),a.insertAfter(v[b])})}function q(a){p(a.stylesheets)}function r(){c.log("ACTIVATING SERVER CSS SERVICE"),b('style, link[rel="stylesheet"]').each(function(a,c){i(b(c))&&x.push(c)}),j(x),d.on.gotProcessedCss.add(q)}function s(){c.log("DEACTIVATING SERVER CSS SERVICE"),d.on.gotProcessedCss.remove(q),b('style, link[rel="stylesheet"]').each(function(a,d){var e=b(d);o(e)&&(c.log("REMOVING ADDED CSS NODE"),e.remove())})}var t=this,u=/[a-z0-9-]*/i,v={},w=0,x=[];a.extend(t,{activate:r,deactivate:s,publishCSS:k})}var h=d.CSS_INDEX_PROPERTY;return g}),define("cb/services/css/masterCssService",["jquery","underscore","util","cb/constants","URI","support","./coreCssService","./masterBrowserCssService","./masterServerCssService"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){function d(b){c.log("ACTIVATING MASTER CSS SERVICE"),k=b.cssClient,a.server&&(n=new i(k,{cobrowseUrl:a.cobrowseUrl,apikey:a.apikey}),n.activate()),a.browser&&m.setCssClient(k),l.activate({foreignMouseEvent:b.foreignMouseEvent})}function e(){c.log("DEACTIVATING MASTER CSS SERVICE"),l.deactivate(),n&&n.deactivate()}function f(){return a["default"]}function j(b){a.server&&n.publishCSS({targetUsersIds:b.targetUsersIds,initial:!!b.initial,expectAnotherService:!!a.browser}),a.browser&&(m.publishCSS({targetUsersIds:b.targetUsersIds,initial:!!b.initial,expectAnotherService:!!a.server}),c.log('"BROWSER" CSS SERVICE: SENT SERIALIZED CSS NODES',g.formatCssNodesArrayForLogging(m.getSnashpshot())))}var k,l,m,n,o=this;l=new g,a.browser&&(m=new h),c.log("INITIALIZING CSS SERVICE WITH CONFIG: ",a),m&&(c.log('CREATING "BROWSER" CSS SNAPSHOT'),m.createSnapshot()),b.extend(o,{activate:d,deactivate:e,publishCSS:j,areStylesheetsSynced:f})}return j}),define("cb/app/master/topmostMasterApp",["jquery","underscore","util","support","cb/app/master/masterCore","cb/transport/clients/masterSessionClient","cb/transport/clients/contextClient","cb/transport/clients/masterWindowClient","cb/transport/clients/masterDomClient","cb/transport/clients/masterModeClient","cb/transport/clients/genericRestClient","cb/session","cb/constants","cb/environment","signals","../../ui/mouse/virtualMouseManager","../../services/sessionConfigService","../../services/masterTopMostModeService","../../services/css/masterCssService"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t,u=100,v=m.TOPMOST_CONTEXT_ID;return t=function(t,w){function x(){var a,d,o,u;O=N=v,c.log("APIKEY IS ",t.apikey),u=new k(Y,t.apikey),P=l.createInstance(),R=new p("master"),L=new f(u,{cometdUrl:Y+"/cometd",maxOfflineDuration:t.maxOfflineDuration,disableWebSockets:t.disableWebSockets,apikey:t.apikey,serverAvailabilityTimeout:t.timeout||m.SERVER_AVAILABILITY_TIMEOUT,cometdConfig:t.cometdConfig}),M=new h(L.getCoreClient()),a=new g(L.getCoreClient(),O),o=new j(L.getCoreClient()),d=new i(a),T=new s(b.extend(t.css,{cobrowseUrl:Y,apikey:t.apikey})),U=new r(o,P),Q=new e(_,T,O),Q.on.pickedUpSlaves.add(A),$.elementMasked=Q.on.elementMasked,$.modeChanged=U.on.modeChanged,$.modeUpgradeRequested=U.on.upgradeRequested,d.on.slaveContextReady.add(A),P.users.on("add",function(){$.agentJoined.dispatch({},P.serializeForApi())}),M.on.windowCommandReceived.add(D),M.on.navigateAttemptReceived.add(E),L.on.connected.add(y),L.on.disconnected.add(z),S=new q(u),b.each($,function(a){a.memorize=!0}),t.setDocumentDomain&&n.setDocumentDomain(),P.exists()&&H(),Z.on("beforeunload.gcbNavigation",function(){c.log("CLEARING SLAVE NAVIGATION TIMEOUT"),window.clearTimeout(W)}),$.ready.dispatch(P.exists()?P.serializeForApi():null)}function y(a){P.activate(),U.activate(),$.disconnected.forget(),a.newSession&&$.sessionStarted.dispatch(P.serializeForApi(),V)}function z(a){P.clear(),U.deactivate(),Z.off("resize.gcb"),$.disconnected.dispatch({reason:a&&a.reason}),b.each($,function(a,b){"disconnected"!==b&&a.forget()})}function A(a){if(!P.users.length)throw new Error("GOT SLAVEREADY WHEN NO SLAVES ARE CONNECTED");c.log("PUBLISHING URL: ",window.location.href),M.publishUrl(window.location.href,a),B()}function B(){C(),Z.off("resize.gcb"),Z.on("resize.gcb",b.throttle(C,u))}function C(){M.publishWindowSize({width:window.innerWidth||Z.width(),height:window.innerHeight||Z.height()})}function D(a){var b;return U.currentMode().pointer?void c.log("WARNING! ILLEGAL NAVIGATION ATTEMPT IN POINTER MODE"):(b={back:function(){window.history.back()},forward:function(){window.history.forward()},refresh:function(){window.location.reload()}},void(b[a]&&F({command:a},b[a])))}function E(a,b){return U.currentMode().pointer?void c.log("WARNING! ILLEGAL NAVIGATION ATTEMPT IN POINTER MODE"):void(G(a,b)?(c.log("SUCCESSFUL SLAVE NAVIGATION ATTEMPT"),F({command:"url",url:b},function(){window.location=b})):(c.log("UNSUCCESSFUL SLAVE NAVIGATION ATTEMPT"),M.publishNavigateDenial(a,b)))}function F(a,c){window.clearTimeout(W),W=window.setTimeout(function(){$.navigationFailed.dispatch(),M.publishNavigateDenial(P.users.first().get("userId"),a.url||a.command)},m.NAVIGATION_TIMEOUT),$.navigationInitiated.dispatch(a),b.delay(c,m.PAUSE_BEFORE_NAVIGATION)}function G(a,b){return!0}function H(a){c.log("CONNECT IS CALLED, CONNECTING"),a&&(V=a),L.connect()}function I(a){c.log("NEW SESSION. CLEANING COMETD COOKIES"),c.removeRootDomainCookie(m.RELOAD_EXTENSION_COOKIE_NAME),H(a)}function J(){c.log("EXITING SESSION"),L.disconnect()}function K(){return d.textNodeCustomProps&&(d.mutationObservers||d.configurableNodeProperties)}var L,M,N,O,P,Q,R,S,T,U,V,W,X=this,Y=n.master.getBaseUrl(),Z=a(window),$={ready:new o,sessionStarted:new o,agentJoined:new o,navigationInitiated:new o,navigationFailed:new o,disconnected:new o},_={getSessionClient:function(){return L},getNextContextId:function(){return++N},getSession:function(){return P},getVirtualMouseManager:function(){return R},getSessionConfig:function(a){S.getSessionConfig(a)},clearSessionConfigCache:function(){S.clearCache()},getMouseSyncInterval:function(){return m.mouseSyncSpeed[t.disableWebSockets?"LOW":"HIGH"]}};b.isFunction(w)&&(c.log=w),n.master.registerTopmostApi(_),x(),b.extend(X,{on:$,startSession:I,exitSession:J,isBrowserSupported:K,markServiceElement:c.markServiceNode,downgradeMode:function(){U.setMode(m.modes.POINTER)}})}}),define("cb/app/master/childMasterApp",["jquery","underscore","cb/environment","util","cb/app/master/masterCore","../../services/css/masterCssService"],function(a,b,c,d,e,f){"use strict";var g;return g=function(g,h){function i(a){var b=window.frameElement;d.log("CHILD CONTEXT: GOT TOPMOST API",a),b&&(d.log("CHILD TRYING TO GET CONTEXT ID"),j=c.master.indexIframeIfNotYet(b,a.getNextContextId)),d.log("CHILD CONTEXT: INSTANTIATING CORE",a),k=new e(a,l,j),k.on.elementMasked.memorize=!0,m.resolve({on:{elementMasked:k.on.elementMasked},markServiceElement:d.markServiceNode})}var j,k,l,m=a.Deferred();return b.isFunction(h)&&(d.log=h),l=new f(b.extend(g.css,{apikey:g.apikey})),g.setDocumentDomain&&c.setDocumentDomain(),d.log("CHILD CONTEXT: WAITING FOR 1ST AGENT AND TOPMOST API"),d.injectAsync(c.master.provideTopmostApi,i),m.promise()}}),function(a){a("toastr",["jquery"],function(a){return function(){function b(b){return b||(b=c()),e=a("#"+b.containerId),e.children().length?e:(e=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),b.onContainerCreated(e),e.appendTo(a(b.target)),e)}function c(){return a.extend({},f,m.options)}function d(a){e||(e=b()),a.is(":visible")||(a.remove(),a=null,0===e.children().length&&e.remove())}var e,f={tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,fadeIn:300,onFadeIn:void 0,fadeOut:1e3,onFadeOut:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",onContainerCreated:a.noop,onToastCreated:a.noop},g=function(a,b,d){return i({iconClass:c().iconClasses.error,message:a,optionsOverride:d,title:b})},h=function(a,b,d){return i({iconClass:c().iconClasses.info,message:a,optionsOverride:d,title:b})},i=function(f){function g(){return a(":focus",m).length>0?void 0:m.fadeOut(j.fadeOut,function(){d(m),j.onFadeOut&&j.onFadeOut()})}function h(){(j.timeOut>0||j.extendedTimeOut>0)&&(l=setTimeout(g,j.extendedTimeOut))}function i(){clearTimeout(l),m.stop(!0,!0).fadeIn(j.fadeIn)}var j=c(),k=f.iconClass||j.iconClass;"undefined"!=typeof f.optionsOverride&&(j=a.extend(j,f.optionsOverride),k=f.optionsOverride.iconClass||k),e=b(j);var l=null,m=a("<div/>"),n=a("<div/>"),o=a("<div/>"),p={options:j,map:f};return f.iconClass&&m.addClass(j.toastClass).addClass(k),f.title&&(n.append(f.title).addClass(j.titleClass),m.append(n)),f.message&&(o.append(f.message).addClass(j.messageClass),m.append(o)),j.onToastCreated(m),m.hide(),e.prepend(m),m.fadeIn(j.fadeIn,j.onFadeIn),j.timeOut>0&&(l=setTimeout(g,j.timeOut)),m.hover(i,h),!j.onclick&&j.tapToDismiss&&m.click(g),j.onclick&&m.click(function(){j.onclick()&&g()}),j.debug&&console&&console.log(p),m},j=function(a,b,d){return i({iconClass:c().iconClasses.success,message:a,optionsOverride:d,title:b})},k=function(a,b,d){return i({iconClass:c().iconClasses.warning,message:a,optionsOverride:d,title:b})},l=function(f){var g=c();return e||b(g),f&&0===a(":focus",f).length?void f.fadeOut(g.fadeOut,function(){d(f)}):void(e.children().length&&e.fadeOut(g.fadeOut,function(){e.remove()}))},m={clear:l,error:g,getContainer:b,info:h,options:{},success:j,version:"1.2.3",warning:k};return m}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require(a[0])):window.toastr=b(window.jQuery)}),define("cb/ui/notify",["jquery","util","toastr","cb/lib/jquery.service-nodes"],function(a,b,c){"use strict";function d(a,b){var d,e={};return b=b||{},b.icon&&(e.iconClass=i+b.icon),b.sticky&&(e.timeOut=e.extendedTimeOut=0),b.target&&(e.target=b.target),d=c.info(a,null,e),{$el:d,remove:function(){d.click()}}}function e(a){a.cbMarkNode()}function f(b){a.extend(c.options,b)}function g(a){var b=a&&a.containerSuffix,c=a&&a.notificationSuffix;b&&f({containerId:i+b}),c&&f({toastClass:h+c})}var h="_gcb_toast",i=h+"-";return c.options={toastClass:h,containerId:i+"container",iconClasses:{error:i+"error",info:i+"info",success:i+"success",warning:i+"warning"},iconClass:i+"info",positionClass:i+"top-right",titleClass:i+"title",messageClass:i+"message",onContainerCreated:e,onToastCreated:e},d.init=g,d}),define("text",["module"],function(a){"use strict";var b,c,d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],e=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,f=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,g="undefined"!=typeof location&&location.href,h=g&&location.protocol&&location.protocol.replace(/\:/,""),i=g&&location.hostname,j=g&&(location.port||void 0),k=[],l=a.config&&a.config()||{};return b={version:"2.0.5",strip:function(a){if(a){a=a.replace(e,"");var b=a.match(f);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:l.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=d[b];try{a=new ActiveXObject(c)}catch(e){}if(a){d=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,l.isBuild&&(k[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();l.isBuild=e.isBuild;var f=b.parseName(a),k=f.moduleName+(f.ext?"."+f.ext:""),m=c.toUrl(k),n=l.useXhr||b.useXhr;!g||n(m,h,i,j)?b.get(m,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([k],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)})},write:function(a,c,d,e){if(k.hasOwnProperty(c)){var f=b.jsEscape(k[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===l.env||!l.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(c=require.nodeRequire("fs"),b.get=function(a,b){var d=c.readFileSync(a,"utf8");0===d.indexOf("\ufeff")&&(d=d.substring(1)),b(d)}):"xhr"===l.env||!l.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);l.onXhr&&l.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&600>e?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText))},g.send(null)}:("rhino"===l.env||!l.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}),b}),define("text!cb/ui/status.html",[],function(){return'<div class="gcb-appStatus">\r\n  <% if (typeof icon !== \'undefined\') { %><div class="gcb-appStatus-icon gcb-appStatus-icon-<%= icon %>"></div><% } %>\r\n  <%= message %>\r\n  <div class="gcb-appStatus-close"><div class="gcb-appStatus-close-icon"></div></div>\r\n</div>'}),define("cb/ui/status",["jquery","underscore","text!./status.html","cb/lib/jquery.service-nodes"],function(a,b,c){"use strict";function d(){var b=Math.max.apply(null,a.map(a("*"),function(b){return"static"!==a(b).css("position")?Number(a(b).css("z-index"))||1:void 0}));return b+1}function e(e){if(null===e)return void f();var g=h,j=b.isObject(e)?e:{message:e};h=a(b.template(c,j)),g&&g.remove(),h.css({zIndex:d()}).cbMarkNode().on("click",".gcb-appStatus-close",f).prependTo(i.target).slideDown(i.speed)}function f(){h&&h.slideUp(i.speed,function(){h.remove(),h=null})}function g(b){a.extend(i,b)}var h,i={target:document.body,speed:50};return e.configure=g,e}),function(){"use strict";var a={smoketimeout:[],init:!1,zindex:99999999,i:0,title:"Co-browse",bodyload:function(b){var c=document.createElement("div");c.setAttribute("id","smoke-out-"+b),c.className="gcb-smoke-base",c.style.zIndex=a.zindex,a.zindex++,a.beforeAppend(c),document.body.appendChild(c)},beforeAppend:function(){},newdialog:function(){var b=(new Date).getTime();return b=Math.random(1,99)+b,a.init?a.bodyload(b):a.listen(window,"load",function(){a.bodyload(b)}),b},build:function(b,c){a.i++,c.stack=a.i,b=b.replace(/\n/g,"<br />"),b=b.replace(/\r/g,"<br />");var d,e,f="",g="OK",h="Cancel",i="";"prompt"===c.type&&(f='<div class="gcb-dialog-prompt"><input id="gcb-dialog-input-'+c.newid+'" type="text" '+(c.params.value?'value="'+c.params.value+'"':"")+" /></div>"),c.params.ok&&(g=c.params.ok),c.params.cancel&&(h=c.params.cancel),c.params.classname&&(i=c.params.classname),d='<div class="gcb-dialog-buttons">',"alert"===c.type?d+='<button id="alert-ok-'+c.newid+'">'+g+"</button>":("prompt"===c.type||"confirm"===c.type)&&(d+=c.params.reverseButtons?'<button id="'+c.type+"-ok-"+c.newid+'">'+g+'</button><button id="'+c.type+"-cancel-"+c.newid+'" class="gcb-cancel">'+h+"</button>":'<button id="'+c.type+"-cancel-"+c.newid+'" class="gcb-cancel">'+h+'</button><button id="'+c.type+"-ok-"+c.newid+'">'+g+"</button>"),d+="</div>",e='<div id="gcb-smoke-bg-'+c.newid+'" class="gcb-smokebg"></div><div class="gcb-dialog gcb-smoke '+i+'"><div class="gcb-dialog-inner"><div class="gcb-dialog-title">'+a.title+"</div>"+b+f+d+"</div></div>",a.init?a.finishbuild(b,c,e):a.listen(window,"load",function(){a.finishbuild(b,c,e)})},finishbuild:function(b,c,d){var e=document.getElementById("smoke-out-"+c.newid);for(e.className="gcb-smoke-base gcb-smoke-visible  gcb-smoke-"+c.type,e.innerHTML=d;""===e.innerHTML;)e.innerHTML=d;if(a.smoketimeout[c.newid]&&clearTimeout(a.smoketimeout[c.newid]),"undefined"==typeof c.params.skipListeners||c.params.skipListeners!==!0)switch(a.listen(document.getElementById("gcb-smoke-bg-"+c.newid),"click",function(){a.destroy(c.type,c.newid),"prompt"===c.type||"confirm"===c.type?c.callback(!1):"alert"===c.type&&"undefined"!=typeof c.callback&&c.callback()}),c.type){case"alert":a.finishbuildAlert(b,c,d);break;case"confirm":a.finishbuildConfirm(b,c,d);break;case"prompt":a.finishbuildPrompt(b,c,d);break;default:throw"Unknown type: "+c.type}},finishbuildAlert:function(b,c){a.listen(document.getElementById("alert-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),"undefined"!=typeof c.callback&&c.callback()}),document.onkeyup=function(b){b||(b=window.event),(13===b.keyCode||32===b.keyCode||27===b.keyCode)&&(a.destroy(c.type,c.newid),"undefined"!=typeof c.callback&&c.callback())}},finishbuildConfirm:function(b,c){a.listen(document.getElementById("confirm-cancel-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!1)}),a.listen(document.getElementById("confirm-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!0)}),document.onkeyup=function(b){b||(b=window.event),
13===b.keyCode||32===b.keyCode?(a.destroy(c.type,c.newid),c.callback(!0)):27===b.keyCode&&(a.destroy(c.type,c.newid),c.callback(!1))}},finishbuildPrompt:function(b,c){var d=document.getElementById("dialog-input-"+c.newid);setTimeout(function(){d.focus(),d.select()},100),a.listen(document.getElementById("prompt-cancel-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(!1)}),a.listen(document.getElementById("prompt-ok-"+c.newid),"click",function(){a.destroy(c.type,c.newid),c.callback(d.value)}),document.onkeyup=function(b){b||(b=window.event),13===b.keyCode?(a.destroy(c.type,c.newid),c.callback(d.value)):27===b.keyCode&&(a.destroy(c.type,c.newid),c.callback(!1))}},destroy:function(b,c){var d=document.getElementById("smoke-out-"+c),e=document.getElementById(b+"-ok-"+c),f=document.getElementById(b+"-cancel-"+c);d.className="smoke-base",e&&(a.stoplistening(e,"click",function(){}),document.onkeyup=null),f&&a.stoplistening(f,"click",function(){}),a.i=0,d.innerHTML=""},alert:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"alert",callback:c,params:d,newid:e}),e},confirm:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"confirm",callback:c,params:d,newid:e}),e},prompt:function(b,c,d){"object"!=typeof d&&(d=!1);var e=a.newdialog();return a.build(b,{type:"prompt",callback:c,params:d,newid:e}),e},listen:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):!1},stoplistening:function(a,b,c){return a.removeEventListener?a.removeEventListener("click",c,!1):a.detachEvent?a.detachEvent("on"+b,c):!1}};a.init=!0,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define("smoke",a):this.smoke=a}(),define("tooltip",["jquery","cb/lib/jquery.service-nodes"],function(a){"use strict";var b="gcb-",c=function(a,b){this.init("gcbTooltip",a,b)};c.prototype={constructor:c,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};if(!this.options.skipEnter||!this.options.skipEnter(b)){if(this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)}},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var c,d,e,f,g,h,i=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(i),i.isDefaultPrevented())return;switch(c=this.tip(),this.setContent(),this.options.animation&&c.addClass(b+"fade"),g="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,c.detach().css({top:0,left:0,display:"block"}),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element),d=this.getPosition(),e=c[0].offsetWidth,f=c[0].offsetHeight,g){case"bottom":h={top:d.top+d.height,left:d.left+d.width/2-e/2};break;case"top":h={top:d.top-f,left:d.left+d.width/2-e/2};break;case"left":h={top:d.top+d.height/2-f/2,left:d.left-e};break;case"right":h={top:d.top+d.height/2-f/2,left:d.left+d.width}}this.applyPlacement(h,g),this.$element.trigger("shown")}},applyPlacement:function(a,c){var d,e,f,g,h=this.tip(),i=h[0].offsetWidth,j=h[0].offsetHeight;h.offset(a).addClass(b+c).addClass(b+"in"),d=h[0].offsetWidth,e=h[0].offsetHeight,"top"==c&&e!=j&&(a.top=a.top+j-e,g=!0),"bottom"==c||"top"==c?(f=0,a.left<0&&(f=-2*a.left,a.left=0,h.offset(a),d=h[0].offsetWidth,e=h[0].offsetHeight),this.replaceArrow(f-i+d,d,"left")):this.replaceArrow(e-j,e,"top"),g&&h.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),c=this.getTitle();a.find("."+b+"tooltip-inner")[this.options.html?"html":"text"](c),a.removeClass("fade in top bottom left right".replace(/\b(\S)/g,b+"$1")),a.cbMarkNode()},hide:function(){function c(){var b=setTimeout(function(){d.off(a.support.transition.end).detach()},500);d.one(a.support.transition.end,function(){clearTimeout(b),d.detach()})}var d=this.tip();return d.removeClass(b+"in"),a.support.transition&&this.$tip.hasClass(b+"fade")?c():d.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.title?c.title.call(b[0]):c.title)||b.attr("data-original-title")},tip:function(){return this.$tip=this.$tip||a(this.options.template).cbMarkNode()},arrow:function(){return this.$arrow=this.$arrow||this.tip().find("."+b+"tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(c){var d=c?a(c.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass(b+"in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var d=a.fn.tooltip;a.fn.gcbTooltip=function(d){return this.each(function(){var e=a(this),f=e.data(b+"tooltip"),g="object"==typeof d&&d;f||e.data(b+"tooltip",f=new c(this,g)),"string"==typeof d&&f[d]()})},a.fn.gcbTooltip.Constructor=c,a.fn.gcbTooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="gcb-tooltip"><div class="gcb-tooltip-arrow"></div><div class="gcb-tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.gcbTooltip.noConflict=function(){return a.fn.gcbTooltip=d,this}}),define("cb/ui/tooltip",["jquery","underscore","tooltip"],function(a,b){"use strict";var c={container:"body",animation:!1};a.fn.gTip=function(d){return this.each(function(){a(this).gcbTooltip(b.isObject(d)?a.extend({},c,d):d)})}}),define("cb/ui/master/coreMasterUi",["jquery","underscore","util","../../ui/tooltip"],function(a,b,c){"use strict";function d(d,e){function f(a){return a.originalEvent.gcbTriggered}function g(c){var d,g=a(c),h=e.contentMasked,i=e.contentMaskedPartially;return"OPTION"===c.nodeName?void g.closest("select").gTip({title:i}):g.is(":input")?void g.gTip({title:h,skipEnter:f}):void g.gTip({title:h,trigger:"manual",skipEnter:f}).on("show",function(){g.cbMarkNode({noChildren:!0}).css({outline:"1px solid #e3b33b"}),b.delay(function(){g.cbUnmarkNode()},0)}).on("hide",function(){g.cbMarkNode({noChildren:!0}).css({outline:0}),b.delay(function(){g.cbUnmarkNode()},0)}).on("focus","*",function(){d=!0,g.gTip("show")}).on("blur","*",function(){d=!1,g.gTip("hide")}).hover(function(){g.gTip("show")},function(){d||g.gTip("hide")})}function h(){c.log("CORE MASTER UI: INITIALIZING ",d,e),d.onMaskedElement.add(g)}h()}return d}),define("text!cb/ui/master/toolbar.html",[],function(){return'<div class="gcb-toolbar">\r\n  <div class="gcb-toolbar-top gcb-drag-handle"><div class="gcb-toolbar-grips"></div></div>\r\n  <div class="gcb-toolbar-content">\r\n    <div class="gcb-toolbar-cell gcb-toolbar-cell-content">\r\n      <%= text %>\r\n    </div>\r\n    <div class="gcb-toolbar-cell gcb-toolbar-cell-exit">\r\n      <div class="gcb-toolbar-exit" title="<%= exitTitle %>">\r\n        <div class="gcb-toolbar-icon-exit"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),define("cb/lib/jquery.draggable",["jquery"],function(a){"use strict";var b="gcb-dragged",c=".gcbDrag";a.fn.draggable=function(d){function e(a){var c=j.offset();j.addClass(b).attr("unselectable","on"),m={x:a.pageX-c.left,y:a.pageY-c.top}}function f(a){j.css({left:a.pageX-m.x-i.scrollLeft(),top:a.pageY-m.y-i.scrollTop()})}function g(){k=!1,j.removeClass(b).removeAttr("unselectable"),l()}var h,i=a(document),j=this,k=!1,l=d.onDragEnd||a.noop,m={},n=d.handles||{};return h=n.mouse?j.find(n.mouse):j,h.on("mousedown"+c,function(a){k=!0,e(a)}),i.on("mousemove"+c,function(a){k&&f(a)}),i.on("mouseup"+c,g),h=n.touch?j.find(n.touch):j,h.on("touchstart",function(a){e(a.originalEvent.changedTouches[0])}),h.on("touchmove",function(a){a.preventDefault(),f(a.originalEvent.changedTouches[0])}),h.on("touchend",g),this},a.cleanUpDraggable=function(){a(document).off(c)}}),define("cb/ui/master/topmostMasterUi",["jquery","underscore","json","util","../../constants","../notify","../status","smoke","./coreMasterUi","text!./toolbar.html","cb/lib/jquery.draggable","cb/lib/jquery.service-nodes"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(k,m){function n(f){var g=c.parse(sessionStorage.getItem(e.TOOLBAR_POSITION_KEY));I=b.template(j,{text:d.supplant(m.toolbarContent,{sessionId:f}),exitTitle:m.exitBtnTitle}),I=a(I),g&&I.css({top:g.y,left:g.x}),J=I.find(".gcb-toolbar-exit"),J.on("click",p),I.cbMarkNode().appendTo(O),I.draggable({handles:{mouse:".gcb-drag-handle"},onDragEnd:t}),b.delay(function(){I&&(a(window).on("resize.gcbToolbar",t),t())},1e3)}function o(){if(L)try{h.destroy("confirm",L)}catch(a){}}function p(){return J.hasClass("gcb-disabled")?!1:(g(null),o(),s(),void k.exitSession())}function q(){J&&J.addClass("gcb-disabled")}function r(){J&&J.removeClass("gcb-disabled")}function s(){I&&(I.remove(),I=null,a.cleanUpDraggable(),a(window).off(".gcbToolbar"),sessionStorage.removeItem(e.TOOLBAR_POSITION_KEY))}function t(){var a,b,d,f,g,h,i;I&&(a=parseInt(I.css("top"),10),b=I.offset().left-N.scrollLeft(),d=I.innerWidth(),f=I.innerHeight(),g=N.width(),h=N.height(),i=d/2,a+f>h?I.css("top",h-f):0>a&&I.css("top",0),b+i>g?I.css("left",g-i):0>b&&I.css("left",0-i),sessionStorage.setItem(e.TOOLBAR_POSITION_KEY,c.stringify({x:I.css("left"),y:I.css("top")})))}function u(a){var b,c=a&&a.reason,d={};d[l.SELF]=m.youLeft,d[l.EXTERNAL]=m.agentLeft,d[l.TIMEOUT]=m.sessionTimedOut,d[l.INACTIVITY_TIMEOUT]=m.sessionInactiveTimedOut,d[l.SERVER_UNAVAILABLE]=m.serverUnavailable,d[l.SESSIONS_OVER_LIMIT]=m.sessionsOverLimit,d[l.UNKNOWN_REASON]=m.agentLeft,d[l.ERROR]=m.sessionError,b=m.agentLeft,f(d[c]||b)}function v(a){return d.supplant(m.sessionStarted,{sessionId:a})}function w(){g(m.writeModeInProgress+' <a class="gcb-appStatus-link" href="javascript:">'+m.downgradeMode+"</a>"),a(".gcb-appStatus-link").click(function(){k.downgradeMode()})}function x(a){a&&(d.log("MASTER UI: HANDLING CONTINUATION"),n(a.token),a.agents.length?a.mode.write&&(P=!0,w()):g(K||v(a.token)))}function y(a){d.log("MASTER UI: HANDLING CONNECT"),n(a.token),g(K||v(a.token)),P=!!a.mode.write}function z(a){d.log("MASTER UI: HANDLING DISCONNECTION"),s(),o(),u(a),g(null)}function A(){P?w():g(null),f(m.agentJoined)}function B(a){var b={back:m.navBack,forward:m.navForward,refresh:m.navRefresh,url:m.navUrl};d.log("MASTER UI: HANDLING NAVIGATION ",a.command,b[a.command]),q(),f(b[a.command])}function C(){r(),f(m.navFailed)}function D(a){a.write?(P=!0,w(),f(m.modeUpgraded)):a.pointer&&(P=!1,g(null),f(m.modeDowngraded))}function E(a){L=h.confirm(m.modeUpgradeRequested,a,{reverseButtons:!0})}function F(a){K=a}function G(a){O=a}function H(){d.log("MASTER UI: INITIALIZING"),f.init({notificationSuffix:"-yellow"}),k.onInitialized.add(x),k.onSessionStarted.add(y),k.onSessionEnded.add(z),k.onAgentJoined.add(A),k.onAgentNavigated.add(B),k.onNavigationFailed.add(C),k.onModeChanged.add(D),k.onModeUpgradeRequested.add(E),new i(k,m)}var I,J,K,L,M=this,N=a(window),O="body",P=!1;H(),b.extend(M,{setStartMessage:F,setContainer:G})}var l=e.sessionEndTriggers;return h.beforeAppend=function(a){d.log('MARKING DIALOG AS "SERVICE"',a),d.markServiceNode(a)},k}),define("cb/ui/master/childMasterUi",["util","./coreMasterUi"],function(a,b){"use strict";function c(c,d){return a.log("CHILD MASTER UI: INITIALIZING ",c,d),new b(c,d)}return c}),define("nls",{agentJoined:"Representative has joined the session",youLeft:"You have left the session. Co-browse is now terminated.",sessionTimedOut:"Session timed out. Co-browse is now terminated.",sessionInactiveTimedOut:"Session timed out. Co-browse is now terminated.",agentLeft:"Representative has left the session. Co-browse is now terminated.",sessionError:"Unexpected error occurred. Co-browse is now terminated.",sessionsOverLimit:"Representative is currently busy with another Co-browse session. Co-browse is now terminated.",serverUnavailable:"Could not reach Co-browse server. Co-browse is now terminated.",sessionStarted:"Your Co-browse session ID is {sessionId}. Please spell it to our representative to continue with co-browsing.",navRefresh:"Representative has refreshed the page. Reloading.",navBack:'Representative has pressed the "Back" button. Reloading page.',navForward:'Representative has pressed the "Forward" button. Reloading page.',navUrl:"Representative has requested navigation. Reloading page.",navFailed:"Navigation request by representative has failed.",toolbarContent:"Session ID: {sessionId}",contentMasked:"Content is hidden from representative",contentMaskedPartially:"Some content is hidden from representative",exitBtnTitle:"Exit Co-browse session",areYouOnPhone:"Are you on the phone with our representative?",areYouOnPhoneOrChat:"Are you on the phone or chat with our representative?",connectBeforeCobrowse:"You need to be connected with our representative to continue with co-browsing. Please call us or start a live chat with us, and then start Co-browse again.",browserUnsupported:'Unfortunately, your browser is not currently supported.<br><br> Supported browsers are: <ul><li><a target="_blank" href="http://www.google.com/chrome">Google Chrome</a></li><li><a target="_blank" href="http://www.firefox.com/">Mozilla Firefox</a></li><li><a target="_blank" href="http://microsoft.com/ie">Internet Explorer 9 and above</a></li><li><a target="_blank" href="https://www.apple.com/safari">Safari 6 and above</a></li></ul>',sessionStartedAutoConnect:"Co-browse session started. Waiting for representative to connect to the session...",chatIsAlreadyRunning:"Chat is already running on another page.",modalTitle:"Co-browse",modalYes:"Yes",modalNo:"No",writeModeInProgress:"Agent has control over the page.",downgradeMode:"Revoke control",modeUpgraded:"Co-browse session was upgraded. Agent has control over the page.",modeDowngraded:"Co-browse session was downgraded. Agent has no control",modeUpgradeRequested:'Agent requests upgrading Co-browse session to "write" mode. In "write" mode agent will have control over the page.'}),define("cb/integrationEntryPoint",["jquery","util","cb/app/master/masterApi","cb/app/master/topmostMasterApp","cb/app/master/childMasterApp","cb/ui/master/topmostMasterUi","cb/ui/master/childMasterUi","nls"],function(a,b,c,d,e,f,g,h){"use strict";return{initTopmostApp:function(a,b){return b("cobrowse entry point: initializing topmost application"),new c.CobrowseApi(new d(a,b))},initChildApp:function(d,f){var i,j=a.Deferred();return f("cobrowse entry point: initializing child application"),i=new e(d,f),i.done(function(e){var i,k=new c.ChildCobrowseApi(e);d.localization&&(i=b.fetchLocalization(d.localization,h)),a.when(i).done(function(){f("child context: localization loaded",arguments),d.disableBuiltInUI||(f("child context: initializing ui"),new g(k,h))}),j.resolve(k)}),j.promise()}}}),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("dependencies/validate-arguments",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("validate-arguments",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){function d(a){return f.reduce(a,function(a,b,c){return b.isa||(j.isPlainObject(b)&&(b=d(b)),b={isa:b}),a[c]=b,a},{})}function e(a,b,c,d){return f.isEmpty(b)?"missing "+a+" argument "+c:a+" argument "+c+' is not a "'+d+'"'}var f=a("lodash"),g=function(a,b,c){var d=[],e=a.length;if(0===e)return d;var f=0>b?Math.max(0,b+e):b||0;for(void 0!==c&&(e=0>c?c+e:c);e-->f;)d[e-f]=a[e];return d},h=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},i=["isArray","isBoolean","isDate","isElement","isEmpty","isFinite","isFunction","isNull","isNumber","isObject","isRegexp","isString"],j={isWhole:function(a){return f.isNumber(a)&&a%1===0},isReal:function(a){return f.isNumber(a)&&!isNaN(a)},isNatural:function(a){return j.isWhole(a)&&a>=0},isPlainObject:function(a){return f.isObject(a)&&!f.isArray(a)&&!f.isFunction(a)},isPrimitive:function(a){return-1!==f.indexOf(["number","boolean","string"],a)}};f.each(i,function(a){j[a]=f[a]});var k=function(a,b,c){return{isValid:function(){return 0===a.length},errors:function(){return a},get:function(a){return b?b[a]:null},values:function(){return f.isObject(b)?f.values(b):f.isArray(b)?b:[]},errorString:function(){var d=f.isObject(b)?"named":"positional";return f.isEmpty(c)?a[0]:f.map(a,function(a){return e(d,b[a],a,c[a].isa)}).join(", ")}}},l={isValidOfType:function(a,b){var c="is"+h(b);return void 0===j[c]?!1:j[c](a)},isValid:function(a,b){return f.isUndefined(a)||f.isNull(a)?b.optional:f.isString(b.isa)?l.isValidOfType(a,b.isa):j.isPlainObject(b.isa)?l.validate(a,b.isa).isValid():"function"==typeof b.isa?a instanceof b.isa:!1},validatePositional:function(a,b){return l.positional(a,b)},validateObject:function(a,b){return l.named(a,b)},validate:function(a,b){var c=[];return f.isEmpty(b)?k(["missing validation spec"]):!a instanceof Object?k(["invalid values"]):j.isPrimitive(b)?l.positional(a,[b]):(b=d(b),c=f.reduce(b,function(b,c,d){return l.isValid(a[d],c)||b.push(d),b},[]),k(c,a,b))},named:function(a,b){return j.isPlainObject(a)?(f.isArguments(a)&&(a=a[0]),l.validate(a,b)):k(["missing named arguments"])},positional:function(a,b){return f.isArray(a)||f.isArguments(a)?(f.isArray(b)||(b=g(arguments,1)),l.validate(a,b)):k(["missing positional arguments"])}};return c.exports=l,c.exports})}.call(this),define("chat/cookieWrapper",["jquery","jquery.cookie"],function(a){"use strict";return a}),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("util",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/util",["require","exports","module","validate-arguments","URIjs","lodash","./cookie","simply-deferred"],a)}}).call(this,function(a,b,c){var d=a("validate-arguments"),e=a("simply-deferred").Deferred,f=a("URIjs"),g=a("lodash"),h=a("./cookie"),i={STATE_COOKIE_NAME:"gcState",COMETD_COOKIE_NAME:"gcCometdState",TRANSIENT_COOKIE_NAME:"gcCurrentSession",REMOTE_SESSION_CHECK_INTERVAL:200};return function(){"use strict";function a(a){throw new TypeError("Genesys Chat: "+a)}function b(a){var b=a.promise();return{done:b.done,fail:b.fail}}function j(b,c){var e=d.validate(b,c);e.isValid()||a(e.errorString())}function k(a){return a=a||{},{error:{code:a.code||0,description:a.description}}}function l(a,b){return function(c){b("transport failed ",c),a.reject(k(c&&c.error))}}function m(a){var b=document.createElement("a");return b.setAttribute("href",a),b}function n(a){return setTimeout(a,0)}function o(a,b){return a.replace(/\{([^{}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}function p(){return f&&new f(document.location.href).domain()}function q(a,b,c){return void 0!==b?void h.cookie(a,b,g.extend({},c,{domain:p(),path:"/"})):h.cookie(a,b,c)}function r(a){return a=a.replace(/[\x00-\x08]/g,"")}c.exports={defer:n,throwError:a,getSimplePromise:b,validateObject:j,createErrorEvent:k,createTransportFailureResolver:l,simpleParseUrl:m,noop:function(){return void 0},Deferred:e,cookie:h.cookie,rootCookie:q,supplant:o,getCookieDomain:p,constants:i,filterInput:r}}(),c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/templates",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/templates",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){var d=a("lodash");return b["src/ui/templates/chatMessage.html"]=function(a){var b,c="",e=d.escape;Array.prototype.join;return c+='<div class="gwc-chat-message',a.isAgent&&(c+=" gwc-chat-agentMessage"),a.from||(c+=" gwc-chat-systemMessage"),c+='">\r\n  ',a.from&&(c+='\r\n  <div class="gwc-chat-message-author">'+e(a.from)+'</div>\r\n  <div class="gwc-chat-message-time">['+(null==(b=a.when)?"":b)+"]</div>\r\n  "),c+='\r\n  <div class="gwc-chat-message-text">\r\n    ',a.isUrl&&(c+='<a href="'+(null==(b=a.url)?"":b)+'" target="_blank">'),c+="\r\n    "+(null==(b=a.message)?"":b)+"\r\n    ",a.isUrl&&(c+="</a>"),c+="\r\n  </div>\r\n</div>"},b["src/ui/templates/chatRegistration.html"]=function(a){var b,c="";d.escape;return c+='<div>\r\n  <div class="gwc-chat-branding"><div class="gwc-chat-logo"></div></div>\r\n  <div class="gwc-chat-content-area">\r\n    <div class="gwc-chat-registration-intro">\r\n      <p class="gwc-chat-registration-intro-p">\r\n        '+(null==(b=a.nls.regWelcomePart1)?"":b)+'</p>\r\n      <p class="gwc-chat-registration-intro-p">\r\n        '+(null==(b=a.nls.regWelcomePart2)?"":b)+'</p>\r\n    </div>\r\n    <form>\r\n      <div class="gwc-chat-controls-container">\r\n        <div class="gwc-chat-control-group gwc-chat-control-group-required">\r\n          <label for="gcbChatFirstName"\r\n                 class="gwc-chat-label">\r\n            *'+(null==(b=a.nls.regFirstName)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatFirstName" name="FirstName"\r\n                   class="gwc-chat-registration-input"\r\n                   type="text"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n        <div class="gwc-chat-control-group">\r\n          <label for="gcbChatLastName" class="gwc-chat-label">\r\n            '+(null==(b=a.nls.regLastName)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatLastName" name="LastName"\r\n                   class="gwc-chat-registration-input"\r\n                   type="text"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n        <div class="gwc-chat-control-group gwc-chat-control-group-required">\r\n          <label for="gcbChatEmail" class="gwc-chat-label">\r\n            *'+(null==(b=a.nls.regEmail)?"":b)+'\r\n          </label>\r\n          <div class="gwc-chat-controls">\r\n            <input id="gcbChatEmail" name="EmailAddress"\r\n                   class="gwc-chat-registration-input"\r\n                   type="email"/>\r\n            <div class="gwc-chat-validation-error"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="gwc-chat-registration-buttons">\r\n        <div class="gwc-chat-registration-skip">\r\n          <button class="gwc-chat-button gwc-chat-button-light" id="gcbChatSkipRegistration" type="button">\r\n            '+(null==(b=a.nls.regSkip)?"":b)+'\r\n          </button>\r\n        </div>\r\n        <div class="gwc-chat-registration-submit">\r\n          <button class="gwc-chat-button" id="gcbChatRegister" type="submit">\r\n            '+(null==(b=a.nls.regSubmit)?"":b)+"\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>"},b["src/ui/templates/chatTemplates.html"]=function(a){var b,c="";d.escape;return c+='<!-- embeddedWindow.html -->\r\n<script type="text/html" data-gwc-template="embeddedWindow">\r\n'+(null==(b=embeddedWindowTemplate)?"":b)+'\r\n</script>\r\n\r\n<!-- chatRegistration.html -->\r\n<script type="text/html" data-gwc-template="chatRegistration">\r\n'+(null==(b=chatRegistrationTemplate)?"":b)+'\r\n</script>\r\n\r\n<!-- chatView.html -->\r\n<script type="text/html" data-gwc-template="chatView">\r\n'+(null==(b=chatViewTemplate)?"":b)+'\r\n</script>\r\n\r\n<!-- chatMessage.html -->\r\n<script type="text/html" data-gwc-template="chatMessage">\r\n'+(null==(b=chatMessageTemplate)?"":b)+'\r\n</script>\r\n\r\n<!-- chatTyping.html -->\r\n<script type="text/html" data-gwc-template="chatTyping">\r\n'+(null==(b=chatTypingTemplate)?"":b)+"\r\n</script>"},b["src/ui/templates/chatTyping.html"]=function(a){var b,c="";d.escape;return c+='<div class="gwc-chat-message gwc-chat-typingMessage">\r\n  <div class="gwc-chat-message-text">'+(null==(b=a.message)?"":b)+"</div>\r\n</div>"},b["src/ui/templates/chatView.html"]=function(a){var b,c="";d.escape;return c+='<div>\r\n  <div class="gwc-chat-branding"><div class="gwc-chat-logo"></div></div>\r\n  <div class="gwc-chat-content-area">\r\n    <div class="gwc-chat-message-container">\r\n      <div class="gwc-persistent-chat-messages"></div>\r\n    </div>\r\n    <form class="gwc-chat-message-form" action="javascript:">\r\n      <textarea class="gwc-chat-input gwc-chat-message-input" maxlength="500">'+(null==(b=a.message)?"":b)+"</textarea>\r\n    </form>\r\n  </div>\r\n</div>\r\n"},b["src/ui/templates/embeddedWindow.html"]=function(a){var b,c="";d.escape;return c+='<div class="gwc-chat-embedded-window">\r\n  <div class="gwc-chat">\r\n    <div class="gwc-chat-head gwc-drag-handle">\r\n      <div class="gwc-chat-window-controls">\r\n        <div class="gwc-chat-control gwc-chat-control-minimize">\r\n          <div class="gwc-chat-icon gwc-chat-icon-minimize"></div>\r\n        </div>\r\n        <div class="gwc-chat-control gwc-chat-control-close">\r\n          <div class="gwc-chat-icon gwc-chat-icon-close"></div>\r\n        </div>\r\n      </div>\r\n      <div class="gwc-chat-title">'+(null==(b=a.chatTitle)?"":b)+'</div>\r\n    </div>\r\n    <div class="gwc-chat-body">\r\n\r\n    </div>\r\n  </div>\r\n</div>'},c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/templatesProvider",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/templatesProvider",["require","exports","module","jquery","lodash","./templates"],a)}}).call(this,function(a,b,c){function d(){"use strict";function b(a,b,c){f.ajax({dataType:b?"jsonp":"",url:a}).done(function(a){l("templates data: ",a),c(a)}).fail(function(){throw new Error("failed to load tempates",arguments)})}function c(a){var b=/^\S*\/(\S*)\.(\S*)$/g,c=b.exec(a);return c[1]}function d(a){return g.template(a,null,{variable:"data"})}function i(){var b={},e=a("./templates");return g.forEach(e,function(a,e){var g,h=c(e);g=f('script[data-gwc-template="'+h+'"]').html(),g?(l('template "'+h+'" is found on the page'),b[h]=d(g)):b[h]=a}),b}function j(a,b){a&&f.isFunction(a)&&a(b)}function k(a,c,e){b(a,c,function(a){var b={};a&&(f(a).filter("script[data-gwc-template]").each(function(){var a=f(this),c=a.attr("data-gwc-template"),e=a.html();c&&e&&(b[c]=d(e))}),l("following templates were found in loaded file: ",b),l("these templates will take highest priority")),e(b)})}var l=f.noop;this.getTemplates=function(a,b,c){var d=a.templates;l=a.logger||f.noop,e||(e=i()),d?(l("templates to be loaded from "+d),h[d]?(l("returning templates from cache "+d),j(c,f.extend({},e,h[d]))):k(d,b,function(a){h[d]=a,j(c,f.extend({},e,h[d]))})):j(c,e)}}var e,f=a("jquery"),g=a("lodash"),h={};return c.exports=new d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("simpleEvent",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/simpleEvent",["require","exports","module","lodash"],a)}}).call(this,function(a,b,c){function d(){"use strict";var a=[];this.add=function(b){a.push(b)},this.fire=function(b){e.each(a,function(a){a(b)})},this.remove=function(b){a=e.without(a,b)}}var e=a("lodash");return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("css/chat.min.css",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/css/chat.min.css",["require","exports","module"],a)}}).call(this,function(a,b,c){var d=".gwc-chat-embedded-window{position:fixed;right:20px;bottom:0;z-index:9999999999;width:300px;border:1px solid #e3b33b;color:#000;background:#f9f9f9}.gwc-chat,.gwc-chat button,.gwc-chat div,.gwc-chat input,.gwc-chat textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font:normal normal normal 12px/1.3 Tahoma,sans-serif;text-align:left}.gwc-chat-button{padding:4px 8px;-webkit-border-radius:3px;border-radius:3px;background-clip:padding-box;border:1px solid #cacaca;color:#fff;font-weight:700!important;cursor:pointer;background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#66b1cf),to(#5da1bc));background-image:-webkit-linear-gradient(top,#66b1cf,#5da1bc);background-image:-moz-linear-gradient(top,#66b1cf,#5da1bc);background-image:-o-linear-gradient(top,#66b1cf,#5da1bc);background-image:linear-gradient(to bottom,#66b1cf,#5da1bc)}.gwc-chat-button:hover{background:#66b1cf}.gwc-chat-button:active{background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#5da1bc),to(#66b1cf));background-image:-webkit-linear-gradient(top,#5da1bc,#66b1cf);background-image:-moz-linear-gradient(top,#5da1bc,#66b1cf);background-image:-o-linear-gradient(top,#5da1bc,#66b1cf);background-image:linear-gradient(to bottom,#5da1bc,#66b1cf);background-clip:padding-box}.gwc-chat-button-light{color:#4A5965;font-weight:400!important;background-color:#f4f4f4;background-image:-webkit-gradient(linear,left top,left bottom,from(#f4f4f4),to(#edefef));background-image:-webkit-linear-gradient(top,#f4f4f4,#edefef);background-image:-moz-linear-gradient(top,#f4f4f4,#edefef);background-image:-o-linear-gradient(top,#f4f4f4,#edefef);background-image:linear-gradient(to bottom,#f4f4f4,#edefef)}.gwc-chat-button-light:hover{background-color:#fff;background-image:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#f7f7f7));background-image:-webkit-linear-gradient(top,#fff,#f7f7f7);background-image:-moz-linear-gradient(top,#fff,#f7f7f7);background-image:-o-linear-gradient(top,#fff,#f7f7f7);background-image:linear-gradient(to bottom,#fff,#f7f7f7)}.gwc-chat-button-light:active{background-color:#eaeaea;background-image:-webkit-gradient(linear,left top,left bottom,from(#eaeaea),to(#fff));background-image:-webkit-linear-gradient(top,#eaeaea,#fff);background-image:-moz-linear-gradient(top,#eaeaea,#fff);background-image:-o-linear-gradient(top,#eaeaea,#fff);background-image:linear-gradient(to bottom,#eaeaea,#fff)}.gwc-chat-input{width:100%;border:1px solid #a5acb2;background:#fff;height:20px}.gwc-chat-head{padding:3px 7px 3px 10px;background:#e3b33b;cursor:default}.gwc-chat-head .gwc-chat-title{display:inline;font-weight:700;color:#fff}.gwc-chat-window-controls{float:right}.gwc-chat-control{display:inline-block;width:19px;height:19px;cursor:pointer;border:1px solid transparent;border-radius:2px;-webkit-transition:all .15s ease-out;-moz-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out}.gwc-chat-control:hover{border-color:#88919D}.gwc-chat-control:active{border-color:#88919D;background:#96A2B0}.gwc-chat-icon{display:inline-block;width:16px;height:16px}.gwc-chat-icon-close{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAoklEQVR4Aa3PsWoCURAF0G2zsi/gH0UxbUJM8jOR2KxVUiio+IUilmo9R1gWptDSO9XAgZlbPSZqY1NN7t6M1AnGDkJr2G3FDAeTBB/grNWozZzAd4KBuTPC1r8QHS5VxrM5Qjd5LlMZWAFYa+41+RMCYXMDFD/04PZEfm5nCS5aTYL3/vOFko18JXixFxaGfaNfHL0meDLyqWQjUxN19ZBcAT16vTh64lq3AAAAAElFTkSuQmCC)}.gwc-chat-icon-minimize{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQAAAAA3iMLMAAAAAnRSTlMAAHaTzTgAAAAPSURBVHgBYyAG2P9hgjEBDM8BPtXRQkEAAAAASUVORK5CYII=)}.gwc-chat-body{height:316px}.gwc-chat-branding{height:36px;padding:8px 10px}.gwc-chat-logo{width:100px;height:25px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAZCAMAAADwgHt5AAAA21BMVEUAAAAiHh8iHh8iHh8iHh8iHh8iHh9fIiAiHh8iHh8iHh8iHh8iHh8iHh8iHh8iHh/uLiTuLiQiHh8iHh8iHh8iHh/uLiQiHh8iHh/uLiQiHh8iHh8iHh8iHh8iHh8iHh/uLiTuLiQiHh/uLiQiHh/uLiTuLiTuLiTuLiQiHh8iHh8iHh8iHh8iHh/uLiTuLiTuLiTuLiTuLiQiHh/uLiTuLiTuLiTuLiQiHh8iHh/uLiTuLiTuLiTuLiTuLiTuLiTuLiQiHh/uLiTuLiTuLiTuLiTuLiQiHh/uLiQn2tRqAAAAR3RSTlMASiFCG/paAQUSkW3xwgowS9UkdGKejcznBZiKpd6DeuA3r1M2PkQPKzq81ynrCiOWHXMN7TFYe7ZRx6zAZ2y0FVSh9mAZhILhxlwAAAN1SURBVEjHtZXZmqJADIXDWoAbuICtCCq477ttq6093RPe/4kmwW+G+ea2x/+GsqrMSU6CAjO/De3rYb1e7zuDuYBncLOXp2W0e6FlJ3LXC3gCnXPbhoz5F/x/dokLT+fNEfB0nDcghrbdJ+x9tIK/iXPE6wa+yWm7A/saRZFNRJ9r181kzOYMmbEB3+MzcfqL3jybA9exf2t0EQuVagO14rebkmyXdibSGx5+9IAxAtRyKj2l0Xfbdhn8TJLEeV+610/XfXN+XMTpfQBEGdESkCHVPD9H7Sk2R6ZVOFZTD9XwWGjG6XGj0KiWJV8CwmgG6qZyHAeSIUsC2n2xc5OMbQeWyZDv5bBeyiTMroZEPQYTZwUkLBKUuGlUMECYHgd37JqsiHWzkB6px7xCbl3h5dY5LM+O4ywP/ZsYttsLFrFwnBVStHCmq/EEvaKJ2FLUJmIJYg39skxLBVrYnSq+NM0jl9JAq4SYUys1MzzKsCOv9oOXjP02OQgO66MFhBIEgU7e5RXaLddxRJVQhapH0bpYM9J0LLWFVVoJYWEowNQwVrBV5h3DEDDsbcmk94u9+PpaRZcP+vCxemGR7kMk5BkWVWzpd10neyQT6yrt+1gx8tjkTYvqa1DiJim+cmy6DbKG3siElPfVwN0mGT+c/ern8GFXAYhS1U9FMK8R+bzCIqkjOXILtXTXN4tjRAw3YI7xDmPMPfo1UQwgzu0hiOjj1Gac86ED4truPBrfUoGppiKFjcyUi5nIVMPXx6ZKse7U6aaACvryDPmGGdQR2WSIkuTQ4ddkMBjw49ZbJqdbWgKSX4xOIjpOTHjwR6RSzKMOGRR/NoXSTKv9/o2QPaxtgLhwS9b7fmcx7PUv7pkGgQtJO69VqHcq+zalLA0SoPIzEahhi6dckSmlmGIijavwEXnCigp91+KJZuy3JKX9aI3jLoBJBwi9ZpNcGLN56IfhGEf8nlBQEqgIuY71IGxgwwBvZtHpZMOFo2ayEV4Y5Gk6IOWlv/44pQrO2d0v4A+ypSGRryncohYSxymJTLgSC3MCRl0kWlVD1JDwFM5twqJQmiBRU7Nw89WuRyz+/Vsc6TShcRGY6V2/KybJKTFnV5ZUwf7RhakAwYtXGQjDwxG7XZZ0XSnCc9BxpsJTEVVyKWfAUzFqONMNeC4iLm0E/MMv4YOQ3X4CtuYAAAAASUVORK5CYII=)no-repeat}.gwc-chat-content-area{padding:10px}.gwc-chat-registration-intro{margin:0 0 24px}.gwc-chat-registration-intro-p{font-size:1em;margin:0 0 10px}.gwc-chat-controls-container{display:table;width:100%;table-layout:fixed}.gwc-chat-control-group{display:table-row;height:2.3em}.gwc-chat-controls,.gwc-chat-label{display:table-cell}.gwc-chat-controls{width:100%}.gwc-chat-label{width:6.4em;font-size:1em}.gwc-chat-label-invalid{color:#b8400b}.gwc-chat-validation-error{color:#b8400b;margin-bottom:.3em;display:none}.gwc-chat-registration-input{width:100%}.gwc-chat input.gwc-chat-registration-input{font-size:inherit;padding:0 1px}.gwc-chat-registration-skip,.gwc-chat-registration-submit{float:right;margin:5px 0 0 3px}.gwc-chat-message-container{position:absolute;top:63px;left:10px;right:10px;bottom:93px;padding:2px 10px;overflow:auto;border:1px solid #a5acb2;background:#fff}.gwc-chat-message{margin:0 0 3px}.gwc-chat-message-author,.gwc-chat-message-time{display:inline;color:#385078}.gwc-chat-agentMessage .gwc-chat-message-author,.gwc-chat-agentMessage .gwc-chat-message-time{color:#d88000}.gwc-chat-message-form{position:absolute;margin:0;left:10px;right:10px;bottom:12px}.gwc-chat-message-input{width:100%;height:70px;margin:0;padding:2px;resize:none;background:#fff!important;border:1px solid #a5acb2!important;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.gwc-chat-typingMessage .gwc-chat-message-text{color:#88919D}.gwc-chat-message-text{word-wrap:break-word;overflow-wrap:break-word}@media only screen and (max-height:340px){.gwc-chat-embedded-window{position:absolute;top:0;bottom:auto}}@media only screen and (max-device-width:360px){.gwc-chat-embedded-window{width:99%;right:.5%}.gwc-chat,.gwc-chat button,.gwc-chat div,.gwc-chat input,.gwc-chat textarea{font-size:16px}.gwc-chat-message-input:focus,.gwc-chat-registration-input:focus{background:#eee}}@media screen and (-webkit-min-device-pixel-ratio:1.5),screen and (-moz-min-device-pixel-ratio:1.5),screen and (min-device-pixel-ratio:1.5){.gwc-chat-logo{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAwCAMAAABjR8XYAAAAb1BMVEUAAAAwLC0hHR5KR0csKCmJXFk3NTV/f39/d3dyX141MTIdGBpUU1McGBlDPz/WOzHsLCDiMiccGBmrWlXNQjjASEDgNStFQ0MmICElISLpLCDvLCC2UkvvLCAiHiAfGxwbFhfiMSbqLyPfMSbyKx8Wr4MAAAAAHnRSTlMAccU2iBhaAQMLZNgj9kt3zo3nKmJOpnyfr6/yPONbnN1dAAAIn0lEQVRo3t1Z2daTMBAOaxJ2yiKUVijl/Z/RWdIEi6jneKF1/G1hmCTzZdZQwaQUfjZlX1XV1VBf110kPoqkBCi3GjDU3a2JtALSUXPr2rL8JCwKbFFPW99G8v2Rbtq6Ex9CUkT9NpURu5iS8mUmuEbWp5hEim7aSi0EQzh63YeQEuU23eD7VONPgdJtUwNwPp6a+9r+DzhE/ZiifSBIjHdz8asAYSEg9Q+4X/Wo1CGypXrxfqqj+peywvNR7TTRDRTB2lDZ3vRPVER2FofjOA5hocXfpgpcC3TCv6grQfnuBsUdqLm15bW6ls0JFClU7C/LV6IlD/82lP6x1kJJarTK27s2UXudrjeCecAR+PNXR/Ml+LuJupueawnu3tUd+RERPnjFcNNv10bIA45iIf2XPE3JLvNfBiLq9bn2kYjkj1yIQN22rT0oGROO9Euglc7icfka/mUcUleP53pv1SFFcb9FDlZtJavp/IqM4AKjSN8N4u5+yZbyl3K/nkqBmuvzsVZtYysDk6knTQMi962z40jIRxwxdTasiDxugHSFiCdjp1VH0X2jxwMti0YeyhxN5VYwg6Pr9ng+tu1a3iL13sX3Ww9gu/Wu91uRzIDDszq94SA1tKLLA1tarn2utb10cr82xvcr1HCrymkFKOu6TpBvy7btuq6FelLdt3V9ABCpqnUfJmQQX8mzRbJkTNPUx/LCegdhmEkReT6wx1gRl2V1EaLoEEdWJ5BGOWJpLww9tUsx4ZcwwGExreAFGtlZJgTEsaLUBFZ5Ph+PdUPizweythIF+rV/i5C5EPIEh5cvnJLntGD3/bLMgyguJtH5mR1apPNsKpH32ujBsgat/HleduHnL3grgnS3ggKwiXhuN/KQqKxg+1F1R2ikrSYjX9dqF1YerHQ5M74eZ1qC1FkgmSGQ+Wue5MBlHX1tMIeLE51HTW6/G55qEcMXzsHyGcj7gMMNmxOReWEcYmW/cXSpW9nfyQ5McDn1ZcMJYdoBkWKEeYYTg5Ai8+jFcXjhSJJoEdriIYk9f2Em4UAB34sTz8erQUqsT8zzhmUGBDrHPeO1FA5YErALzhbCCumcQ+UIvSQU5frYWtsmKmhM6rqndyhl1+hXWukxVCzpFJRKHBBlSLyUSwOWww3PM7QIaZeRMAloSTWV5iHy8DpGXdk2QMEYkO6YHqVdGDTPUJad1htQ0PMCoa/rc6turM6xIJJ6uoeiafMvBO2FJnLSb+FzgRggYKRFaICMiqeLchiNUaJhmq8xi0pyVx8e+wjIZFllJvRfk5MnECtVRsTmr+iOubfv2EGJwMCSLjmft3coNJVDyaoE9jbzvhAlZBByW2UooyURCCJXxjFnuiH3H6yo8gmfGNBrKGy5RDDfetZcwIJsaCeDf1I0UBCf61bVr5ZRItkTZFlhar5HYgdkISDSGmEGWuZcCtrlVDjyaUkAYv1DSvQtwEoqZ07UYy1j1DJAuVfNWqhkIZIL5xiVwshRf1+lyHO2B2YojO2uedVEHTUdlJKNKkwV7d3HWYSBmC44NY6Qxo58ktwDYSdKGHPuOVHE5UF0pxTJmavXOaUvnhzjXyJYXEbvz3ZXVBycB6BQSdzuFdN92uCWEZZQ2xuHX38fI8GS5znMfJG2J8YPvjgHki1vkkC481lOxWZAq3D64KLFF+AINm2n3s4qfBrRZWWKyMORwXavI3DkthKWyG2/2CmU1rogIIr2CrzMERSw7IdA2JDz96Ix6pv5M0EbqW6ylQdAqC+unUhy2qNL4k6I2KKjf93qCk1A+hMgtg9lAQjXeossDqojvgXCViEg5NB+nOwpVvIUyMVLviOIRJQqGEoesE18Srpgbdw+Zdw7ZCijtm9R6FylqIi0dV9NG9NU9XVLlQSTV7ftgJAq+e7li2StjPcO4o3UKZBUnnSEBdRNztLcos4wYGDGSyby8q+7wnybHnACdC9OVNQ0Nzq2S75Hviq3x125hTJTsvflw8VIqqSSOzoBwvVEfS/qoMToXQMCoajx2bMcWlAnA1O59NluUEbqhpT+ce8ftZCguft1WZUz+ZtFQJZSvJS/tohEjzHMY4uuyA7cnEi2RbBQhWIZhqJTznS8SE1lpG/ZdWwppKcUO5jS1quS7wd2X78ypJJsEYLItdzMdQoEyxtHmjycaFhOc9mTr7wbUqS8pKXxcUrIhgN+A7G9TdcauytHGgrJddowBW+1Uc21jahFZs0YY9bCqQsMwYLObpRDzoFwywTNuxFVZolM0WhlgXAFzHMXDzqjURysoeudblC8KU9xiJdAdU9hDzxMwVP7dtaT2G5hPctMk0IFkTob8tvYbEWSgiZnriVCBO1pk/fSwuQoP+AMy3087zzXGiMhityLXk3k7O08XLVYwW3SZSIQaKp7aS26j26aOveHcPBzzpacCC7I978URQFd9tdQyTOLSO0T/hBEPR+15kSCXXxRDAs5qbTnEBJgPUJ4jRbCoPSV2ZxPqq6f1m13sCIMwJmuHZfPA5L0u5oMUxdcvzJ6sADNZh08WO2BADuhG+1TUXyJmvLNLPy6RNJlFxd73BOYQd7hvUCEB6tpw3Mi/FvBze7XsotOX9doLklMS+pFthUboLQzuMUPlImRxQIJZ/IHcgUvN6JYRzV51AUZzEFPsFZ0iTYbwcAskicHZ5GminRtidS+2kepTl9kRMmQwm6Ce3mor0s/Qehf8guymQOMMLR9P98Y6cwb0zz3xzB4raNjHh0WbkrKIT7e2VF+nqejd3B6073/gnWErqIo0tLeugdaa2m550RzsKjdfWY5Ds6Cdcpz9/hfa4Vfp9opRenw937mccMOGN232xF3cy6KuffAEfHMqfg46g/p10Y7Yf+m6BtUTCCjkB/6g7MlHdMB6GN+X/4xKQh9esH02b/YSqHzr+bc8eGkUzqfiw8nCUBSqDq/jI9vlGj6xCT1poAAAAAASUVORK5CYII=);background-size:contain}}",e=document.getElementsByTagName("head")[0],f=document.createElement("style");
if(f.setAttribute("data-gcb-service-node",!0),e.insertBefore(f,e.childNodes[0]),f.styleSheet)f.styleSheet.disabled||(f.styleSheet.cssText=d);else try{f.innerHTML=d}catch(g){f.innerText=d}return c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatInitializer",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatInitializer",["require","exports","module","../util","lodash","jquery","./templatesProvider","../simpleEvent","../css/chat.min.css"],a)}}).call(this,function(a,b,c){function d(a){"use strict";return g.reduce(a,function(a,b,c){return a+c+"="+b+","},"").slice(0,-1)}function e(b,c,e,l){"use strict";function m(a){a.debug&&(x=g.isFunction(a.logger)?a.logger:k())}function n(){a("../css/chat.min.css")}function o(a,b,c){l.ajax({dataType:"json"+(b?"p":""),url:a}).done(function(a){x("loaded language data: ",a),c(a)}).fail(function(){throw x("getting language data failed ",arguments),new Error("getting language data failed")})}function p(a){a.onStarted(B.fire),a.onEnded(C.fire),a.onRemoteSession(z.fire),a.onMinimized(D.fire)}function q(a,b){var c=l.Deferred();return E.fire(a),a.debug&&(a.logger=x,delete a.debug),i.getTemplates(a,b,function(d){a.templatesData=d,x("templates: ",d),g.isString(a.localization)?(x("loading language data from ",a.localization),o(a.localization,b,function(b){a.langData=b,delete a.localization,x("localization has been loaded: ",b),c.resolve(a)})):g.isFunction(a.localization)?0===a.localization.length?(a.langData=a.localization(),delete a.localization,x("l18n provided via sync function: ",a.localization),c.resolve(a)):(x("l18n is a custom async function, waiting for callback..."),a.localization(function(b){x("l18n provided: ",b),a.langData=b,delete a.localization,c.resolve(a)})):g.isObject(a.localization)?(a.langData=a.localization,delete a.localization,c.resolve(a)):c.resolve(a)}),c.promise()}function r(a){return w?w:(w=new c(a),p(w),w)}function s(a){a=a||{};var c,i,j,k=a.widgetUrl,l=a.windowSize||{width:400,height:500};return v=h.Deferred(),m(a),x("chat is initializing with options: ",a),i=e.getTransientSessionAPI(a),i&&!i.isImmediate?(x("widget is opened on another page"),v.reject(f.createErrorEvent({code:201,description:"Chat is already running on another page"})),v.promise()):(a.embedded?(x('initializing chat widget in "embedded" mode'),n(),w=r(e),q(a,!0).done(function(a){w.startChat(a).done(function(a){v.resolve(a),A.fire(a)}).fail(v.reject)})):(delete a.widgetUrl,delete a.embedded,delete a.onBeforeStartSession,delete a.logger,delete a.transport,a.ui!==!1&&delete a.ui,j=b.toUrl(a),c=d(g.extend(l,a.windowOptions)),x("opening new window with features: ",c),window.open(k+(f.simpleParseUrl(k).search?"&":"?")+j,a.windowName||"genesysChatWindow",c)),v.promise())}function t(a){return a=a||{},v=h.Deferred(),m(a),x("restoring chat widget with options: ",a),a.embedded?(n(),w=r(e),w.onRestorationComplete(y.resolve),q(a,!0).done(function(a){w.restoreChat(a).done(function(b){v.resolve(b,a),A.fire(b)}).fail(function(a){v.reject(a)})})):(x('can only restore chat in "embedded" mode; quitting'),v.reject({code:0,description:'can only restore chat in "embedded" mode'})),v.promise()}function u(a){var d=b.fromUrl(document.location.href);return a=g.extend(d,a),n(),v=h.Deferred(),w=new c(e),m(a),document.body.className="gwc-chat",x("initializing chat widget in this window with options: ",a),q(a,!1).done(function(a){w.startChat(a).done(function(b){v.resolve(b,a),A.fire(b)}).fail(v.reject)}),v.promise()}var v,w,x,y=h.Deferred(),z=new j,A=new j,B=new j,C=new j,D=new j,E=new j;l=l||h,x=l.noop,this.startChat=s,this.restoreChat=t,this.startChatInThisWindow=u,this.getTransientSessionAPI=e.getTransientSessionAPI,this.onRestorationComplete=y.done,this.onRemoteSession=z.add,this.onStarted=B.add,this.onEnded=C.add,this.onSession=A.add,this.onBeforeChatOptionsApplied=E.add,this.close=function(){return w&&w.close()},this.toggle=function(){return w&&w.toggle()},this.isMinimized=function(){return w&&w.isMinimized()},this.onMinimized=D.add,this.VERSION=e.VERSION}var f=a("../util"),g=a("lodash"),h=a("jquery"),i=a("./templatesProvider"),j=a("../simpleEvent"),k=function(){"use strict";var a,b=window.console;try{a=b.log.bind(b)}catch(c){a=function(){b&&b.log&&b.log(Array.prototype.slice.call(arguments))}}return a};return c.exports=e,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatView",["require","exports","module","jquery","lodash","../simpleEvent","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){k[0].scrollTop=k[0].scrollHeight}function c(){s.fire(),clearTimeout(m),m=null}function d(a){var b=e(a.target),d=b.val();if(13===a.which||10===a.which){if(a.preventDefault(),!a.ctrlKey)return q.fire(g(d)),b.val(""),void c();b.val(d+"\n")}m||r.fire(),clearTimeout(m),m=setTimeout(c,p)}function i(){j.on("keypress",".gwc-chat-message-input",d)}a=a||{};var j,k,l,m,n=this,o=a.log||e.noop,p=a.typingTimeout||3e3,q=new h,r=new h,s=new h,t={};n.onTextEntered=q.add,n.onTypingStarted=r.add,n.onTypingStopped=s.add,n.append=function(a){l.append(a),b()},n.showTyping=function(a,c){t[a]=e(c),k.append(t[a]),b()},n.hideTyping=function(a){t[a]&&(t[a].remove(),delete t[a])},n.hideAllTyping=function(){f.each(t,function(a,b){n.hideTyping(b)})},n.render=function(){return o("rendering chat view"),j=n.$el=e(a.templatesData.chatView({nls:a.nls})),k=j.find(".gwc-chat-message-container"),l=k.find(".gwc-persistent-chat-messages"),i(),n}}var e=a("jquery"),f=a("lodash"),g=a("../util").filterInput,h=a("../simpleEvent");return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatSessionView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatSessionView",["require","exports","module","jquery","lodash","./chatView","URIjs","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){return String(a).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2")}function c(a){return a.type.agent||a.type.supervisor}function d(d){var e,g,h,j;return f.isString(d)?e={from:null,when:null,isAgent:null,isUrl:!1,message:d}:(g=f.escape(d.content.text),g=b(g),h="url"===d.content.type,e={from:d.party.type.client?B.ownUsername:d.party.name,when:new Date(d.timestamp).toLocaleTimeString(),isAgent:c(d.party),isUrl:h,message:g}),h&&(j=new i(d.content.text),j.protocol()||"/"===j.toString().substr(0,1)||j.protocol("http"),e.url=j.toString()),e.nls=B,a.templatesData.chatMessage(e)}function j(){var a=d(B.chatEnded);E.append(a)}function k(b){var c,d,e;e=b.name||B.defaultAgentName,c=h(B.agentTyping,{agentName:e}),d=a.templatesData.chatTyping({message:c,nls:B}),E.hideTyping(b.id),E.showTyping(b.id,d)}function l(a){C("chat UI: sending message",a),A?A.sendMessage(a):D.push(a)}function m(){A.sendTyping({isTyping:!0})}function n(){A.sendTyping({isTyping:!1})}function o(a){var b=Number(a.error.code),c=F[b],e=c?d(c):null;if(C("handling Error event ",a,e),e)E.append(e);else if(150!==b)throw new Error("Chat Error: "+a.error.description+" ("+a.error.code+")")}function p(a){var b=d(h(B.agentJoined,{name:a.party.name}));C("handling AgentConnected event",a),E.append(b)}function q(a){var b=d(h(B.agentLeft,{name:a.party.name}));C("handling AgentDisconnected event",a),E.hideTyping(a.party.id),E.append(b)}function r(a){var b,f;return C("handling MessageReceived event",a),c(a.party)&&E.hideTyping(a.party.id),b=d(a),b=e(b)[0],y&&(C("applying onBeforeMessage hook"),f=y(b,a.content.text)),f===!1?void C("not appending the message (filtered out) ",a.content.text):void E.append(b)}function s(a){C("handling AgentTyping event",a),E.hideTyping(a.party.id),a.isTyping&&k(a.party)}function t(a){C("chat UI: got Error event",a),E.hideAllTyping(),o(a)}function u(){C("chat UI: got Interrupted event"),E.hideAllTyping(),E.append(d(B.networkInterrupted))}function v(){C("chat UI: got Restored event"),E.append(d(B.networkRestored))}function w(a){C("chat UI: got SessionEnded event",a),E.hideAllTyping(),j()}function x(){C("chat UI: setting up callbacks"),A.onAgentConnected(p),A.onAgentDisconnected(q),A.onMessageReceived(r),A.onAgentTyping(s),A.onError(t),A.onSessionEnded(w),A.onInterrupted(u),A.onContinued(v),E.onTypingStarted(m),E.onTypingStopped(n),D.length&&f.each(D,A.sendMessage)}var y,z=this,A=a.session,B=a.nls,C=a.log||e.noop,D=[],E=a.view||new g({log:C,typingTimeout:a.typingTimeout,templatesData:a.templatesData,nls:a.nls}),F={100:B.serverStopped,101:B.serverUnreachable,152:B.chatSessionExpired};z.render=function(){return E.render(),z.$el=E.$el,z},z.sendMessage=l,z.onBeforeAppend=function(a){y=a},z.sayHello=function(){var a=d(B.chatWelcome);E.append(a)},z.sayError=function(a){var b;a=a||{},b=d(F[a.code]||B.unknownServerError),C("chat UI: appending error ",a,b),E.append(b)},z.injectSession=function(a){if(A)throw new Error("Session already injected");A=a,x()},E.onTextEntered(l),A&&x()}var e=a("jquery"),f=a("lodash"),g=a("./chatView"),h=a("../util").supplant,i=a("URIjs");return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/embeddedWindowView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/embeddedWindowView",["require","exports","module","jquery","lodash","../simpleEvent"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){h.find(".gwc-chat-body").slideToggle(m),j=!j,o.fire(j)}function c(){h.fadeOut(m),n.fire()}function d(){h.on("click",".gwc-chat-control-minimize",b),h.on("click",".gwc-chat-control-close",c)}var h,i=this,j=!!a.minimized,k=a.log||e.noop,l=a.nls,m=f.isNumber(a.animationSpeed)?a.animationSpeed:100,n=new g,o=new g;this.close=c,this.toggle=b,this.onClosed=n.add,this.onMinimized=o.add,this.render=function(){return k("chat window: rendering, is minimized: ",j),h=e(a.templatesData.embeddedWindow({nls:l,chatTitle:l.chatTitle})),j&&h.find(".gwc-chat-body").hide(),d(),i.$el=h,i.$contentArea=h.find(".gwc-chat-body"),i}}var e=a("jquery"),f=a("lodash"),g=a("../simpleEvent");return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatRegistrationView",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatRegistrationView",["require","exports","module","jquery","lodash","../simpleEvent","../util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){return/\S+@\S+\.\S+/.test(a)&&-1===a.indexOf("@.")&&-1===a.indexOf(".@")}function c(){var a=!0;return m.find(".gwc-chat-control-group-required").each(function(){var c,d=e(this),f=d.find(".gwc-chat-registration-input"),g=d.find(".gwc-chat-label"),h=d.find(".gwc-chat-validation-error"),j=e.trim(f.val());return""===j?(a=!1,c=i(o.regErrorRequiredField,{field:e.trim(g.text().replace("*","").replace(":",""))})):"EmailAddress"!==f.attr("name")||b(j)?(g.removeClass("gwc-chat-label-invalid"),h.html("").hide()):(a=!1,c=o.regErrorInvalidEmail),a||(g.addClass("gwc-chat-label-invalid"),h.text(c).show(),f.focus()),a}),a}function d(){var a=e("form",m).serializeArray(),b={};return f.each(a,function(a){b[a.name]=g(a.value)}),b}function j(a){a.preventDefault(),c()&&q.fire(d())}function k(){r.fire()}function l(){m.on("click","#gcbChatRegister",j),m.on("submit","form",j),m.on("click","#gcbChatSkipRegistration",k)}var m,n=this,o=a.nls,p=a.log||e.noop,q=new h,r=new h;n.onSubmitted=q.add,n.onSkipped=r.add,n.render=function(){return p("chat reg form: rendering"),m=n.$el=e(a.templatesData.chatRegistration({nls:o})),l(),n}}var e=a("jquery"),f=a("lodash"),g=a("../util").filterInput,h=a("../simpleEvent"),i=a("../util").supplant;return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("stateStorage",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/stateStorage",["require","exports","module","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){e.cookie(c,"",{expires:-1,domain:d,path:f})}a=a||{};var c=a.cookieName||e.constants.STATE_COOKIE_NAME,d=a.domain||e.getCookieDomain(),f="/",g=a.cookieMaxAge||5,h=a.logger||e.noop;return{read:function(){var a=e.cookie(c);return a?JSON.parse(a):a},write:function(a){a?(e.cookie(c,JSON.stringify(a),{expires:new Date((new Date).getTime()+1e3*g),domain:d,path:f}),h("saved state with cookie name: ",c,", domain: ",d,", max age: ",g)):null===a&&b()}}}var e=a("./util");return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/defaultLocalization",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/defaultLocalization",["require","exports","module"],a)}}).call(this,function(a,b,c){return c.exports={chatTitle:"Genesys Chat",chatWelcome:"Hello! Next available customer representative will be with you shortly.",defaultUsername:"User",defaultAgentName:"Representative",ownUsername:"You",chatEnded:"Chat session ended",agentJoined:"Representative {name} has joined the session",agentLeft:"Representative {name} has left the session",agentTyping:"{agentName} is typing...",serverStopped:"Connection to chat has been interrupted. Trying to restore...",serverUnreachable:"Chat is unavailable now. Please try again later.",networkInterrupted:"Connection to chat has been interrupted. Trying to restore...",networkRestored:"Connection restored.",unknownServerError:"Chat is unavailable now. Please try again later.",chatSessionExpired:"Chat session has expired.",regFirstName:"First Name:",regLastName:"Last Name:",regEmail:"Email:",regSubmit:"Start Chat",regSkip:"Skip Registration",regWelcomePart1:"Please enter few details about you, and press Start Chat button.",regWelcomePart2:"Next available customer representative will be with you shortly.",regErrorRequiredField:'"{field}" is a required field',regErrorInvalidEmail:"Please enter a valid email address",leaveSessionPrompt:"You are going to leave chat session."},c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("ui/chatController",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/ui/chatController",["require","exports","module","lodash","jquery","../util","./chatSessionView","./embeddedWindowView","./chatRegistrationView","../stateStorage","./defaultLocalization","../simpleEvent"],a)}}).call(this,function(a,b,c){function d(a,b){"use strict";var c,d,e=new n,f=new n;return c=new l({domain:a.cookieDomain,cookieMaxAge:a.maxOfflineDuration,logger:b}),d={},d.read=function(){var a=c.read();return e.fire(a),b("patched state storage, read(): ",a),a},d.write=function(a){f.fire(a),b("patched state storage, write(): ",a),c.write(a)},d.onAfterRead=e.add,d.onBeforeWrite=f.add,d}function e(a){"use strict";function b(){return{nls:f.extend(m,I.langData),templatesData:I.templatesData,log:K}}function c(a){return f.extend(b(),a)}function e(){K("binding reg. form state saving"),g(window).on("unload.chatRegForm",function(){var a={};I.embedded&&(f.forEach(I,function(b,c){(f.isBoolean(b)||f.isString(b)&&""!==b)&&(a[c]=b)}),a.regisration=!0,K("saving reg. form state",a),P.write(a))})}function l(){K("unbinding reg. form state saving"),g(window).off("unload.chatRegForm")}function o(){K("removing embedded chat window"),l(),J.done(function(a){try{a.leave()}catch(b){K("session already dead, no need to .leave()")}a=null,O=null}),N.$el.remove(),R=!1,N=null,V.fire()}function p(){I.embedded?o():window.close()}function q(){K("Chat Controller initializes with options: ",I),I.embedded&&(N=new j(c({minimized:X})),N.onMinimized(function(a){W.fire(a),X=a}),N.onClosed(o),N.render()),O=new i(c()),O.render(),M=I.embedded?N.$contentArea:"body",I.ui&&(I.ui.onBeforeWrapper&&I.ui.onBeforeWrapper(N&&N.$el[0]),I.ui.onBeforeChat&&I.ui.onBeforeChat(O.$el[0]),I.ui.onBeforeMessage&&O.onBeforeAppend(I.ui.onBeforeMessage)),O.$el.appendTo(M),f.defer(U.fire)}function r(a){K("failed to start session ",a),L&&O.sayError(a.error),Q=!1,J.reject(a)}function s(a){K("failed to restore session ",a),R=!1,Q=!1,J.reject(a),S.resolve()}function t(a){var b=new Date;for(a+=(new Date).getTime();a>b;)b=new Date}function u(){var a={path:"/",domain:I.cookieDomain||h.getCookieDomain(),expires:-1};h.cookie(h.constants.STATE_COOKIE_NAME,"",a),h.cookie(h.constants.COMETD_COOKIE_NAME,"",a)}function v(a){I.embedded||(g(window).on("beforeunload.chatWidget",function(){return u(),b().nls.leaveSessionPrompt}),g(window).on("unload.chatWidget",function(){a.leave(),u(),t(100)}),a.onSessionEnded(function(){g(window).off(".chatWidget")}))}function w(a){L&&O.injectSession(a),a.onSessionEnded(function(){Q=!1}),v(a),J.resolve(a)}function x(){N&&N.$el.find(":input").first().focus()}function y(a){var b,c="IdentifyCreateContact",d=1,e=2,g=3;b=f.isEmpty(a)?d:I.createContact===!1?e:g,a[c]=b,K("IdentifyCreateContact set to ",a[c])}function z(a){var b="";return a.FirstName&&(b=a.FirstName+" "),a.LastName&&(b+=a.LastName),b}function A(b){I.onBeforeStartSession=I.onBeforeStartSession||function(a,b){b(a)},Q=!0,I.onBeforeStartSession(b,function(b){y(b),K("augmenting registration data with directly passed userData ",b,I.userData),f.extend(b,I.userData);try{a.startSession({serverUrl:I.serverUrl,contactCenterId:I.contactCenterId,apikey:I.apikey,endpoint:I.endpoint,transport:I.transport,username:z(b)||I.username,userData:b,stateStorage:P,maxOfflineDuration:I.maxOfflineDuration,disableWebSockets:I.disableWebSockets,logger:K,debugCometd:I.debugCometd}).done(w).fail(r)}catch(c){return K("startSession thrown error: ",c),void r({code:0,description:c.message})}L&&O.sayHello()})}function B(a){L&&N.$el.appendTo("body"),Q=!0,w(a),S.resolve()}function C(){K=I.logger||function(){return void 0}}function D(a){L=I.ui,f.isUndefined(L)&&(L=!0),P=d(I,K),P.onAfterRead(function(a){a&&a.isMinimized&&(X=a.isMinimized,delete a.isMinimized)}),P.onBeforeWrite(function(a){a&&X&&(a.isMinimized=X)}),a()}function E(){return function(a){var b=new k(c());return K("starting default registration workflow"),b.onSubmitted(function(b){K("default registration submitted with ",b),l(),a(b)}),b.onSkipped(function(){K("default registration skipped"),l(),a({})}),e(),b.render().$el[0]}}function F(){function a(a){K("registration workflow ended; data provided: ",a),T.remove(p),A(a),b&&(K("hiding registration UI"),b.remove(),O.$el.show())}var b,c=I.registration;return c===!1?!1:(f.isFunction(c)||(K("provided registration is not a function, default will be used"),c=E()),b=c(a),K("registration form (UI) is: ",b),b&&(L.onBeforeRegistration&&(K("firing onBeforeRegistration callback with it"),L.onBeforeRegistration(b)),b=g(b),K("showing registration UI"),O.$el.hide(),b.appendTo(M),T.add(p)),!0)}function G(){return L?(q(),F()||A({}),void(L&&I.embedded&&N.$el.appendTo("body"))):void A({})}function H(){var b=P.read();P.read=function(){return b},I.embedded&&b&&!b.sessionId&&b.registration?(I=f.extend({},b,I),G(),S.resolve()):(R=!0,a.restoreSession({transport:I.transport,disableWebSockets:I.disableWebSockets,maxOfflineDuration:I.maxOfflineDuration,stateStorage:P,logger:K,debugCometd:I.debugCometd}).done(function(a){L&&q(),B(a)}).fail(s))}var I,J,K,L,M,N,O,P,Q,R=!1,S=g.Deferred(),T=new n,U=new n,V=new n,W=new n,X=!1;!function(){function a(){var c=!!h.cookie(h.constants.TRANSIENT_COOKIE_NAME);Q||c===b||(K('"remote" chat session '+(c?"start":"end")+" detected"),T.fire(c),b=c),setTimeout(a,h.constants.REMOTE_SESSION_CHECK_INTERVAL)}var b=!1;f.defer(a)}(),this.startChat=function(a){return R?(K("widget is already in DOM, skipping"),x(),g.Deferred().reject(h.createErrorEvent({code:200,description:"Chat is already running"})).promise()):(R=!0,I=a||{},J=g.Deferred(),C(),D(G),J.promise())},this.restoreChat=function(a){return R?(K("restore: chat is already running, resolving"),g.Deferred().reject(h.createErrorEvent({code:200,description:"Chat is already running"})).promise()):(I=a||{},J=g.Deferred(),C(),D(H),J.promise())},this.onRestorationComplete=S.done,this.onRemoteSession=T.add,this.onStarted=U.add,this.onEnded=V.add,this.toggle=function(){N&&N.toggle()},this.close=function(){N&&N.close()},this.isMinimized=function(){return X},this.onMinimized=W.add}var f=a("lodash"),g=a("jquery"),h=a("../util"),i=a("./chatSessionView"),j=a("./embeddedWindowView"),k=a("./chatRegistrationView"),l=a("../stateStorage"),m=a("./defaultLocalization"),n=a("../simpleEvent");return c.exports=e,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("paramsConverter",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/paramsConverter",["require","exports","module","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";return JSON.parse('{"'+decodeURI(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/\=/g,'":"')+'"}')}function e(a){"use strict";return"options="+encodeURIComponent(JSON.stringify(a))}function f(a){"use strict";var b=g.simpleParseUrl(a).search.slice(1),c=d(b).options;return JSON.parse(decodeURIComponent(c))}var g=a("./util");return c.exports.toUrl=e,c.exports.fromUrl=f,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("cometdTransport",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/cometdTransport",["require","exports","module","lodash","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(a){var b=a.promise();return{done:b.done,fail:b.fail}}function c(a,b,c,d){L("Chat transport CometD exception: ",a," subscriptionHandle: ",b," isListener: ",c," message: ",d)}function d(){L("chat: CometD is badly disconnected, firing interruption"),y=!0,T(),R.Error&&R.Error({notificationType:"Error",error:{code:150,description:"Network interruption detected"}})}function h(){var a,b=z.getTransportTypes(),c=z.getTransport().getType();"callback-polling"===c&&(a=e.without(b,c),L("chat: Disabling unused CometD transports"),e.each(a,function(a){z.unregisterTransport(a)}),L("  transports before: ",b,", after: ",z.getTransportTypes()))}function i(){if(clearTimeout(A),y&&(L("chat: CometD connection established"),y=!1,U()),!Q)try{h()}catch(a){L("chat: exception cannot disable unused transports: ",a)}finally{Q=!0}}function j(){L("chat: CometD connection lost"),A=setTimeout(d,J)}function k(){var a;return function(b){z.isDisconnected()||(b.successful?i():a!==!1&&j(),a=b.successful)}}function l(){return F?void B.disconnect():void z.reload()}function m(b){L("chat: instantiating CometD"),z=new D,z.configure({url:E,logLevel:K?"debug":"warn",appendMessageTypeToURL:!1}),a.disableWebSockets&&(L("chat: disabling websocket transport according to config"),z.unregisterTransport("websocket")),F||(z.registerExtension("reload",new G({cookieMaxAge:Number(I),cookieName:H})),L("chat: reload extension cookie name: ",H),L("chat: reload extension cookie max age: ",I)),z.addListener("/meta/handshake",b),z.addListener("/meta/connect",k()),z.onListenerException=c,window.addEventListener?(window.addEventListener("unload",l,!1),window.addEventListener("beforeunload",l,!1)):(window.attachEvent("onunload",l),window.attachEvent("onbeforeunload",l)),L("handshaking"),z.handshake({chatTransient:F})}function n(){if("resolved"!==P.state())throw new Error("Cannot execute. Transport initialization is "+P.state())}function o(a){S=S||{},e.extend(S,a)}function p(a){e.each(a,function(a){R[a.type]&&(R[a.type](a),a.index&&o({lastIndex:a.index}))})}function q(){L("chat: initializing CometD subscriptions"),z.addListener(N,function(a){g(function(){"TranscriptUpdated"===a.data.notificationType&&p(a.data.transcript),"Error"===a.data.notificationType&&R.Error&&R.Error({error:a.data.error})})})}function r(a,c,d){var f,h;return n(),f=new C,h=e.extend({operationName:a},d,c),z.publish(M,h,function(a){g(function(){a.data&&a.data.error?f.reject(a.data||{}):f.resolve(a.data||{})})}),b(f)}function s(a){L("chat: failing transport, result: ",a),z.disconnect(),g(function(){P.reject(a&&a.failure&&a.failure.exception)})}function t(a){return r("GetTranscript",a)}function u(){var a={sessionId:S.sessionId,fromIndex:S.lastIndex||1e9};return L('"pinging" the server with: ',a),t(a)}function v(a){var b=a&&a.transcript;L('chat: "ping" successful ',a),b&&b.length&&(L("found unprocessed transcript, processing (messages: "+b.length+")"),p(b))}function w(a){L('chat: "ping" unsuccessful',a),R.Error&&R.Error({notificationType:"Error",error:{code:152,description:"Chat session expired"}}),z.disconnect(),clearTimeout(A)}function x(){P.resolve(),!F&&S&&S.sessionId&&u().done(v).fail(w)}var y,z,A,B=this,C=f.Deferred,D=a.Cometd,E=a.serverUrl,F=!!a["transient"],G=a.ReloadExtension,H=a.reloadCookieName||f.constants.COMETD_COOKIE_NAME,I=a.reloadCookieMaxAge||5,J=1e3*(a.connectionTimeout||3),K=a.debugCometd,L=a.log||f.noop,M="/service/chat/publish",N="/service/chat/notify",O=(new Date).getTimezoneOffset(),P=new C,Q=!1,R={},S={},T=f.noop,U=f.noop;this.init=function(c){var d=a.handshakeAttempts||4;return S=c,F||S&&S.sessionId||(f.rootCookie(H,"",{expires:-1}),L("chat: cleaned CometD state, state is: ",f.cookie(H))),m(function(a){return a.successful?(L("chat: CometD handshake successful ",a),L("chat: CometD transport: ",z.getTransport()&&z.getTransport().getType()),void g(x)):(d-=1,L("chat: handshake failed, attempts left:",d,a),void(d||s()))}),F||q(),b(P)},this.startSession=function(a){var b=r("StartSession",a,{timezoneOffset:O});return b.done(function(a){o({sessionId:a.sessionId})}),b},this.sendMessage=function(a){return r("SendMessage",a)},this.getTranscript=t,this.leaveSession=function(a){return r("LeaveSession",a)},this.sendTyping=function(a){return r("SendTyping",a)},this.setUserData=function(a){return r("SetUserData",a)},this.getUserData=function(a){return r("GetUserData",a)},this.deleteUserData=function(a){return r("DeleteUserData",a)},this.disconnect=function(){L("chat: transport.disconnect() is called"),z.isDisconnected()||(L("chat: Calling cometd.disconnect()"),z.disconnect())},this.onAgentConnected=function(a){R.AgentConnected=a},this.onAgentTyping=function(a){R.AgentTyping=a},this.onAgentDisconnected=function(a){R.AgentDisconnected=a},this.onMessageReceived=function(a){R.MessageReceived=a},this.onSessionEnded=function(a){R.SessionEnded=a},this.onError=function(a){R.Error=a},this.onInterrupted=function(a){T=a},this.onContinued=function(a){U=a}}var e=a("lodash"),f=a("./util"),g=f.defer;return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("htccRestTransport",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/htccRestTransport",["require","exports","module","lodash","./util","jquery"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){r&&"/"!==r[r.length-1]&&(r+="/")}function c(a){var b=a.promise();return{done:b.done,fail:b.fail}}function d(a){var b={},c=!1;switch(a.type){case"Text":a.type="MessageReceived";break;case"ParticipantJoined":a.type="AgentConnected";break;case"ParticipantLeft":a.type="AgentDisconnected";break;case"ParticipantRejoined":a.type="ParticipantRejoined";break;case"TypingStarted":a.type="AgentTyping",c=!0;break;case"TypingStopped":a.type="AgentTyping",c=!1;break;case"TranscriptSaveDone":a.type="TranscriptSaveDone";break;case"Notice":a.type="Notice"}if(a.from&&a.from.type)switch(a.from.type){case"Customer":a.from.type="Client";break;case"Agent":a.from.type="Agent";break;case"External":a.from.type="External"}return b.type=a.type,b.index=a.index,b.timestamp=(new Date).getTime(),b.isTyping="AgentTyping"===a.type?c:void 0,b.content=a.text?{text:a.text,type:"text"}:void 0,b.party={id:a.from?Number(a.from.participantId):"",type:a.from?a.from.type:"",name:a.from?a.from.nickname:""},b}function h(a){var b=a.type;return"AgentConnected"===b||"AgentTyping"===b||"AgentDisconnected"===b?"Agent"===a.party.type:!0}function i(a){var b=e.sortBy(a.messages,"index");e.each(b,function(a){var b=d(a);"AgentConnected"===b.type?o+=1:"AgentDisconnected"===b.type&&(o-=1,0===o&&w.SessionEnded&&(w.SessionEnded({reason:{id:2,description:""}}),this.stopPoll())),w[b.type]&&h(b)&&w[b.type](b)},this)}function j(a,b,d){var e=new p;return g.when(q).then(function(){g.ajax({url:r+encodeURIComponent(v)+(a||""),type:b,crossDomain:!0,data:"POST"===b?JSON.stringify(d,void 0,2):d,headers:{"Content-Type":"application/json"},xhrFields:{withCredentials:!0},success:function(a,b,c){f.noop(b),a.id&&(a.sessionId=a.id),c.getResponseHeader("X-CSRF-HEADER")&&c.getResponseHeader("X-CSRF-TOKEN")&&(A.CSRFHeaderName=c.getResponseHeader("X-CSRF-HEADER"),A.CSRFToken=c.getResponseHeader("X-CSRF-TOKEN")),c.getResponseHeader("genesys-awselb")&&(l=c.getResponseHeader("genesys-awselb")),c.getResponseHeader("genesys-jsessionid")&&(m=c.getResponseHeader("genesys-jsessionid")),e.resolve(a||{})},error:function(a){a=a||{},e.reject({error:{code:a.status,description:a.responseText||a.statusText}})},beforeSend:function(a){A.CSRFHeaderName&&A.CSRFToken&&a.setRequestHeader(A.CSRFHeaderName,A.CSRFToken),
t?a.setRequestHeader("ContactCenterId",t):s&&(a.setRequestHeader("apikey",s),l&&a.setRequestHeader("genesys-awselb",l),m&&a.setRequestHeader("genesys-jsessionid",m))}})}),c(e)}function k(a){var b,c=new p;return s?b=r.replace(/v2\/chats\/?/,"v2/diagnostics/version"):(B.href=r,b=B.protocol+"//"+B.host+"/api/v2/diagnostics/version"),g.ajax({url:b,type:"GET",crossDomain:!0,data:{},headers:{"Content-Type":"application/json"},xhrFields:{withCredentials:!0},success:function(b,d,e){f.noop(b),f.noop(d),e.getResponseHeader("X-CSRF-HEADER")&&e.getResponseHeader("X-CSRF-TOKEN")&&(A.CSRFHeaderName=e.getResponseHeader("X-CSRF-HEADER"),A.CSRFToken=e.getResponseHeader("X-CSRF-TOKEN")),e.getResponseHeader("genesys-awselb")&&(l=e.getResponseHeader("genesys-awselb")),e.getResponseHeader("genesys-jsessionid")&&(m=e.getResponseHeader("genesys-jsessionid")),a&&a(),c.resolve()},error:function(){c.reject()},beforeSend:function(a){s&&a.setRequestHeader("apikey",s),t&&a.setRequestHeader("ContactCenterId",t)}}),c}if(!a||!a.contactCenterId&&!a.apikey)throw new Error("Contact center ID or apikey must be specified");var l,m,n=this,o=0,p=f.Deferred,q=new p,r=a.serverUrl.replace(/\/$/,""),s=a.apikey,t=s?null:a.contactCenterId,u=a.endpoint,v="",w={},x=!1,y=3e3,z=!0,A={},B=document.createElement("a");this.init=function(a){var b=f.Deferred();return a&&a.sessionId&&(v=a.sessionId,z=!1,n.startPoll()),b.resolve(),b.promise()},this.poll=function(){x||(x=!0,this.getTranscript(z?{index:0}:{}).done(function(a){i(a),x=!1}),z=!1)},this.startPoll=function(){this.stopPoll();var a=this;a.poll(),window.poll_int=setInterval(function(){a.poll()},y)},this.stopPoll=function(){clearInterval(window.poll_int)},this.startSession=function(a){var b=a.userData||{},c={operationName:"RequestChat",nickname:a.username,subject:a.subject||"No Subject",userData:b};return b.Send_Chat_Transcript="true",u&&(c.endpoint=u),j("","POST",c).done(function(a){a.id&&(v=a.id),n.sendTyping({isTyping:!1}),n.startPoll()})},this.sendMessage=function(a){return j("","POST",{operationName:"SendMessage",text:a.message}).done(function(){n.poll()})},this.getTranscript=function(a){return j("/messages","GET",a)},this.leaveSession=function(){return this.stopPoll(),j("","POST",{operationName:"Complete"}).done(function(){w.SessionEnded({reason:{id:1,description:""}})}).fail(function(){w.SessionEnded({reason:{id:1,description:""}})})},this.sendTyping=function(a){return a=a||{},a.isTyping?j("","POST",{operationName:"SendStartTypingNotification"}):j("","POST",{operationName:"SendStopTypingNotification"})},this.setUserData=function(){return c(new p)},this.getUserData=function(){return c(new p)},this.deleteUserData=function(){return c(new p)},this.onAgentConnected=function(a){w.AgentConnected=a},this.onAgentTyping=function(a){w.AgentTyping=a},this.onAgentDisconnected=function(a){w.AgentDisconnected=a},this.onMessageReceived=function(a){w.MessageReceived=a},this.onSessionEnded=function(a){w.SessionEnded=a},this.onError=function(a){w.Error=a},b(),k(function(){q.resolve()})}var e=a("lodash"),f=a("./util"),g=a("jquery");f.defer;return c.exports=d,c.exports})}.call(this),define("chat/common/umd/helpers/jQueryCometdWrapper",["jquery","jquery.cometd","jquery.cometd-reload"],function(a,b,c){"use strict";return{Cometd:a.Cometd,ReloadExtension:c}}),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("transientSession",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/transientSession",["require","exports","module","lodash","./simpleEvent","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";var b=a.state,c=a.transport,d=a.logger||f.noop,l=f.Deferred;this.isAgentConnected=function(){return b.isAgentConnected},this.sendMessage=function(a){var f,m=new l,n=b&&b.sessionId;return n?(e.isString(a)&&(a={message:a,type:"text"}),i(a,{message:"string",type:"string"}),"text"!==a.type&&"url"!==a.type&&g('type must be "url" or "text"'),f={sessionId:n,message:a.message,type:a.type},d("transient session, sending message ",f),c.init().fail(k(m,d)).done(function(){c.sendMessage(f).fail(k(m,d)).done(function(){d("sending message done"),m.resolve()})}),h(m)):(m.reject(j({description:"There is no ongoing session"})),h(m))}}var e=a("lodash"),f=(a("./simpleEvent"),a("./util")),g=(f.defer,f.throwError),h=f.getSimplePromise,i=f.validateObject,j=f.createErrorEvent,k=f.createTransportFailureResolver;return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("chat",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/chat",["require","exports","module","lodash","./util","./transientSession"],a)}}).call(this,function(a,b,c){function d(){"use strict";var a=h.cookie(h.constants.TRANSIENT_COOKIE_NAME);return a?JSON.parse(a):null}function e(a,b,c,e,n){"use strict";function o(a,b){var d;return a("Choosing transport..."),b&&g.isObject(b.transport)?(a("Custom transport is passed, using it: ",b.transport),d=b.transport):b&&(b.contactCenterId||b.apikey)?(a("contactCenterId or apikey is passed, using HTCC REST transport."),d=new c.HtccTransport({serverUrl:b.serverUrl,contactCenterId:b.contactCenterId,apikey:b.apikey,endpoint:b.endpoint})):(a("None additional parameters passed. Using CometD transport."),d=new c.CometDTransport({Cometd:e,disableWebSockets:b.disableWebSockets,serverUrl:b.serverUrl,ReloadExtension:n,log:b.logger,debugCometd:!!b.debugCometd,reloadCookieMaxAge:b.maxOfflineDuration})),d}function p(b){return b.stateStorage||new a({cookieMaxAge:b.maxOfflineDuration,log:b.logger})}function q(a){l(a,{serverUrl:{isa:"string",optional:!0},logger:{isa:"function",optional:!0}}),a.serverUrl||a.transport||j("either serverUrl or a custom transport must be provided")}function r(a){return t=a.logger||h.noop,t("Chat version: "+u),t}var s,t,u="850.6.10",v=h.Deferred,w="User";this.startSession=function(a){var c,d,e={source:"web",pageTitle:document.title,url:document.location.href,referrer:document.referrer};return q(a),l(a,{username:{isa:"string",optional:!0},userData:{isa:"object",optional:!0},subject:{isa:"string",optional:!0},contactCenterId:{isa:"string",optional:!0},apikey:{isa:"string",optional:!0},endpoint:{isa:"string",optional:!0},stateStorage:{isa:{write:{isa:"function"},read:{isa:"function"}},optional:!0}}),t=r(a),s=o(t,a),c=new v,d=p(a),d.write(null),t("startSession: initializing transport"),s.init().fail(m(c,t)).done(function(){var h=g.pick(a,["username","userData","subject"]);h.username||(h.username=w),h.userData=g.extend(e,h.userData),t("startSession: transport initialized, starting session ",h),s.startSession(h).fail(m(c,t)).done(function(e){var g;t("startSession request returned ",e);try{l(e,{sessionId:"string"})}catch(h){return t("startSession failed ",h),void c.reject({error:{code:0,description:h.message}})}g={sessionId:e.sessionId,serverUrl:a.serverUrl,lastIndex:0},a.contactCenterId&&(g.contactCenterId=a.contactCenterId,a.endpoint&&(g.endpoint=a.endpoint)),f=new b({state:g,transport:s,stateStorage:d,logger:t}),f.onSessionEnded(function(){f=null}),t("startSession succeeded"),c.resolve(f)})}),k(c)},this.restoreSession=function(a){var c,d,e,h;return a=a||{},l(a,{logger:{isa:"function",optional:!0},stateStorage:{isa:"object",optional:!0},fromIndex:{isa:"whole",optional:!0}}),t=r(a),c=new v,d=p(a),e=d.read(),e&&e.sessionId?(s=o(t,g.extend({},a,e)),h={state:e,transport:s,stateStorage:d,logger:t},t("restoreSession: initializing transport"),s.init(e).fail(m(c,t)).done(function(){t("restoreSession: transport initialized, restoring the session ",h),f=new b(h),f.onSessionEnded(function(){f=null}),d.write(null),c.resolve(f)})):(t("restoreSession() failed to read state"),c.reject({})),k(c)},this.getTransientSessionAPI=function(a){var b;return a=a||{},t=r(a),f?(t("getTransientSessionAPI(): returning full-featured session"),{isAgentConnected:f.isAgentConnected,sendMessage:f.sendMessage,isImmediate:!0}):(b=d())?(q(a),a["transient"]=!0,s=o(t,a),t("getTransientSessionAPI(): returning new transient session"),new i({transport:s,logger:t,state:b})):null},this.VERSION=u}var f,g=a("lodash"),h=a("./util"),i=a("./transientSession"),j=h.throwError,k=h.getSimplePromise,l=h.validateObject,m=(h.createErrorEvent,h.createTransportFailureResolver);return c.exports=e,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("session",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/session",["require","exports","module","lodash","./simpleEvent","./util"],a)}}).call(this,function(a,b,c){function d(a){"use strict";function b(){i("session has ended")}function c(){ka||b()}function d(){return!!la.length}function w(){ka&&(ha("updating cross-tab/window chat state"),g.cookie(g.constants.TRANSIENT_COOKIE_NAME,JSON.stringify({sessionId:ca,isAgentConnected:d()}),{path:"/",domain:g.getCookieDomain(),expires:new Date((new Date).getTime()+1e4)}),clearTimeout(aa),aa=setTimeout(w,5e3))}function x(){clearTimeout(aa),g.cookie(g.constants.TRANSIENT_COOKIE_NAME,"",{path:"/",domain:g.getCookieDomain(),expires:-1})}function y(){ea.write(e.extend(a.state,{lastIndex:ga})),x()}function z(){ha("binding session unload handlers"),window.addEventListener?(window.addEventListener("unload",y,!1),window.addEventListener("beforeunload",y,!1)):(window.attachEvent("onunload",y),window.attachEvent("onbeforeunload",y))}function A(){ha("unbinding state saving"),window.removeEventListener?(window.removeEventListener("unload",y,!1),window.removeEventListener("beforeunload",y,!1)):(window.detachEvent("onunload",y),window.detachEvent("onbeforeunload",y))}function B(a,b){ha("replaying transcript"),e.each(a,function(a){var c;a.type?c=na[a.type]:a.error&&(c=na[n]),c&&(a.restored=!!b,c.transportListener(a))})}function C(){return ja+"."+ca}function D(){$&&(ha("clearing history storage"),fa.removeItem(C()))}function E(){var a=new ia;return c(),ha("fetching history from server"),ba.getTranscript().done(function(b){ha("fetched history from server ",b),b&&b.transcript&&a.resolve(b.transcript)}),a}function F(a){var b;return e.each(a,function(a){a.index&&(b=a.index)}),b}function G(){var a,b,c=new ia;return $?(a=JSON.parse(fa.getItem(C())),a&&a.length?(ha("history found in storage ("+a.length+" messages). Last index: "+e.last(a).index),b=F(a),b!==ga?(ha("history and state indexes do not match",b,ga),c.reject(),c):(h(function(){c.resolve(a)}),c)):(ha("no history found in storage"),c.reject(),c)):(c.reject(),c)}function H(a){B(a,!0)}function I(){G().done(H).fail(function(){E().done(H)})}function J(){ha("session ended, clearing up"),A(),D(),ka=!1,la=[]}function K(){x(),J(),da.disconnect&&da.disconnect()}function L(a){la.push(a.party.id),w()}function M(a){la=e.without(la,a.party.id),w()}function N(a){var b={};return b[ma[a]]=!0,b}function O(a){return function(b){k(arguments,[{isa:"function"}]),ha("adding a callback for "+a),na[a].event.add(b)}}function P(a){var b={};return b[a.toLowerCase()]=!0,b}function Q(a){k(a,{party:{id:"number",name:"string"},index:"natural"})}function R(a){k(a,{content:"object",party:{id:"number",name:"string",type:"string"},index:"natural",timestamp:"number"}),e.contains(["Client","Agent","External","Supervisor"],a.party.type)||i("party.type is not recognized")}function S(a){k(a,{isTyping:"boolean",party:{id:"number",name:"string"},index:"natural"})}function T(a){k(a,{reason:{id:"natural",description:"string"}}),ma[a.reason.id]||i("unknown session end reason.id: "+a.reason.id)}function U(a){return{party:{id:a.party.id,name:a.party.name},index:a.index,timestamp:a.timestamp,restored:!!a.restored}}function V(a){return{content:a.content,timestamp:a.timestamp,index:a.index,restored:!!a.restored,party:{id:a.party.id,name:a.party.name,type:P(a.party.type)}}}function W(a){return{party:{id:a.party.id,name:a.party.name},isTyping:a.isTyping,index:a.index}}function X(a){return{reason:N(a.reason.id),restored:!!a.restored}}function Y(a){return a=a||{},{error:a.error||l().error,restored:!!a.restored}}function Z(a){var b=na[a];return e.each(b.innerListeners,function(a){b.event.add(a)}),function(c){if(ha('got "'+a+'" raw transport event ',JSON.stringify(c)),v)try{b.validate(c)}catch(d){return void na[n].event.fire(l({code:151,description:"Transport error in "+a+" event ("+d.message+")"}))}if(b.saveToHistory!==!1){if(c&&!c.restored&&ga>=c.index)return void ha("Event with index "+c.index+" was already processed, skipping");_(c),c.index&&(ga=c.index)}b.event.fire(b.filter(c))}}var $,_,aa,ba=this,ca=a.state.sessionId,da=a.transport,ea=a.stateStorage,fa=a.sessionStorage||window.sessionStorage,ga=a.state.lastIndex,ha=a.logger||g.noop,ia=g.Deferred,ja="com.genesys.chat",ka=!0,la=[],ma=[void 0,"leaveRequest","agent","error"],na={};$=function(){ha("testing sessionStorage support...");try{return fa.setItem(ja,ja),fa.removeItem(ja),ha("...supported"),!0}catch(a){return ha("...not supported"),!1}}(),_=function(){var a=[];return $?function(b){e.isArray(b)?a=a.concat(b):a.push(b),ha("saving history to storage ("+a.length+" messages). Last index: "+e.last(a).index),fa.setItem(C(),JSON.stringify(a))}:g.noop}(),this.sendMessage=function(a){var b,d;return c(),e.isString(a)&&(a={message:a,type:"text"}),k(a,{message:"string",type:"string"}),"text"!==a.type&&"url"!==a.type&&i('type must be "url" or "text"'),b=new ia,d={sessionId:ca,message:a.message,type:a.type},ha("sending message ",d),da.sendMessage(d).fail(m(b,ha)).done(function(){ha("sending message done"),b.resolve()}),j(b)},this.getTranscript=function(a){var b,d;return c(),a=a||{fromIndex:0},k(a,{fromIndex:"number"}),a&&a.fromIndex<0&&i('"fromIndex" must be >= 0'),b=new ia,d={sessionId:ca,fromIndex:a&&a.fromIndex||0},ha("sending getTranscript ",d),da.getTranscript(d).fail(m(b,ha)).done(function(a){return ha("getTrasncript returned ",a),a&&a.transcript?void b.resolve({transcript:a&&a.transcript}):void b.reject(l({description:"No transcript came from transport"}))}),j(b)},this.sendTyping=function(a){var b,d={};return c(),a=a||{isTyping:!0},k(a,{isTyping:"boolean",typedText:{isa:"string",optional:!0}}),d.isTyping=a.isTyping,d.sessionId=ca,a.typedText&&(d.typedText=a.typedText),b=new ia,ha("sending sendTyping ",d),da.sendTyping(d).fail(m(b,ha)).done(function(){ha("sendTyping done"),b.resolve()}),j(b)},this.leave=function(){var a=new ia;return c(),J(),ha("sending leaveSession ",ca),da.leaveSession({sessionId:ca}).fail(m(a,ha)).done(function(b){ha("leaveSession done ",b),b&&b.transcript&&b.transcript.length&&(B(b.transcript,!1),_(b.transcript)),na[s].event.fire({reason:N(1),restored:!1}),a.resolve()}),j(a)},this.setUserData=function(a){var b,d;return c(),k({params:a},{params:"plainObject"}),b=new ia,d={userData:a,sessionId:ca},ha("sending setUserData",d),da.setUserData(d).fail(m(b,ha)).done(function(){ha("setUserData done"),b.resolve()}),j(b)},this.getUserData=function(a){var b,d;return c(),e.isString(a)||i("string key is required. Given: "+typeof a),b=new ia,d={keys:[a],sessionId:ca},ha("sending getUserData ",d),da.getUserData(d).fail(m(b,ha)).done(function(a){ha("getUserData done ",a);var c=a&&a.userData;return c?void b.resolve({userData:a&&a.userData||{}}):void b.reject(l({description:"No userData came from transport"}))}),j(b)},this.deleteUserData=function(a){var b,d;return c(),e.isString(a)||i("string key is required. Given: "+typeof a),b=new ia,d={keys:[a],sessionId:ca},ha("sending deleteUserData ",d),da.deleteUserData(d).fail(m(b,ha)).done(function(){ha("deleteUserData done"),b.resolve()}),j(b)},na[o]={validate:Q,filter:U,event:new f,innerListeners:[L]},na[p]={validate:Q,filter:U,event:new f,innerListeners:[M]},na[r]={validate:R,filter:V,event:new f},na[q]={validate:S,filter:W,event:new f,saveToHistory:!1},na[s]={validate:T,filter:X,event:new f,innerListeners:[K]},na[t]={validate:g.noop,filter:g.noop,event:new f,saveToHistory:!1},na[u]={validate:g.noop,filter:g.noop,event:new f,saveToHistory:!1},na[n]={validate:g.noop,filter:Y,event:new f},e.each(na,function(a,b){a.transportListener=Z(b)}),da.onError(na[n].transportListener),da.onAgentConnected(na[o].transportListener),da.onAgentDisconnected(na[p].transportListener),da.onAgentTyping(na[q].transportListener),da.onMessageReceived(na[r].transportListener),da.onSessionEnded(na[s].transportListener),da.onInterrupted&&da.onInterrupted(na[t].transportListener),da.onContinued&&da.onContinued(na[u].transportListener),this.onError=O(n),this.onAgentConnected=O(o),this.onAgentDisconnected=O(p),this.onAgentTyping=O(q),this.onMessageReceived=O(r),this.onSessionEnded=O(s),this.onInterrupted=O(t),this.onContinued=O(u),this.isAgentConnected=d,z(),w(),0!==ga&&I()}var e=a("lodash"),f=a("./simpleEvent"),g=a("./util"),h=g.defer,i=g.throwError,j=g.getSimplePromise,k=g.validateObject,l=g.createErrorEvent,m=g.createTransportFailureResolver,n="Error",o="AgentConnected",p="AgentDisconnected",q="AgentTyping",r="MessageReceived",s="SessionEnded",t="Interrupted",u="Continued",v=!0;return c.exports=d,c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("helpers/apiWrapper",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/helpers/apiWrapper",["require","exports","module","../cometdTransport","../htccRestTransport","../stateStorage","./jQueryCometdWrapper","../chat","../session","lodash"],a)}}).call(this,function(a,b,c){var d=a("../cometdTransport"),e=a("../htccRestTransport"),f=a("../stateStorage"),g=a("./jQueryCometdWrapper"),h=a("../chat"),i=a("../session");a("lodash");return c.exports=new h(f,i,{CometDTransport:d,HtccTransport:e},g.Cometd,g.ReloadExtension),c.exports})}.call(this),function(){!("function"!=typeof define||!define.amd),"object"==typeof exports;(function(a){if("object"==typeof exports){var b=new(require("urequire").NodeRequirer)("helpers/widgetWrapper",module,require,__dirname,".",void 0);module.exports=a(b.require,exports,module)}else{if("function"!=typeof define||!define.amd)throw new Error("uRequire: Loading UMD module as <script>, without `build.noLoaderUMD`");define("chat/common/umd/helpers/widgetWrapper",["require","exports","module","../ui/chatInitializer","../ui/chatController","../paramsConverter","./apiWrapper"],a)}}).call(this,function(a,b,c){var d=a("../ui/chatInitializer"),e=a("../ui/chatController"),f=a("../paramsConverter"),g=a("./apiWrapper");return c.exports=new d(f,e,g),c.exports})}.call(this),define("chat/commonChatWrapper",["jquery","underscore","./common/umd/helpers/widgetWrapper","./common/umd/util"],function(a,b,c,d){"use strict";function e(b,e,f){var g=d.getCookieDomain(),h=a.Deferred(),i={embedded:!0,debug:b.debug,debugCometd:!1,logger:e,localization:b.localization,cookieDomain:b.cookieDomain||g,maxOfflineDuration:b.maxOfflineDuration,ui:{onBeforeWrapper:b.ui.onBeforeWrapper,onBeforeMessage:b.ui.onBeforeMessage,onBeforeChat:b.ui.onBeforeChat},templates:b.templates},j=function(a){a.serverUrl||a.transport||(a.serverUrl=f)},k={startChat:function(d){var e=a.extend(!0,{},i,b,d);return j(e),c.startChat(e)},restoreChat:function(b){return c.onRestorationComplete(h.resolve),c.restoreChat(a.extend(!0,{},i,b))},getTransientSessionAPI:function(){var d=a.extend(!0,{},i,b);return j(d),c.getTransientSessionAPI(d)},onRestorationComplete:h.done,getPublicAPI:function(){var b=a.extend({},c,{startChat:this.startChat,restoreChat:this.restoreChat});return delete b.startChatInThisWindow,delete b.getTransientSessionAPI,delete b.onRestorationComplete,delete b.onRemoteSession,delete b.onStarted,delete b.onEnded,b},onStarted:c.onStarted,onEnded:c.onEnded,onRemoteSession:c.onRemoteSession};return b.autoRestore!==!1&&k.restoreChat().done(function(){e("CB chat wrapper: chat successfully restored")}).fail(function(a){e("CB chat wrapper: chat failed to restore: ",a)}),k}return e}),define("chat/adapter/commonChatAdapter",[],function(){"use strict";function a(a,b){return{initializeAsync:function(b){a.onRestorationComplete(b)},isAgentConnected:function(){var b=a.getTransientSessionAPI();return b?b.isAgentConnected():!1},sendCbSessionToken:function(c){return a.getTransientSessionAPI().sendMessage("{start:"+c+"}").done(function(){b("Common Chat Adapter: CB session token successfully sent")}).fail(function(a){b("Common Chat Adapter: sending CB session token FAILED ",a)})}}}return a}),define("dummy",[],function(){"use strict"}),define("integration/integration",["jquery","underscore","signals"],function(a,b,c){"use strict";function d(d,e,f,g,h){function i(a){return b.isObject(a)&&b.isFunction(a.isAgentConnected)&&b.isFunction(a.sendCbSessionToken)}function j(a){d("integration: cobrowse start detected."),h.isAgentConnected()&&(d("integration: cobrowse is connected to primary media. sending token: ",a.token),h.sendCbSessionToken(a.token))}function k(){var a,b;return f?(a=i(h),b=a?h.isAgentConnected():!1,d("integration: startCobrowse called. Integration supported? ",a),a&&f.onSessionStarted.addOnce(j),void q.dispatch(a,b)):void d("integration: cobrowse is not configured. quitting.")}function l(b){var c;return d("integration: startChat called. Chat is: ",e),e?g?(c=a.Deferred(),d("integration: getting IDs from tracker..."),g.push(["getIDs",function(f){d("integration: got IDs from tracker, starting chat"),e.startChat(a.extend(!0,b||{},{userData:{visitID:f.visitID,pageID:f.pageID}})).done(c.resolve).fail(c.reject)}]),c.promise()):(d("integration: there is no tracker, starting chat"),e.startChat(b)):void 0}function m(a){h&&h.initializeAsync?h.initializeAsync(a):a()}function n(){d("integration: initializing primary media: ",h),m(function(){d("integration: initialized primary media"),f?(d("integration: waiting for cobrowse"),f.onInitialized.add(r.dispatch)):r.dispatch(null)})}function o(){var a=new c,b=!1,d=!1;return e&&(e.onRemoteSession(function(c){b=c,a.dispatch(c||d)}),e.onStarted(function(){d=!0,a.dispatch(!0)}),e.onEnded(function(){d=!1,a.dispatch(b)})),a}var p=this,q=new c,r=new c;r.memorize=!0,b.extend(p,{VERSION:"850.4.0",onCobrowseRequested:q,onInitialized:r,onHasChat:o(),startCobrowse:k,startChat:l,init:n})}return d}),define("integration/lib/localizationLoader",["jquery","underscore"],function(a,b){"use strict";function c(c){function d(a){throw c("Failed to load localization from "+a),new Error("Co-browse failed to load localization from "+a)}function e(a){return function(b){c("L18N provided via async function: ",b),a.resolve(b)}}function f(f){var g,h=[],i=a.Deferred();b.isArray(f)||(f=[f]),c("Preparing localization from "+f.length+" sources...");for(var j=0;j<f.length;j++)g=f[j],b.isString(g)?(c("L18N source interpreted as JSONP URL: "+g+". Loading..."),h[j]=a.ajax({dataType:"jsonp",cache:!0,url:g}).fail(b.partial(d,g))):b.isFunction(g)?0===g.length?(g=g(),c("L18N source interpreted as synchronous function (expects no arguments). Using its return value: "+g),h[j]=g):(c('L18N source interpreted as asynchronous function. Providing "done" callback as first argument and waiting for it to be called...'),h[j]=a.Deferred(),g(e(h[j]))):b.isObject(g)&&(c("L18N source interpreted as an object, using it as is : "+g),h[j]=g);return a.when.apply(a,h).done(function(){var a=[].slice.call(arguments);c("Localization prepared."),a=b.map(a,function(a){return b.isArray(a)?a[0]:a}),i.resolve.apply(i,a)}),i.promise()}c=c||a.noop,this.load=f}return c}),define("integration/lib/buttons",["jquery","underscore","signals"],function(a,b,c){"use strict";function d(d,e){function f(){var c=a(b.isFunction(d.cobrowse)?d.cobrowse():'<div class="gcb-startCobrowse"/>');return e(c[0]),c.on("click.gcbIntegration",o.dispatch),c}function g(){var c=a(b.isFunction(d.chat)?d.chat():'<div class="gcb-startChat"/>');return e(c[0]),c.on("click.gcbIntegration",p.dispatch),c}function h(){n=a('<div class="gcb-startBtnsContainer" />'),m&&(n.append(m),n.addClass("gcb-hasChatBtn")),l&&(n.append(l),n.addClass("gcb-hasCobrowseBtn")),"right"===d.position&&n.addClass("gcb-right"),n.appendTo("body")}function i(){d.cobrowse&&!l&&(l=f()),d.chat&&!m&&(m=g()),n||h()}function j(a){return i(),a.cobrowse||a.chat?(n.show(),l&&l[a.cobrowse?"show":"hide"](),void(m&&m[a.chat?"show":"hide"]())):void k()}function k(){l&&l.hide(),m&&m.hide(),n&&n.hide()}var l,m,n,o=new c,p=new c;return e||(e=a.noop),{show:j,onCobrowseClicked:o,onChatClicked:p}}return d}),define("integration/preCobrowseController",["signals"],function(a){"use strict";function b(b,c,d,e,f,g,h){function i(){return d.isBrowserSupported()?!0:(g(h.browserUnsupported),!1)}function j(a){e&&e.setStartMessage(a.autoConnect?h.sessionStartedAutoConnect:null),d.startSession(),k()}function k(){b("pre-cobrowse ui: cobrowse session started"),o=!0,n.cobrowseStarted.dispatch()}function l(){b("pre-cobrowse ui: cobrowse session ended"),o=!1,n.cobrowseEnded.dispatch()}function m(a,c){return b("pre-cobrowse ui: cobrowse requested. integration supported: ",a," agent connected: ",c),i()?o?void b("pre-cobrowse ui: cobrowse in progress, quitting"):void(a?c?j({autoConnect:!0}):f(h.areYouOnPhone,function(a){a?j({autoConnect:!1}):g(h.connectBeforeCobrowse)}):f(h.areYouOnPhoneOrChat,function(a){a?j({autoConnect:!1}):g(h.connectBeforeCobrowse)})):void b("pre-cobrowse ui: unsupported browser, quitting")}var n={cobrowseStarted:new a,cobrowseEnded:new a},o=!1;return c.onCobrowseRequested.add(m),c.onInitialized.add(function(){b("pre-cobrowse ui: primary media initialized, adding cobrowse callbacks"),d.onSessionStarted.add(k),d.onSessionEnded.add(l)}),{on:n}}return b}),define("integration/integrationController",["jquery","underscore","smoke","./lib/localizationLoader","./lib/buttons","./preCobrowseController","nls"],function(a,b,c,d,e,f,g){"use strict";function h(h,i,j,k,l){function m(a,c){var d=b.extend(g,a,c);i("integration ui: localization loaded. Final localization: ",d),x.resolve(d)}function n(){var a=new d(i);a.load([h.cobrowse&&h.cobrowse.localization,h.localization]).done(m)}function o(){var a={cobrowse:!y,chat:!(y||z)};i("integration ui: updating buttons state ",a),w.show(a)}function p(){i("integration ui: cobrowse btn clicked"),x.done(function(){j.startCobrowse()})}function q(){i("integration ui: chat btn clicked"),j.startChat().fail(function(a){x.done(function(b){a.error&&201===a.error.code&&v(b.chatIsAlreadyRunning)})})}var r,s,t,u,v,w=new e(h.buttons||{},k&&k.markServiceElement),x=a.Deferred(),y=!1,z=!1;t=function(a){h.cobrowse.disableBuiltInUI||(i("integration ui: initializing built-in cobrowse ui"),s=new l(k,a)),i('integration ui: initializing "pre-cobrowse" ui'),r=new f(i,j,k,s,u,v,a),r.on.cobrowseStarted.add(function(){y=!0,o()}),r.on.cobrowseEnded.add(function(){y=!1,o()})},t=b.once(t),w.onChatClicked.add(q),w.onCobrowseClicked.add(p),j.onInitialized.add(function(a){i("integration ui: integration initialized. has cobrowse session: ",!!a),y=!!a,o()}),j.onHasChat.add(function(a){i("integration ui: onHasChat fired with: ",a),z=a,o()}),x.done(function(a){u=function(b,d){c.confirm(b,d,{ok:a.modalYes,cancel:a.modalNo,reverseButtons:!0})},v=function(a){c.alert(a)},c.title=a.modalTitle,k&&t(a)}),i("initializing built-in integration UI"),n()}return h}),define("integration/initialization",["jquery","underscore","cb/lib/log","cb/lib/contexts","./lib/config","cb/integrationEntryPoint","cb/ui/master/topmostMasterUi","chat/commonChatWrapper","chat/adapter/commonChatAdapter","tracker/trackerApplicationModule","integration/integration","integration/integrationController"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(b){return b===!0?c:a.noop}function n(a){return m(a.debug)}function o(a){return m(e.getCobrowseDebugValue(a))}function p(a){return window[a]}function q(a,c,d,e){function f(a){a.apply(null,e)}var g=d?c[d]:c,h=g.onReady,i=b.isArray(h)?h:b.isFunction(h)?[g.onReady]:[];b.forEach(i,f),d&&b.isUndefined(a[d])&&(a[d]={}),(d?a[d]:a).onReady={push:f}}function r(a,b,c,d,e,f){function g(){q(c,b,null,[{cobrowse:e&&b.cobrowse?e:null,chat:d&&b.chat?d:null,integration:f},x])}e&&b.cobrowse&&(a("CO-BROWSE TOP CONTEXT API INITIALIZED: FIRING ONREADY"),q(c,b,"cobrowse",[e,x])),d&&b.chat&&(a("BUILT-IN CHAT API INITIALIZED: FIRING ONREADY"),q(c,b,"chat",[d])),x?f.onInitialized.add(function(){a("INTEGRATION INITIALIZED: FIRING GLOBAL ONREADY"),g()}):(a("EVERYTHING INITIALIZED: FIRING GLOBAL ONREADY"),g())}function s(a,c,d,m){var n,o,p,q,s,u,v,x;a.cobrowse&&(n=f.initTopmostApp(a.cobrowse,m)),a.chat&&(d("INITIALIZING BUILT-IN CHAT"),u=new h(e.getIntegratedChatConfig(a,n),d,w),v=new i(u,d)),b.isNull(a.tracker)?j&&(p=j):p=a.tracker,d("INITIALIZING INTEGRATION"),q=new k(d,u,n,p,a.cobrowse.primaryMedia||v),s=new l(a,d,q,n,g),q.init(),u&&(d("substituting startChat() with pre-integrated method"),x=u.getPublicAPI(),x.startChat=q.startChat),n&&(d("substituting cobrowse.startSession() with pre-integrated method"),o=b.extend({},n,{startSession:q.startCobrowse})),r(d,a,c,u&&x,n&&o,q),t(d,c,q,u&&x,n&&o,p)}function t(a,b,c,d,e,f){a("EXPOSING ALL VERSIONS TO GLOBAL NAMESPACE"),b.version=b.VERSION=c.VERSION,a("INTEGRATED APP VERSION: "+c.VERSION),d&&(a("CHAT VERSION: "+d.VERSION),b.chat.VERSION=d.VERSION),e&&(a("CO-BROWSE VERSION: "+e.VERSION),b.cobrowse.VERSION=e.VERSION),f&&(b.tracker=b.tracker||{},b.tracker.VERSION="850.1.37",a("TRACKER VERSION: "+b.tracker.VERSION))}function u(a,b,c,d){a.cobrowse&&f.initChildApp(a.cobrowse,d).done(function(d){c("CO-BROWSE CHILD CONTEXT API INITIALIZED: FIRING ONREADY"),r(c,a,b,null,d,null)})}function v(a,b){var c,d,g,h,i;return w=b,window[a]?g=window[a]:window[a]=g={},c=p(a)||{},d=e.extendConfig(c),f||(d.cobrowse=!1,d.buttons.cobrowse=!1),h=n(d),i=o(d),h("EFFECTIVE CONFIG: ",d),window.external&&window.external.isGenesysTrackerDisable||window.name&&"disableWebme"===window.name?void h("WEBME SUITE IS DISABLED; STOPPING INITIALIZATION"):void(x?s(d,g,h,i):u(d,g,h,i))}var w,x=d.isTopContext();return{initialize:v}}),function(){var a='.gcb-appStatus,.gcb-smoke-base .gcb-dialog,.gcb-smoke-base .gcb-dialog-inner{-webkit-box-sizing:border-box;-moz-box-sizing:border-box}#_gcb_toast-container>div,.gcb-appStatus,.gcb-smoke,.gcb-toolbar{font-family:Tahoma,sans-serif}.gcb-startBtnsContainer{position:fixed;left:0;top:50%;z-index:7426170}.gcb-startBtnsContainer.gcb-right{left:auto;right:0}.gcb-startBtnsContainer.gcb-hasCobrowseBtn{width:24px;height:105px;margin-top:-53px}.gcb-startBtnsContainer.gcb-hasChatBtn{width:24px;height:83px;margin-top:-42px}.gcb-startBtnsContainer.gcb-hasCobrowseBtn.gcb-hasChatBtn{height:208px;margin-top:-104px}.gcb-startChat{width:24px;height:83px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEXjszvluEjnvVXpwmLqx2/szHzu0Ynw1pby3KT04bH25r7468v58Nj79eX9+vL///+hSEsKAAABH0lEQVR4Ae2TwW5EIQhFeagiKvD/Xzt9NbWNA100k+7mxITFDV5QyPDmN65rBXSC8JKVvLDDQa0y6g3ZmYG26XCCKIyfhFXFYJdFeRaGsg2ekp4TjO4DqNkJFYR9H6vlMe/QnEeHpKKaICBxixqpC6eQ2qI6857cm+xyYyZDwG3KSt4cbRGY48aZt/YVCQ5o30CWDmHMn7f0sxONj4zvjFNomrdHOQQUbRmxsA04wWmL7v8jN2bK8ALpFSFneFz4gKBghmbuiimZOdhBNAKOZ3cJ0ewKMl9k2ZvrjVFQd4kfS4TiZktXG/WKpKsMVcZQqhLNdma14asisdh+9vynf6xQarScbCjhflx4n8WR4Xb0X4TKmyeBbePKdevsePMBMlgPFfbCzwYAAAAASUVORK5CYII=);cursor:pointer}.gcb-startChat:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEX7tw37vB38wS38xT38yk78z1791G792X793Y794p7+567+7L7+8c/+9d//+u////8x05YEAAABH0lEQVR4Ae3T4YoEIQgAYLOyrNT3f9q92eFiqVzgWO7ffgw0IKGGJvh6JwR4QtgJ32EtZ2AeCyLpdCm23kCbGqwQhfHJr8qFTW4ZNl3ZOg+JsEIr1weo6QgQCG99zJb7uI565GgQVVQjOCJXrxG6HZGidqMjeYv4BE65vsHgICLWciZHm/bk+AKrWn/PAotiNH/WJ+nj9ZbO7DjjIx3mjTVQNc0ceS1XtCbEzNZhhcNuDWGXKnNJ8IH4SSAleAR8gFMwQ7UImyGJ2dlBtAL8bnaZ3dkVZA7F0plcL1acurP/WCLFbzY3tU4BHCF3VUY3ROLNdmK1flZVxPz0oyX4g0iQyVtONhR3PwJe340QXGj0XwHiaQvwu3UOyzr7vn4AMlgPFee43A8AAAAASUVORK5CYII=)}.gcb-right .gcb-startChat{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEX7tw3////8wS394p7+9d//+u/92X791G7+7L78xT393Y7+8c/+5678yk77vB38z169gYh8AAABGklEQVR4Xu2TO27EMAxE+ddfvv9ts9HGBizSRYqk2tfIwECYGVqERz7QxbwJCS94E/gkbQLByV8JlM6sD3GFkLcbbw5IBX7B6A08xQTFnGAZlUfUQ9IMe7BqPkJppozaD4DYXoKoxnyAb2eoLxq5amiTmSTvQtUJzGC6B2OBJbjfYuvGkOaSYgVG9OZAE0oa8H/4YVVvTx0XLnBGPohGVbkrBxoshtabwNf0srghnl9uiG9a3oZo5z4Y3LAfz1of15me1hnJ74cpvw4I4AbPOxqZl77qBOZqfp0XExxUuUBAURUt0MO32/LT25Ug7lACQzInFGmckdV5HLLoBDEzKvINC+0mPf4dYGjpRZaUXI/zcDsYC0BbKseHLz5JCC0m86LjAAAAAElFTkSuQmCC)}.gcb-right .gcb-startChat:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABTCAMAAACyNjdlAAAAMFBMVEXjszv////nvVX04bH79eX9+vLw1pbu0Yn468vpwmLy3KT58Nj25r7qx2/luEjszHxF0uAiAAABGklEQVR4Xu2TO27EMAxE+ddfvv9ts9HGBizSRYqk2tfIwECYGVqERz7QxbwJCS94E/gkbQLByV8JlM6sD3GFkLcbbw5IBX7B6A08xQTFnGAZlUfUQ9IMe7BqPkJppozaD4DYXoKoxnyAb2eoLxq5amiTmSTvQtUJzGC6B2OBJbjfYuvGkOaSYgVG9OZAE0oa8H/4YVVvTx0XLnBGPohGVbkrBxoshtabwNf0srghnl9uiG9a3oZo5z4Y3LAfz1of15me1hnJ74cpvw4I4AbPOxqZl77qBOZqfp0XExxUuUBAURUt0MO32/LT25Ug7lACQzInFGmckdV5HLLoBDEzKvINC+0mPf4dYGjpRZaUXI/zcDsYC0BbKseHLz5JCC0m86LjAAAAAElFTkSuQmCC)}.gcb-startCobrowse{width:24px;height:105px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEXjszvluEjnvVXpwmLqx2/szHzu0Ynw1pby3KT04bH25r7468v58Nj79eX9+vL///+hSEsKAAABY0lEQVR4Ae3U0a4cIQgG4F8U1FHg/d+2261po5K0m/aqOd/NmCAiExVfPsfyAyfs1Bcr2MxGL33SY1sOueAle8nOe6Cu+Jry09ACpO6Z9wzQdFXziqoJO+69FnwgyRvhUM3f5JxvT6bvsOwNRmZHrFmNi6vHxZGIguJZwBL10Z3ipRLFS60YIIzLmMB0f64Eq2DnbDX4Jc0StAcZc+AOoJm6QJxxeEwrUBtOTd1m44Rblq5mjFtp6ppx4KY+o+OjroJIrtNnK4hjw+4aSKU+6veuurmNWhJOz93ckiQ+7aTrfpymZiBV5zNhzdX+pwGMcKmg+O+3y4yYKmLVEkJs/e9v1CKP6pCguGvvw4Jr0PHCLohfBu2IXwZte2GRbvJSvezrLFcf9AtuSRkhcvlXAQj9v0e0tfU9MqoL1iBfL+U6E3uK9mtE2wcpHbVtbefsg9RaIeLuAzua/vZQ8O6t/j725Rsf5hIoOirx7QAAAABJRU5ErkJggg==);cursor:pointer}.gcb-startCobrowse:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEX7tw37vB38wS38xT38yk78z1791G792X793Y794p7+567+7L7+8c/+9d//+u////8x05YEAAABY0lEQVR4Ae3U0a4cIQgG4F8U1FHg/d+2261po5K0m/aqOd/NmCAiExVfPsfyAyfs1Bcr2MxGL33SY1sOueAle8nOe6Cu+Jry09ACpO6Z9wzQdFXziqoJO+69FnwgyRvhUM3f5JxvT6bvsOwNRmZHrFmNi6vHxZGIguJZwBL10Z3ipRLFS60YIIzLmMB0f64Eq2DnbDX4Jc0StAcZc+AOoJm6QJxxeEwrUBtOTd1m44Rblq5mjFtp6ppx4KY+o+OjroJIrtNnK4hjw+4aSKU+6veuurmNWhJOz93ckiQ+7aTrfpymZiBV5zNhzdX+pwGMcKmg+O+3y4yYKmLVEkJs/e9v1CKP6pCguGvvw4Jr0PHCLohfBu2IXwZte2GRbvJSvezrLFcf9AtuSRkhcvlXAQj9v0e0tfU9MqoL1iBfL+U6E3uK9mtE2wcpHbVtbefsg9RaIeLuAzua/vZQ8O6t/j725Rsf5hIoOirx7QAAAABJRU5ErkJggg==)}.gcb-right .gcb-startCobrowse{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEXjszv////79eX9+vLw1pbszHzu0YnnvVXluEj04bHy3KTqx2/pwmL58Nj468v25r66x0TOAAABYElEQVR4Ae2VS04gMQxE/Y/zv/9tB0YBFONGYsRqxFu1VHLKlcRp+Bd+6VJr6xApG/8ySxAWVi2lN6ZbUZSzILdLqOxvpXQLFL8O8l4x1yWMNw9DgQs5nq1l+czhE4JMhCfEncMBBi0IVDp15VnIl5pfm6ftJhSDHMPyU4KSZ84fhGU+uJSOYi9wNbubbgSv1JnvbtKYob7dosDmVSuhJPEW0bbHHA6HmIMgUOyVygopzgI5RJCjCvD/XlFwbRsi3mUxcoWAMtKW7hAZxEsGZPQ2cT5oRkhZuxOp6WcPpNazE2KmaiMPNxmpQaQJgBBvCCgaGBK37KDWPA9dEJxbMgbCQ1GTCtiI87yUATUAKP48BsXzMShYkzEwU7DxIxMl3CCnzq8eucR8bPbcnCU3N//u/1HhxknOfMz4E9SB1QE6rdi9YUlmUHF0HElA511mLS+0GTpifNhd1/eD+uXb/AGhZAxjYImtOQAAAABJRU5ErkJggg==)}.gcb-right .gcb-startCobrowse:hover{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAABpCAMAAAAX1xOuAAAAMFBMVEX7tw3////+9d//+u/92X78z1791G78wS37vB394p793Y78yk78xT3+8c/+7L7+5660THsCAAABYElEQVR4Ae2VS04gMQxE/Y/zv/9tB0YBFONGYsRqxFu1VHLKlcRp+Bd+6VJr6xApG/8ySxAWVi2lN6ZbUZSzILdLqOxvpXQLFL8O8l4x1yWMNw9DgQs5nq1l+czhE4JMhCfEncMBBi0IVDp15VnIl5pfm6ftJhSDHMPyU4KSZ84fhGU+uJSOYi9wNbubbgSv1JnvbtKYob7dosDmVSuhJPEW0bbHHA6HmIMgUOyVygopzgI5RJCjCvD/XlFwbRsi3mUxcoWAMtKW7hAZxEsGZPQ2cT5oRkhZuxOp6WcPpNazE2KmaiMPNxmpQaQJgBBvCCgaGBK37KDWPA9dEJxbMgbCQ1GTCtiI87yUATUAKP48BsXzMShYkzEwU7DxIxMl3CCnzq8eucR8bPbcnCU3N//u/1HhxknOfMz4E9SB1QE6rdi9YUlmUHF0HElA511mLS+0GTpifNhd1/eD+uXb/AGhZAxjYImtOQAAAABJRU5ErkJggg==)}.gcb-startChat+.gcb-startCobrowse{margin-top:20px}.gcb-toolbar{position:fixed;top:50px;left:50px;height:43px;background:#fff;color:#000;font-size:11px;border:1px solid #e3b33b;-webkit-box-shadow:3px 3px 1px 0 #222;box-shadow:2px 2px 1px 0 rgba(0,0,0,.3);z-index:9999999999}.gcb-toolbar-top{height:7px;background:#e3b33b}.gcb-drag-handle{cursor:move}.gcb-dragged{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.gcb-toolbar-grips{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAICAIAAAB/FOjAAAAAHElEQVR4AWN4vNmaJMTw//9/CItIxojUQHKwAgCY9hLAprGf5gAAAABJRU5ErkJggg==)no-repeat;width:16px;height:8px;margin:0 auto;position:relative;top:-1px}.gcb-toolbar-content{display:table;padding:1px 12px 4px;font-size:9pt}.gcb-toolbar-cell{display:table-cell;vertical-align:middle}.gcb-toolbar-cell-content{padding-right:12px;white-space:nowrap}.gcb-toolbar-exit{cursor:pointer;border:1px solid transparent;border-radius:2px}.gcb-toolbar-exit.gcb-disabled{cursor:default}.gcb-toolbar-exit:not(.gcb-disabled):hover{border-color:#88919D}.gcb-toolbar-exit:not(.gcb-disabled):active{border-color:#88919D;background:#96A2B0}.gcb-toolbar-icon-exit{width:32px;height:32px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAHq0lEQVR4Xu2UeVBU2RnFGZNKKnEiqkMvr2l2GmTXQXGDQckoErcYFFRaGppVZWsUHFE2QVFEdgHZI4hou4OKqJIGZSbiiIOYAdndANl3GuiTm5fUVGamHKDGP/2qTtW93z31zu/er7pnyH2sj5qGdmeI5wuTJCE20WUSu/iHbR6ZFRN7MiqkW6PLXu6If3jDPe2Rz/6zlewPHrwjWW/ZhkirUkHCA1nG/QZUNvega1CKkXEZ0QTa+kbwoLYDJwu/h03Mg1HbmNKUXen3PvvVwR75qp9sS9IMdMlljrvmMXDzyXU0DcrwpFsGSbsMd1snaD3okKGqV4a3IzI0dfUh8XYtNh6XtG2NTvryVwFsjuWlBBQxUSbVwrU2ZfDTTJBa+T3EzeO42DJBNI4zNa+R8awWF5qkyHrehG0pPEQWiRBZeAbWURellkHL9mwO057+z902ebG//w0WJCP6KB6wRMnIUmTWKMI+m4Jb3k54X/LGrnx7sleBcx4L3uJ9yKkdguPf1yP4Hguia0xsO60K13zGxALbefxphdulLTTmZ3Olxf083Opbgxu964iscHvADCXDOshtUsKZBi5yGpVAPJCMasAhRxEnHz5B/ONaAqWD4j4u3b/dpwrrU6xuo02zVaYMsPq4gSS7kUtCzXCtay2tm30rUDxkhFv9S1HQY4GCbgsU9pijaGAx7o/ykPiMgiBLgNPPh8gL3ILLeQ7uDM8n/iWI/44Dfb5C5kqPuZOPYkuK8RLHc5SsaFAXl999iSsdq3CjfwFS6ziwz1VESi2HAJniaucXKOjVQJCEDbtsdfDP/OemaxBb0YlT1aMQ5vnh8EM2CnuNUTTEw1+TqWHt1fKTv4LFsQVxkZUUrnYvRMGANnLfKuGrEjY2xv8ZvuIL8L5FPjqoBXGnCmyzleCUFYKI+zU4VtqAE+VtiK8aRdwzKQ6WlGNrFgtXepVxc0gDBwmo+loF0aQAy8L1n+d3cSHuVoZ1pjLWx1nDMTsGYSXNOFL+Ag5iCtHPKWxI1obXuVzEfdtHbixFYvUY4qrGEPPdGE48lSL8UQ925kTBKmEpQr6hcLqJgo4999KkAGuTNMauDHEQ9oSNdfGOCJR04OjjYURWShFVOQzrdAeYR+nC/6oEsZWDSL34NXJVVJHuF0EHH3tCwr+VIrSCvMLXIxDda8c+gTkyNeWxxUG1cVKADRkqOD/Ihvd9NjalhMNenA2bnFD4S9oR9M9RHHrYC8/rj8mtBhGdV47zWhpoiw1E6TpTJHqHwbP4MXZeSIevpA++ZaM47heHu+bGaI09iDwNSnbdkGf6iwBW6arI7uEgtIoFk2P6sDnPgdc/WDCNtgL/ag2c7w7DhcgvuQxneRp4c1KErrRwdJ4+BAmBCNhhBfN4RVgkeiDUJwrFJLwjJYD2vIkWIV+F6r/EU30/hFmc1lhKOwex9epIbqOQ+EoJiS+Vse8REyZR2jA/5QObKw2I09TDqwNueBe5F60JrniX7EdDlBCIaF8KBz05KFpJhxP50x7ixasAN6R+OrPuvQA6AQv/deIlAyHlOggu00VwqR6CH+jiWLUa4lqZ8PqGicUnF8LDxRcFurpod3dHW5AbCXD5AeLeejPcXLno/8JdaA/xokBPD1lMBa/3AujuNz7lXs5EUIUavrqr/SMdKNFC6FNlBDcoYPkpLbjtFOCqnh4N0XrIlYxDiPaEvehOj0R32gmy3kf3yBntuUa8GUyGr9wv1YLARStWZivLguuY8LmlDp+bGrR876hh7101iEjPr1QZh5rn4S8XKQi2U7j0P4i3/k5oCbXH6yNueB2xh16/IT1yhsvEE8b+7KjcZPV5uNYMNb+F5e7V87DnHgW3K0rwJvP3qp0L92fzsK9mHr3f/3o2tpcxYHBSEzu3boGYBLS5u6HRZwfqfbfRImu6J9bXh72RYgXLTP53clMpnqfOcv0YzfHd9bPgWMiAoGoO1IJMwAu1g0mmCjbeZ0An0hC6YQFYmvgIzk7HkWdsiEZPR7xwtUGNcDOtWpetaPAU4PIKE4RwWKly0ymOo0GISa4ihHUzwa/7E1SCTGGW0QiTpDvQiziCZUmVWJXXDSfXaOQYGaDRezfqdzvj2ZZ1qNn+N1pkjTp3IZpEHhAvWYwoNvvIlAHUvbi/UeDrZH1+lgP+u99jsZgN3cjDWJXfC4vz/bC4MAihWwyyDAxQT575hdART60sUb99Gz1zInpNeqh1EKBh9y6cW7QIxylq6hBcIfu3czZpRvDi1catqj+FTgYXRjExsLw8AsGuBKST8DpXVxLggMo1a1Bva0sHZ5M+AaPXpEef1djbo4HszxKIcBYreOqjcKVmyFtQqxU8tarmZ3JBBRpAcL0QfvMNUGNnhxYnJ1RaWv4QnmloiPVLlepcOcyEjJ9AtDg6oo7Px4E5czrlpluzzOf+4Y9LmNaz1uufUbQ9Wr7CNqonUEkVTeSjb52d6aB0Ei5S1zw6y9Bo5ixT7U8CGQxR2n8haE+LUIgjXO5AlJraF3IfoiJUVJYHczj9jWQEqSQ8kM3+2Z/MIRZLdJpANJPwwyT8hLo6Cf+AFaaktNxTXr7Gn8HwfJ9nP4Ph5TV7dmO4svLPwj/WvwFDHCIcFw5HsgAAAABJRU5ErkJggg==)}.gcb-toolbar-exit.gcb-disabled .gcb-toolbar-icon-exit{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAADJUlEQVR4AdWRz0/bdRjHu2pMjFcv3rx692BE40n/Aq/+B8bF7eDNuIvzTASFUoutgHRIoGuxpV2//Ul/fVvWLy0tpdC2dDiWuC1hyQIDXr4TIVoLwcuS7XnnSZ7nSV6vfpqv3fbS1/P6C5l30jfiieRe/jh3GN9JLmW/LL31v+HI+8Fk6mSThxxwzBFPecA68YPEWPbNS+HklfDXsaM4HWH7POKh8pgnHKjrRPeiH18iCI7luE+bqHqPB0qPjqYuYcpYGIe+z/32ix//VZY/lPvo10iTY4UoMXLskqCgLUz8+OfPLsDvvBs97LHLPWVXmk0a6p4mQ9M2BprVoUeut88VBBINeihIoD6dBVVJsEOFBLpTwe3y2gef/17s5B5dpUcdg5oQBZOotgjbdFmhhJSEno4PvsE/bCGYLQosC8tobnOHlHQbNOkoVYm6Epg4rg0IFtfbdIgITgtpEKeqOU+LrtKhrTRJE2JVQs/84Ad8tkOZsOAtWoqBn7uCKngka7OtbNGQdgE33taAIEyXHIY6RQ19AeGbUk5LsUQUi6zudQwWWeOXE++H/xEs08LCh0FeQJGKkmUKS1BNlwUChIkIX9fFwrM/3a8IPGtSp0lDKXKbMCZuClisUaUmPKircGVN1wLjzT7BXK3OKiUUKjSE+5VZMhRPFXrFKV7UdRbX1X7BaJ67FE5jYkkjBCm0lbVtUKeiyfwbv27rr/kPlk/0r1HIkSeLSZUos/wqIK+txCqmJuE4bg58hQW7N1MSlqJImZK6KEEGH7eQ4p9oc5qjr9kGa2bId1SWwGSOBYKaFrmNofayQpK4ktA0z4TDdn65b4RYpcRvJIkSIEYWP/p90kQwlIi0WeZwfnuuYPqVyckQFmGWyJJTAswIThCULKPENOkV3LpI4X7V8Z3vSCAhCggnJeB3DMEzSgZDW1xSL45vzlV47KOfTK0F8GLiIibBGe5s/vj9mSJJjB/+tF1UI68Pfzrumcp4HztJkkY4EzeH3xi5Mn5tWltaV+eTyY9sl5draGI/Idxx/ewixWV4fzmHRjbGvvj3ZezqSOsn4S9K/QVgkJZKAMFreAAAAABJRU5ErkJggg==)}.gcb-appStatus{position:fixed;top:0;left:0;box-sizing:border-box;width:100%;padding:3px 12px;background:#e3b33b;color:#000;text-align:left;font-size:9pt;z-index:99999999;display:none}.gcb-appStatus-close{position:absolute;top:1px;right:12px;width:16px;height:16px;margin-top:1px;cursor:pointer}.gcb-appStatus-close-icon{width:16px;height:16px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAoklEQVR4Aa3PsWoCURAF0G2zsi/gH0UxbUJM8jOR2KxVUiio+IUilmo9R1gWptDSO9XAgZlbPSZqY1NN7t6M1AnGDkJr2G3FDAeTBB/grNWozZzAd4KBuTPC1r8QHS5VxrM5Qjd5LlMZWAFYa+41+RMCYXMDFD/04PZEfm5nCS5aTYL3/vOFko18JXixFxaGfaNfHL0meDLyqWQjUxN19ZBcAT16vTh64lq3AAAAAElFTkSuQmCC)}._gcb_toast-title{font-weight:700}._gcb_toast-message{-ms-word-wrap:break-word;word-wrap:break-word}._gcb_toast-message a,._gcb_toast-message label{color:#FFF}._gcb_toast-message a:hover{color:#CCC;text-decoration:none}._gcb_toast-top-full-width{top:0;right:0;width:100%}._gcb_toast-bottom-full-width{bottom:0;right:0;width:100%}._gcb_toast-top-left{top:12px;left:12px}._gcb_toast-top-right{top:12px;right:12px}.gcb-smoke-base,.gcb-smokebg{right:0;bottom:0;left:0;top:0}._gcb_toast-bottom-right{right:12px;bottom:12px}._gcb_toast-bottom-left{bottom:12px;left:12px}#_gcb_toast-container{position:fixed;z-index:9999999999}#_gcb_toast-container>div{margin:0 0 6px;padding:12px 56px 12px 12px;width:248px;min-height:32px;font-size:11pt;line-height:1.3;text-align:left;background-position:95% center;background-repeat:no-repeat;opacity:.9;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=90)";filter:alpha(opacity=90)}._gcb_toast{background-color:#749ed4;color:#FFF}._gcb_toast-yellow{background-color:#e3b33b;color:#000}#_gcb_toast-container>:hover{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);cursor:pointer}._gcb_toast-info{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABZElEQVR4XqXVIW/CUBSG4SMQExVI5AQCiZzoD5jkByAmEMiJCSQJYgKBQExMIJAVCMQkEoFAIJAVFRUIxASC5P2WACyw3nZN+yBJ357cJueam5oMmLEkJGTFnKF8y0cP6hPJgR1DVS0bHWJlYM+bKuYmj0A5sFDNklRjrZwI1Ui83fU4MV26rhMh+jOFe3hez+ciB5Y3Z0FHTryfpuvJrf/74YjlxIExY77T/r0cpvoqiM9TgEgFcZBnaqqMljFI7/OllipMlIqpMZMTz9fPlBlYG0s5MVJfL/8GYiNUKhaJQIIRlQ2sygTYGfNSgY0xLBUITH6pQNvM2BUNcDztSEaFA8F5G1XZFwlwpG5n6qUGMiZkbFeqsEiOxwdPp3yDSXLlsZV3v5ND3fP1ePPzdYd9ci83iJQTe/num2GpHNiqYW6qMOCgDBwZy7MsqjFxRzgSULc85KnFlDXx5VbeENB238w/askRVPtMUy8AAAAASUVORK5CYII=)!important}._gcb_toast-refresh{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABuklEQVR4AeXVIXAaURSF4SMQiApEBCICUYFAVEREIiIiKhAIRMTKiAhEReTORFRURERURCAqEJUViAoEIgKBjEAgKhARCEQFM//pZFngzQKbje63du/MvW/vnqfDXKHNHT0G/OLRMR1XVIxLtBmxcgYrRo5cUj7aTJ2DqSMd4wo9F8APlyVX+ayQqzx7D0uW3sMTHeb0csqZOXbLdUmiQZtvzJzBQDsMvMXCty4rw2XH/HWAsTa48RYjn+gI18I++LM7vGVQ/kFHcMpvh6w1x07xnLcu3IcjJKrJbCy8UVcuV+iGh01Dki+cYqhC3KSf9nIhia9O0VFhPvEts2QrGW8/XlnvlJwYXcfJE+k/5po/6Z3cdLR+JHFuM3BThbnMy2Z31x0kmLjlkgrgyinukxQMI4vrt/eBJ6e41CsWDjDP5kF2/uDN9XtMMzF2nVNeD37+rtYYeosXGrnl8yD2Nn3Sd4AxZ4dvDEdB+YpzbfCwd4k8ZIPNrcygN9pxzJIuw73w/u6YO34yyWYRXYU4c01yiUcXwIIrHeOImXPR5/StNf3C1Aewolf4r+Ej3eRynzBlSN8xl4cD/x/iujwJe56aRwAAAABJRU5ErkJggg==)!important}._gcb_toast-back{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB3klEQVR4XpWUIVMbcRBHT0RURERURCAiIpCIiIgIBB8AgUAgKvoBEBUViMwgEQgEIqICUXECgahAnECcQCAQCMSJiIiISMTNvNfODsOkx01y9yIz77e7/53bpB73OOeWnIKCR+64cJI0wy9OmVsDSy7sbdH5zkKVBTOOnThw4IRjLilUWfHDTlKPXVJVHjyoDR/xR5XMfp3e5ynaPEo24D6FUrj7qXroL5U/6gtlyrzSBWnoX5MG2OFeye2sPZ2yjOqNsMerOv1YHAuN2RvDSHl7H8Op8lBt82Mj3foIfiuzEJirBy30gGH00E3cUxYt9YBcPUw4V2Yt9YAz5SbhVjluqQdOlKdoxElLPXAQw1Oog3VdeSTb9PNbEqjGDtiJmU5tynQ94FEZVzp4aNIBO8oy4U45qmwgtZNshbHynHChXIbfMoJTJY1lUITdMoJMOfmnsFRGbSPsU1LGjeRSuQu3RQTXShqCPVbqfpsIhpSUDN8FfyrF5ntUic+Vq/V6mZJFtQYwU17s/v8khXJvb3v10Fef7/Iuc+WV0SadIXnok/rF5KrcMKxfHNeUG4+/Hc55UyXnjDHxkbHDmFOykEuutlwK+/yKkAohp9Hbdux6yA1PLFRZ8kzKSf0D/wVHqMGCZ7BVKgAAAABJRU5ErkJggg==)!important}._gcb_toast-forward{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB3klEQVR4AZ2UIVMbYRCGPxFREYGoiEBERCARiIgIREUlAoFAVPQHICoqEMwgEQgEIqICUXECgahAnIg4gUAgKhAnIiIiIhGZeZ4OO0wnJdebuzwxd7nZd9/99ttN1bjLObcUlJQ8cMeFo9QMP3jG1AqYc+FWqoevzFSZMebIkX37jjjiklKVBd/spGrskqky8VOl+B6/VMntVYX3eAybh6kG9ymV0p217BH+e+1DVaJcmb5zQRbhH1MD7HCvFHZWjk6ZR/ZGuMWzeva3ccw0am8Me8rLWxmeKZP/2s1Uye2+k/ipjOORqUbj6iUm/0owCA/d5K4yS0FLiUI9SJwbVtpLcKrcJG6Vo5TaSzhSHsNITFprCftRPKXaD0ufyWt/E30noUYP2I7XLzaEy1WBB2W4iQO2lXniTjnc5AwYKk+Ji7C0QRc4UbJoBuVG9yBXjl8f5spe23B7LFnGjuRSuWt9ka+jgLfpXqj77UbpNT+Dt1e/K2XNPlqXLZSr1T9yJbeTGsE4FuCqJ3uUyr1bDbKPlcX6Xt5hqjzX9SNqLyJ8VL2wC1VuGKTq79csa5e/Hc55UaXglCExZGwz5IQ8gpdcrdZenedHiKzBkoxBaoJdD7jhkZkqc57IOK4+4D9OXMJD/cQX6gAAAABJRU5ErkJggg==)!important}._gcb_toast-down{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAACBklEQVR4Xp2Vr1MbURRGV0RUREQgIhAREUgEIiICgUBWVCAQFfwBiIoKBDNIRAQCEVGBqIioQFQgIiIiEAgEArECERGBRGTmnA6XgZ19+4a2fPbud+7PeVvk5SYn/GJOSck1l5w6LP5NfvKYBzNiyamdv9g5YKHKgjF7Du3Zc8geI0pVHvlmq8jLNhNVZu5k4Vv8VmVqN2fvchNlfnm3wW1KpXSjkT3sd2mAXb+ymySaKg9JFUzCvpZmjI+nSbIWV8rcahYcKMvIngckssO9evy2OBaa9p4C0oEqT7604bEyS60pIBU/lXEEeFB3/hvQjxrahZvKIommgKyYq58LTpTxhwBHykXBL2XvIwCHyk0U4vBDgF40T6n26oeSAjKxkGrsgPXkKlt5gC0mTcC1MqhzA5ECwq6VnXVlWXCZXqFWiAoQdmuAgXJbcKqMai3MXhEVIOzWL5ZDZRLLoKw/LBWCAFR228mA959JS2Urj2CmzHJ2u6xYxRvJSLmMQAMRMrGHOI8GgtXhUd3OI/J2+s/56b/m+66UrjURebst5srZG68aVhOR2EOMlbsa1C6lcmWngRil2cP+2HyXN3hQ7qt95ESfediH+T/DXJUL+kU+fs6q8fgn5Z3wpMqcIwasv9w8Aw6ZhnnFWa2lbJ4fAUkU5kmjtrxs+5kLbliosuSWCfv5P/MfcYvCRyCSJeEAAAAASUVORK5CYII=)!important}._gcb_toast-up{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAB/0lEQVR4Xp3VIU8jURSG4REVKyoQiIqKigokAlExAsEPQCAQCAQ/ALFiBaIJsgKBQFSsQKyoQCBWICoqRlQgEAjEiIqKCmRFk/fdcEO4k+kNSzmyk+855+Y092bpcpdL7igoKZlyz8A8+1r5wz4zE8WCgVv/AThjrsqcIcfmduyYc8wVpSqv/LSRpcsmI1UmHiTxPf6qMraVird4VBYcfXrAfUqldGete4g/1z/Y4NxGrdFYmdWmYBTi22vxkTKqEQ0elKICc6Ys3EnFNUFs8aL2PxbHXDlKx9MEe8ry/Rj2lUk6/gnxRxkGgJl6kIozYapMmawTdJWlzcxdZZ6O22SsjG0miUI9zLhUhlUgxrOMAGRZJCLAhXKbcaccV4EYj0AkImCuPIZBzKtAjEcgEhGwEw5PqXaqQIxHIBL1WcMOaFeBGI9AJNaBqdLLUhWBZNFWFhn3ytG3gJ7ylDFQrr4FnIe1mivlhkDET96khbK3KWCLFatwR3Kl3G8KcPPxv3SLV3V/E4DuW3+675q/lNLtrwI2KJTr6g+hk42vAQyVZ5tVs0WpPNQfDk/te1rrPlRe1+/lHWbKS3of8ewUIZ6nF1Oocks3vThuWKUu/+p4lyxVKbigRzt0bdPjnHEIr7iunj3d5zdLE8WKUWK2VNn0kFsemauy4IkRJ+mX+R+bCsJKUF4+aAAAAABJRU5ErkJggg==)!important}._gcb_toast-warning{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA0UlEQVR4AbXRoQ3CUBSF4SsqKhgB0TEQFQyCYJQmjIJAIBmiorIjIBih7h4S8kTzm5O+hv/6I+4Xf09N1KdDjjnnMWrLmyTlPepSl4t+5SlqyodKOQbzqdeqvASy5aRV+VYbW9JVbNjG9xHKxXOCj3lO8klRTuT0fBwgp+fjADk9HwfI6fgwQE7DhwHDCT4zAE7y2QFyks8MkJN8doCc5PORk3w+cpIPDeUQOMHnfgBO8pkBcpKPdeXWkZN8NnLma9fAHPncNTCFGvU6V18b2nlfXKD+sl/iY0QAAAAASUVORK5CYII=)!important}#_gcb_toast-container._gcb_toast-bottom-full-width>div,#_gcb_toast-container._gcb_toast-top-full-width>div{width:96%;margin:1px auto}@media all and (max-width:350px){#_gcb_toast-container{width:98%;right:1%}#_gcb_toast-container>div{width:auto}}.gcb-smoke-base{position:fixed;visibility:hidden;opacity:0;background:rgba(0,0,0,.3);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#90000000, endColorstr=#900000000)}.gcb-smoke-base.gcb-smoke-visible{opacity:1;visibility:visible}.gcb-smokebg{position:fixed}.gcb-smoke-base .gcb-dialog{position:absolute;top:25%;left:50%;width:40%;margin-left:-20%;box-sizing:border-box}.gcb-smoke-base .gcb-dialog-inner{padding:10px;color:#202020;box-sizing:border-box;outline:#E3B33B solid 1px}.gcb-dialog-title{display:block;background:#e3b33b;color:#fff;width:100%;height:1.33em;margin:-10px -10px 10px;font-weight:700;padding:4px 10px;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.gcb-dialog-prompt{margin-top:15px}.gcb-dialog-buttons{margin:20px 0 0;text-align:right}.gcb-smoke{font-size:9pt;line-height:1.3;text-align:left;background-color:rgba(255,255,255,.95);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffff, endColorstr=#ffffff);box-shadow:0 2px 8px #666}.gcb-dialog-prompt input{margin:0;outline:0;font-family:Menlo,"Andale Mono",monospace;border:1px solid #aaa;width:100%;display:inline-block;background-color:transparent;font-size:16px}.gcb-dialog-buttons button{display:inline-block;vertical-align:baseline;cursor:pointer;font-family:Tahoma,sans-serif;text-decoration:none;border-radius:3px;color:#4A5965;border:1px solid #cacaca;font-size:9pt;font-weight:700;line-height:1;margin:0 3px;min-width:75px;padding:4px 8px;background-color:#f4f4f4;background-image:-webkit-gradient(linear,left top,left bottom,from(#f4f4f4),to(#edefef));background-image:-webkit-linear-gradient(top,#f4f4f4,#edefef);background-image:-moz-linear-gradient(top,#f4f4f4,#edefef);background-image:-o-linear-gradient(top,#f4f4f4,#edefef);background-image:linear-gradient(to bottom,#f4f4f4,#edefef);background-clip:padding-box}.gcb-dialog-buttons button:hover{background-color:#fff;background-image:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#f7f7f7));background-image:-webkit-linear-gradient(top,#fff,#f7f7f7);background-image:-moz-linear-gradient(top,#fff,#f7f7f7);background-image:-o-linear-gradient(top,#fff,#f7f7f7);background-image:linear-gradient(to bottom,#fff,#f7f7f7);background-clip:padding-box}.gcb-dialog-buttons button:active{background-color:#eaeaea;background-image:-webkit-gradient(linear,left top,left bottom,from(#eaeaea),to(#fff));background-image:-webkit-linear-gradient(top,#eaeaea,#fff);background-image:-moz-linear-gradient(top,#eaeaea,#fff);background-image:-o-linear-gradient(top,#eaeaea,#fff);background-image:linear-gradient(to bottom,#eaeaea,#fff);background-clip:padding-box}.gcb-smoke-alert .gcb-dialog-buttons button{color:#fff;background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#66b1cf),to(#5da1bc));background-image:-webkit-linear-gradient(top,#66b1cf,#5da1bc);background-image:-moz-linear-gradient(top,#66b1cf,#5da1bc);background-image:-o-linear-gradient(top,#66b1cf,#5da1bc);background-image:linear-gradient(to bottom,#66b1cf,#5da1bc);background-clip:padding-box}.gcb-smoke-alert .gcb-dialog-buttons button:hover{background:#66b1cf}.gcb-smoke-alert .gcb-dialog-buttons button:active{background-color:#5da1bc;background-image:-webkit-gradient(linear,left top,left bottom,from(#5da1bc),to(#66b1cf));background-image:-webkit-linear-gradient(top,#5da1bc,#66b1cf);background-image:-moz-linear-gradient(top,#5da1bc,#66b1cf);background-image:-o-linear-gradient(top,#5da1bc,#66b1cf);background-image:linear-gradient(to bottom,#5da1bc,#66b1cf);background-clip:padding-box}@media (max-width:400px){.gcb-smoke-base .gcb-dialog{width:90%;margin-left:-45%}}@media (min-width:400px)and (max-width:700px){.gcb-smoke-base .gcb-dialog{width:80%;margin-left:-40%}}.gcb-tooltip{position:absolute;z-index:7426170;display:block;visibility:visible;font-size:11px;line-height:1.4;font-family:Tahoma,sans-serif}.gcb-tooltip.gcb-top{margin-top:-3px;padding:5px 0}.gcb-tooltip.gcb-right{margin-left:3px;padding:0 5px}.gcb-tooltip.gcb-bottom{margin-top:3px;padding:5px 0}.gcb-tooltip.gcb-left{margin-left:-3px;padding:0 5px}.gcb-tooltip-inner{max-width:240px;padding:8px;color:#222;text-align:center;text-decoration:none;background-color:#e3b33b;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.gcb-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.gcb-tooltip.gcb-top .gcb-tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#e3b33b}.gcb-tooltip.gcb-right .gcb-tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#e3b33b}.gcb-tooltip.gcb-left .gcb-tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#e3b33b}.gcb-tooltip.gcb-bottom .gcb-tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#e3b33b}.gcb-fade{opacity:0;-webkit-transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;transition:opacity .15s linear}.gcb-fade.gcb-in{opacity:1}',b=document.getElementsByTagName("head")[0],c=document.createElement("style");
if(c.setAttribute("data-gcb-service-node",!0),b.insertBefore(c,b.firstChild),c.styleSheet)c.styleSheet.disabled||(c.styleSheet.cssText=a);else try{c.innerHTML=a}catch(d){c.innerText=a}}(),define("masterCss",function(){}),require(["jquery","integration/initialization","masterCss"],function(a,b){"use strict";var c,d,e=a("script[data-gcb-url]");d=a("script[data-cfg-var]").data("cfgVar")||(window._gcb?"_gcb":"_genesys"),c=a("script[data-gwc-var]"),c.length&&c.data("gwcVar")||e.attr("data-gwc-var",d+".chat"),a(document).ready(function(){var a=e.data("gcbUrl");b.initialize(d,a+"/cometd")})}),define("integration/integrationApp",function(){}),require({map:{"*":{lodash:"underscore","chat/common/umd/cookie":"chat/cookieWrapper","simply-deferred":"jquery",URIjs:"URI"},"integration/initialization":{notificationAgentModule:"dummy","tracker/trackerApplicationModule":"dummy"}}},["integration/integrationApp"],function(){}),define("integration/build/integrationConfigNoTracker.js",function(){})}).call({});